import{j as e,P as a}from"./chunk-DE8J_P3a.js";import{r as s,u as t}from"./chunk-CHPtWMTz.js";import{B as r}from"./chunk-CKgI9q5n.js";import{T as i,a as n,b as l,c}from"./chunk-ObNbiZMt.js";import{c as d,s as o,Z as m,j as g,X as x,f as h,e as p,S as u}from"../index-C69Cv9fm.js";import{C as j,b as v,c as y,e as f,a as N}from"./chunk-30ZbY-F3.js";import{I as b}from"./chunk-D3Z6_DOi.js";import{L as w,D as _,a as C,b as S,c as k}from"./chunk-YjRoWQ3-.js";import{B as D}from"./chunk-Ck98qql-.js";import{M as I}from"./chunk-DgElOEdu.js";import{G as P,E as T,D as O,L as A}from"./chunk-DcTAIqBw.js";import{B as F}from"./chunk-Bc1XvzR8.js";import{T as M,U,a as L,S as R,C as z}from"./chunk-BxvRdxTs.js";import{P as E,I as $,C as B}from"./chunk-C-NDN0ZE.js";import{P as q,T as Y}from"./chunk-vJ6XLRYv.js";import{C as H}from"./chunk-D53qnCh4.js";import{T as G}from"./chunk-Bx2M---t.js";import{f as W}from"./chunk-DN5ISW2H.js";import{C as K}from"./chunk-Bbmjf7eQ.js";import{P as V,a as Z,b as J}from"./chunk-BzRjpoc5.js";import{M as X}from"./chunk-ByyMTJWo.js";import{C as Q}from"./chunk-DV21tWlK.js";import{C as ee}from"./chunk-DuSQr7KO.js";import{U as ae}from"./chunk-D5WpN7K-.js";import{C as se}from"./chunk-CD10_Lnj.js";import{S as te,a as re,b as ie,c as ne,d as le}from"./chunk-LoZVIojA.js";import{R as ce,L as de,C as oe,X as me,Y as ge,T as xe,a as he,b as pe,B as ue,c as je}from"./chunk-BI6i0PZu.js";import{U as ve}from"./chunk-CkE6zG_x.js";import{S as ye}from"./chunk-C-heRrtZ.js";import{C as fe}from"./chunk-DeuaeHUI.js";import{P as Ne}from"./chunk-DoIo-fWL.js";import"./chunk-CbEMFF6w.js";import"./chunk-A2g_dVj8.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=d("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),we=d("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),_e=d("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Ce=d("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */class Se{static async getAdvertiserProfile(){try{const{data:{user:e}}=await o.auth.getUser();if(!e)throw new Error("Not authenticated");const{data:a,error:s}=await o.from("advertisers").select("*").eq("user_id",e.id).single();if(s&&"PGRST116"!==s.code)throw s;return a}catch(e){return null}}static async createAdvertiserProfile(e){try{if(m.getState().isDemoMode)return{id:"demo-advertiser-"+Date.now(),user_id:"demo-user",company_name:e.company_name,company_email:e.company_email,website:e.website,status:"active",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};const{data:{user:a}}=await o.auth.getUser();if(!a)throw new Error("Not authenticated");const{data:s,error:t}=await o.from("advertisers").insert({user_id:a.id,...e}).select().single();if(t)throw t;return s}catch(a){throw a}}static async getCampaigns(){try{const e=await this.getAdvertiserProfile();if(!e)return[];const{data:a,error:s}=await o.from("campaigns").select("\n          *,\n          targeting:campaign_targeting(*)\n        ").eq("advertiser_id",e.id).order("created_at",{ascending:!1});if(s)throw s;return a||[]}catch(e){return[]}}static async getCampaign(e){try{const{data:a,error:s}=await o.from("campaigns").select("\n          *,\n          targeting:campaign_targeting(*)\n        ").eq("id",e).single();if(s)throw s;return a}catch(a){return null}}static async createCampaign(e){try{const a=await this.getAdvertiserProfile();if(!a)throw new Error("No advertiser profile found");const{data:s,error:t}=await o.from("campaigns").insert({advertiser_id:a.id,name:e.name,description:e.description,discount_details:e.discount_details,images:e.images,destination_info:e.destination_info,tags:e.tags,status:e.status,start_date:e.start_date,end_date:e.end_date}).select().single();if(t)throw t;if(s&&e.targeting){const{error:a}=await o.from("campaign_targeting").insert({campaign_id:s.id,...e.targeting});if(a)throw await o.from("campaigns").delete().eq("id",s.id),a}return s}catch(a){throw a}}static async updateCampaign(e,a){try{const{targeting:s,...t}=a,{data:r,error:i}=await o.from("campaigns").update(t).eq("id",e).select().single();if(i)throw i;if(s){const{error:a}=await o.from("campaign_targeting").upsert({campaign_id:e,...s});if(a)throw a}return r}catch(s){throw s}}static async deleteCampaign(e){try{const{error:a}=await o.from("campaigns").delete().eq("id",e);if(a)throw a;return!0}catch(a){return!1}}static async updateCampaignStatus(e,a){try{const{error:s}=await o.from("campaigns").update({status:a}).eq("id",e);if(s)throw s;return!0}catch(s){return!1}}static async getCampaignStats(e){try{const a=await this.getCampaign(e);if(!a)return null;return{impressions:a.impressions||0,clicks:a.clicks||0,conversions:a.conversions||0,ctr:a.impressions>0?a.clicks/a.impressions*100:0,conversionRate:a.clicks>0?a.conversions/a.clicks*100:0}}catch(a){return null}}static async trackEvent(e,a,s){try{const{data:{user:t}}=await o.auth.getUser();await o.from("campaign_analytics").insert({campaign_id:e,user_id:null==t?void 0:t.id,event_type:a,event_data:s}),await o.rpc("increment_campaign_stat",{p_campaign_id:e,p_stat_type:a})}catch(t){}}static async getActiveCampaigns(e){try{let a=o.from("campaigns").select("\n          *,\n          targeting:campaign_targeting(*)\n        ").eq("status","active").or(`start_date.is.null,start_date.lte.${(new Date).toISOString()}`).or(`end_date.is.null,end_date.gte.${(new Date).toISOString()}`);const{data:s,error:t}=await a;if(t)throw t;let r=s||[];return e&&(r=r.filter(a=>{var s,t,r,i;const n=a.targeting;if(!n)return!0;if((null==(s=e.interests)?void 0:s.length)&&(null==(t=n.interests)?void 0:t.length)){if(!e.interests.some(e=>n.interests.includes(e)))return!1}return!(e.location&&(null==(r=n.locations)?void 0:r.length)&&!n.locations.includes(e.location))&&!(e.trip_type&&(null==(i=n.trip_types)?void 0:i.length)&&!n.trip_types.includes(e.trip_type))})),r}catch(a){return[]}}static async uploadCampaignImage(e){try{const a=e.name.split(".").pop(),s=`campaign-images/${`${crypto.randomUUID()}.${a}`}`,{error:t}=await o.storage.from("advertiser-assets").upload(s,e);if(t)throw t;const{data:r}=o.storage.from("advertiser-assets").getPublicUrl(s);return r.publicUrl}catch(a){return null}}}const ke=({onComplete:a})=>{const{toast:t}=g(),i=m(e=>e.isDemoMode),[n,l]=s.useState(!1),[c,d]=s.useState({company_name:i?"Demo Travel Company":"",company_email:i?"demo@travelcompany.com":"",website:i?"https://www.demotravelcompany.com":""});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs(j,{className:"w-full max-w-md",children:[e.jsxs(v,{className:"text-center",children:[e.jsx(y,{className:"text-2xl font-bold",children:"Welcome to Chravel Advertiser Hub"}),e.jsx(f,{children:i?"Demo Mode: Fill out the form below to see how the advertiser hub works":"Create your advertiser profile to start promoting your travel destinations"})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.company_name&&c.company_email)try{l(!0);const e=await Se.createAdvertiserProfile(c);e&&(t({title:"Welcome to Chravel Ads!",description:"Your advertiser account has been created successfully"}),a(e))}catch(s){t({title:"Error",description:"Failed to create advertiser profile. Please try again.",variant:"destructive"})}finally{l(!1)}else t({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(w,{htmlFor:"company_name",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(b,{id:"company_name",type:"text",placeholder:"Your Company Name",value:c.company_name,onChange:e=>d({...c,company_name:e.target.value}),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(w,{htmlFor:"company_email",children:["Company Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(b,{id:"company_email",type:"email",placeholder:"contact@company.com",value:c.company_email,onChange:e=>d({...c,company_email:e.target.value}),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"website",children:"Website (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(b,{id:"website",type:"url",placeholder:"https://www.company.com",value:c.website,onChange:e=>d({...c,website:e.target.value}),className:"pl-10"})]})]}),e.jsx(r,{type:"submit",className:"w-full",disabled:n,children:n?"Creating Profile...":"Create Advertiser Profile"})]})})]})})},De={transportation:[{value:"rideshare",label:"Rideshare"},{value:"airport-transfer",label:"Airport Transfer"},{value:"premium-service",label:"Premium Service"},{value:"city-travel",label:"City Travel"},{value:"car-rental",label:"Car Rental"}],accommodation:[{value:"lodging",label:"Lodging"},{value:"price-comparison",label:"Price Comparison"},{value:"rewards-program",label:"Rewards Program"},{value:"budget-friendly",label:"Budget Friendly"},{value:"luxury-stays",label:"Luxury Stays"}],services:[{value:"travel-booking",label:"Travel Booking"},{value:"package-deals",label:"Package Deals"},{value:"multi-service",label:"Multi-Service"},{value:"business-travel",label:"Business Travel"},{value:"concierge",label:"Concierge"}],specialOffers:[{value:"new-user-offer",label:"New User Offer"},{value:"promotional",label:"Promotional"},{value:"discount",label:"Discount"},{value:"rewards",label:"Rewards"},{value:"limited-time",label:"Limited Time"}],travelType:[{value:"group-travel",label:"Group Travel"},{value:"solo-travel",label:"Solo Travel"},{value:"family-friendly",label:"Family Friendly"},{value:"corporate-travel",label:"Corporate Travel"},{value:"adventure",label:"Adventure"}]},Ie=({campaign:a,onClose:t,onSuccess:i})=>{const{toast:n}=g(),[l,c]=s.useState(!1),[d,o]=s.useState(!1),[m,p]=s.useState({name:a.name,description:a.description||"",discount_details:a.discount_details,images:a.images,destination_info:a.destination_info,tags:a.tags,status:"draft"===a.status?"draft":"active",start_date:a.start_date,end_date:a.end_date,targeting:a.targeting?{age_min:a.targeting.age_min,age_max:a.targeting.age_max,genders:a.targeting.genders,interests:a.targeting.interests,locations:a.targeting.locations,trip_types:a.targeting.trip_types}:{genders:["all"],interests:[],locations:[],trip_types:[]}});return e.jsx(_,{open:!0,onOpenChange:t,children:e.jsxs(C,{className:"max-w-3xl max-h-[90vh] overflow-y-auto bg-gray-900 border-gray-700",children:[e.jsx(S,{children:e.jsx(k,{className:"text-white",children:"Edit Campaign"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"name",className:"text-gray-300",children:"Campaign Name"}),e.jsx(b,{id:"name",value:m.name,onChange:e=>p({...m,name:e.target.value}),className:"mt-1 bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"description",className:"text-gray-300",children:"Description"}),e.jsx(M,{id:"description",value:m.description,onChange:e=>p({...m,description:e.target.value}),className:"mt-1 bg-gray-800 border-gray-700 text-white",rows:3})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"discount",className:"text-gray-300",children:"Discount Details"}),e.jsx(b,{id:"discount",value:m.discount_details||"",onChange:e=>p({...m,discount_details:e.target.value}),className:"mt-1 bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsxs(w,{className:"text-gray-300",children:["Campaign Images (",m.images.length,"/",5,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mt-2 mb-4",children:m.images.map((a,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url,alt:a.alt,className:"w-full h-32 object-cover rounded-lg"}),e.jsx(r,{size:"sm",variant:"destructive",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(e=>{const a=m.images.filter((a,s)=>s!==e);p({...m,images:a})})(s),children:e.jsx(x,{className:"h-4 w-4"})})]},s))}),m.images.length<5&&e.jsxs("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-6 text-center bg-gray-800/30",children:[e.jsx("input",{type:"file",id:"image-upload",multiple:!0,accept:"image/*",onChange:async e=>{const a=e.target.files;if(!a)return;const s=5-m.images.length;if(a.length>s)return void n({title:"Too Many Images",description:`You can only upload ${s} more image(s). Maximum is 5.`,variant:"destructive"});o(!0);const t=[];for(let r=0;r<a.length;r++){const e=a[r],s=await Se.uploadCampaignImage(e);s&&t.push({url:s,alt:e.name,order:m.images.length+r})}p({...m,images:[...m.images,...t]}),o(!1)},className:"hidden"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(U,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-400",children:d?"Uploading...":`Click to upload (${5-m.images.length} slots remaining)`})]})]})]}),e.jsxs("div",{children:[e.jsxs(w,{className:"text-gray-300",children:["Campaign Tags (",m.tags.length,"/",5,")"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Choose tags that best describe your campaign"}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto p-4 bg-gray-800/30 rounded-lg",children:Object.entries(De).map(([a,s])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2 capitalize",children:a.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>{const s=m.tags.includes(a.value),t=!s&&m.tags.length>=5;return e.jsxs("label",{className:h("flex items-center space-x-2 p-2 rounded border cursor-pointer transition-colors",s?"bg-red-600/20 border-red-500":t?"bg-gray-800/30 border-gray-700 opacity-50 cursor-not-allowed":"bg-gray-800/50 border-gray-700 hover:bg-gray-800"),children:[e.jsx("input",{type:"checkbox",checked:s,disabled:t,onChange:e=>{p({...m,tags:e.target.checked?[...m.tags,a.value]:m.tags.filter(e=>e!==a.value)})},className:"rounded border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-300",children:a.label})]},a.value)})})]},a))}),e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[m.tags.length," / ",5," tags selected"]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-700",children:[e.jsx(r,{variant:"outline",onClick:t,disabled:l,className:"border-gray-600 text-gray-300 hover:bg-white/10",children:"Cancel"}),e.jsx(r,{onClick:async()=>{try{c(!0),await Se.updateCampaign(a.id,m),n({title:"Campaign Updated",description:`"${m.name}" has been updated successfully`}),i()}catch(e){n({title:"Error",description:"Failed to update campaign. Please try again.",variant:"destructive"})}finally{c(!1)}},disabled:l||!m.name||!m.description,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700",children:l?"Saving...":"Save Changes"})]})]})]})})},Pe=({campaigns:a,onRefresh:t})=>{const{toast:i}=g(),[n,l]=s.useState(null),c=e=>{switch(e){case"active":return"bg-green-500";case"paused":return"bg-yellow-500";case"draft":default:return"bg-gray-500";case"ended":return"bg-red-500"}},d=async e=>{const a="active"===e.status?"paused":"active";await Se.updateCampaignStatus(e.id,a)?(i({title:"Status Updated",description:`Campaign "${e.name}" is now ${a}`}),t()):i({title:"Error",description:"Failed to update campaign status",variant:"destructive"})};return 0===a.length?e.jsx(j,{className:"text-center py-12 bg-white/5 border-gray-700",children:e.jsxs(N,{children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"No campaigns yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create your first campaign to start advertising on Chravel"})]})}):e.jsxs("div",{className:"grid gap-6",children:[a.map(a=>{var s,n;return e.jsxs(j,{className:"bg-white/5 border-gray-700 hover:bg-white/10 transition-all",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xl text-white",children:a.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx(F,{className:`${c(a.status)} text-white`,children:a.status}),a.discount_details&&e.jsx(F,{variant:"outline",children:a.discount_details})]})]}),e.jsxs("div",{className:"flex gap-2",children:["draft"===a.status?e.jsx(r,{size:"sm",variant:"outline",onClick:()=>d(a),children:e.jsx(E,{className:"h-4 w-4"})}):"active"===a.status?e.jsx(r,{size:"sm",variant:"outline",onClick:()=>d(a),children:e.jsx(we,{className:"h-4 w-4"})}):null,e.jsx(r,{size:"sm",variant:"outline",onClick:()=>l(a),className:"border-gray-600 hover:bg-white/10",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(r,{size:"sm",variant:"outline",onClick:()=>(async(e,a)=>{if(!confirm(`Are you sure you want to delete "${a}"?`))return;await Se.deleteCampaign(e)?(i({title:"Campaign Deleted",description:`"${a}" has been deleted`}),t()):i({title:"Error",description:"Failed to delete campaign",variant:"destructive"})})(a.id,a.name),children:e.jsx(L,{className:"h-4 w-4"})})]})]})}),e.jsxs(N,{children:[e.jsx("p",{className:"text-gray-300 mb-4",children:a.description}),(a.start_date||a.end_date)&&e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-4",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.start_date?W(new Date(a.start_date),"MMM d, yyyy"):"No start date"," - ",a.end_date?W(new Date(a.end_date),"MMM d, yyyy"):"No end date"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"Impressions"})]}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:a.impressions.toLocaleString()})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"Clicks"})]}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:a.clicks.toLocaleString()})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"CTR"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-white",children:[a.impressions>0?(a.clicks/a.impressions*100).toFixed(2):"0.00","%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"Conversions"})]}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:a.conversions.toLocaleString()})]})]}),a.targeting&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Targeting:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[null==(s=a.targeting.interests)?void 0:s.map(a=>e.jsx(F,{variant:"secondary",children:a.replace("_"," ")},a)),null==(n=a.targeting.locations)?void 0:n.map(a=>e.jsxs(F,{variant:"secondary",children:["📍 ",a]},a))]})]})]})]},a.id)}),n&&e.jsx(Ie,{campaign:n,onClose:()=>l(null),onSuccess:()=>{l(null),t()}})]})},Te=({campaign:a,className:s=""})=>{var t,r;const i=(null==(r=null==(t=a.images)?void 0:t[0])?void 0:r.url)||"/placeholder.svg";return e.jsxs(j,{className:`overflow-hidden hover:shadow-lg transition-shadow cursor-pointer ${s}`,children:[e.jsxs("div",{className:"relative h-48 bg-gray-200",children:[e.jsx("img",{src:i,alt:a.name||"Campaign preview",className:"w-full h-full object-cover"}),a.discount_details&&e.jsx(F,{className:"absolute top-3 right-3 bg-green-600 text-white",children:a.discount_details}),e.jsx(F,{className:"absolute top-3 left-3 bg-purple-600 text-white",children:"Promoted"})]}),e.jsxs(N,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-1",children:a.name||"Campaign Name"}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:a.description||"Your campaign description will appear here..."}),a.destination_info&&(a.destination_info.city||a.destination_info.country)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:[a.destination_info.city,a.destination_info.country].filter(Boolean).join(", ")})]}),a.tags&&a.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[a.tags.slice(0,3).map(a=>e.jsx(F,{variant:"secondary",className:"text-xs",children:a},a)),a.tags.length>3&&e.jsxs(F,{variant:"secondary",className:"text-xs",children:["+",a.tags.length-3]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[e.jsx("button",{className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:"View Details"}),e.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Book Now"})]})]})]})},Oe=["nightlife","live_music","dancing","happy_hour","group_outings","food_dining","cocktails","rooftop_venues","date_night","adventure","beach","cultural","luxury","budget_travel"],Ae=["leisure","business","group","family","solo","romantic"],Fe=({onClose:a,onSuccess:t})=>{const{toast:i}=g(),[n,l]=s.useState(1),[c,d]=s.useState(!1),[o,m]=s.useState(!1),[p,u]=s.useState({name:"",description:"",discount_details:"",images:[],destination_info:{},tags:[],status:"draft",targeting:{genders:["all"],interests:[],locations:[],trip_types:[]}}),j=[{id:1,title:"Campaign Details",icon:_e},{id:2,title:"Images & Media",icon:$},{id:3,title:"Targeting",icon:ae},{id:4,title:"Schedule & Budget",icon:O},{id:5,title:"Review & Launch",icon:se}],v=async e=>{const a=e.target.files;if(!a)return;const s=5-p.images.length;if(a.length>s)return void i({title:"Too Many Images",description:`You can only upload ${s} more image(s). Maximum is 5.`,variant:"destructive"});m(!0);const t=[];for(let r=0;r<a.length;r++){const e=a[r],s=await Se.uploadCampaignImage(e);s&&t.push({url:s,alt:e.name,order:p.images.length+r})}u({...p,images:[...p.images,...t]}),m(!1)},y=()=>{switch(n){case 1:return p.name&&p.description;case 2:return p.images.length>=2;case 3:case 4:case 5:return!0;default:return!1}};return e.jsx(_,{open:!0,onOpenChange:a,children:e.jsxs(C,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(S,{children:e.jsx(k,{children:"Create New Campaign"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:j.map((a,s)=>{const t=a.icon;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:h("flex items-center justify-center w-10 h-10 rounded-full",n>=a.id?"bg-purple-600 text-white":"bg-gray-200 text-gray-400"),children:e.jsx(t,{className:"h-5 w-5"})}),s<j.length-1&&e.jsx("div",{className:h("w-16 h-1 mx-2",n>a.id?"bg-purple-600":"bg-gray-200")})]},a.id)})}),e.jsx("div",{className:"min-h-[300px]",children:(()=>{var a,s;switch(n){case 1:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"name",children:"Campaign Name *"}),e.jsx(b,{id:"name",value:p.name,onChange:e=>u({...p,name:e.target.value}),placeholder:"Summer Beach Getaway Special",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"description",children:"Description *"}),e.jsx(M,{id:"description",value:p.description,onChange:e=>u({...p,description:e.target.value}),placeholder:"Describe your offer and what makes it special...",className:"mt-1",rows:4})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"discount",children:"Discount Details (Optional)"}),e.jsx(b,{id:"discount",value:p.discount_details||"",onChange:e=>u({...p,discount_details:e.target.value}),placeholder:"20% off first booking",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"location",children:"Destination"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(X,{className:"h-5 w-5 text-gray-400 mt-2"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(b,{placeholder:"City",value:(null==(a=p.destination_info)?void 0:a.city)||"",onChange:e=>u({...p,destination_info:{...p.destination_info,city:e.target.value}})}),e.jsx(b,{placeholder:"Country",value:(null==(s=p.destination_info)?void 0:s.country)||"",onChange:e=>u({...p,destination_info:{...p.destination_info,country:e.target.value}})})]})]})]})]});case 2:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Campaign Images"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Upload carousel images for your campaign (",p.images.length,"/",5,")"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:p.images.map((a,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url,alt:a.alt,className:"w-full h-32 object-cover rounded-lg"}),e.jsx(r,{size:"sm",variant:"destructive",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(e=>{const a=p.images.filter((a,s)=>s!==e);u({...p,images:a})})(s),children:e.jsx(x,{className:"h-4 w-4"})})]},s))}),p.images.length<5&&e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",id:"image-upload",multiple:!0,accept:"image/*",onChange:v,className:"hidden"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(U,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:o?"Uploading...":`Click to upload (${5-p.images.length} slots remaining)`})]})]})]}),e.jsxs("div",{children:[e.jsxs(w,{children:["Campaign Tags (Select up to ",5,")"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Choose tags that best describe your campaign"}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Object.entries(De).map(([a,s])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2 capitalize",children:a.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>{const s=p.tags.includes(a.value),t=!s&&p.tags.length>=5;return e.jsxs("label",{className:h("flex items-center space-x-2 p-2 rounded border cursor-pointer transition-colors",s?"bg-red-600/20 border-red-500":t?"bg-gray-800/30 border-gray-700 opacity-50 cursor-not-allowed":"bg-gray-800/50 border-gray-700 hover:bg-gray-800"),children:[e.jsx("input",{type:"checkbox",checked:s,disabled:t,onChange:e=>{u({...p,tags:e.target.checked?[...p.tags,a.value]:p.tags.filter(e=>e!==a.value)})},className:"rounded border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-300",children:a.label})]},a.value)})})]},a))}),e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[p.tags.length," / ",5," tags selected"]})]})]});case 3:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Age Range"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(b,{type:"number",placeholder:"Min",value:p.targeting.age_min||"",onChange:e=>u({...p,targeting:{...p.targeting,age_min:parseInt(e.target.value)}}),className:"w-20"}),e.jsx("span",{children:"to"}),e.jsx(b,{type:"number",placeholder:"Max",value:p.targeting.age_max||"",onChange:e=>u({...p,targeting:{...p.targeting,age_max:parseInt(e.target.value)}}),className:"w-20"})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Interests"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Oe.map(a=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:p.targeting.interests.includes(a),onChange:e=>{const s=e.target.checked?[...p.targeting.interests,a]:p.targeting.interests.filter(e=>e!==a);u({...p,targeting:{...p.targeting,interests:s}})},className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm",children:a.replace("_"," ")})]},a))})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Trip Types"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Ae.map(a=>e.jsx(F,{variant:p.targeting.trip_types.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>{const e=p.targeting.trip_types.includes(a)?p.targeting.trip_types.filter(e=>e!==a):[...p.targeting.trip_types,a];u({...p,targeting:{...p.targeting,trip_types:e}})},children:a},a))})]})]});case 4:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Start Date"}),e.jsxs(V,{children:[e.jsx(Z,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:h("w-full justify-start text-left font-normal mt-1",!p.start_date&&"text-muted-foreground"),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),p.start_date?W(new Date(p.start_date),"PPP"):"Select date"]})}),e.jsx(J,{className:"w-auto p-0",children:e.jsx(K,{mode:"single",selected:p.start_date?new Date(p.start_date):void 0,onSelect:e=>u({...p,start_date:null==e?void 0:e.toISOString()}),initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"End Date"}),e.jsxs(V,{children:[e.jsx(Z,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:h("w-full justify-start text-left font-normal mt-1",!p.end_date&&"text-muted-foreground"),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),p.end_date?W(new Date(p.end_date),"PPP"):"Select date"]})}),e.jsx(J,{className:"w-auto p-0",children:e.jsx(K,{mode:"single",selected:p.end_date?new Date(p.end_date):void 0,onSelect:e=>u({...p,end_date:null==e?void 0:e.toISOString()}),initialFocus:!0})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Launch Campaign Immediately"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set campaign status to active"})]}),e.jsx(R,{checked:"active"===p.status,onCheckedChange:e=>u({...p,status:e?"active":"draft"})})]})]});case 5:return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Review Your Campaign"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Preview (as it will appear to users):"}),e.jsx(Te,{campaign:p,className:"max-w-sm mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Images"}),e.jsxs("p",{className:"font-medium",children:[p.images.length," images"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx(F,{className:"active"===p.status?"bg-green-500":"bg-gray-500",children:p.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Targeting"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.targeting.interests.map(a=>e.jsx(F,{variant:"outline",children:a.replace("_"," ")},a)),p.targeting.trip_types.map(a=>e.jsx(F,{variant:"outline",children:a},a))]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:"active"===p.status?"✅ Your campaign will go live immediately after creation":"📝 Your campaign will be saved as a draft"})})]});default:return null}})()}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(r,{variant:"outline",onClick:()=>l(n-1),disabled:1===n,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Previous"]}),n<5?e.jsxs(r,{onClick:()=>l(n+1),disabled:!y(),children:["Next",e.jsx(ee,{className:"h-4 w-4 ml-2"})]}):e.jsx(r,{onClick:async()=>{try{d(!0);const e=await Se.createCampaign(p);e&&(i({title:"Campaign Created!",description:`"${e.name}" has been created successfully`}),t())}catch(e){i({title:"Error",description:"Failed to create campaign. Please try again.",variant:"destructive"})}finally{d(!1)}},disabled:c||!y(),children:c?"Creating...":"Create Campaign"})]})]})})},Me=({campaigns:a})=>{const[t,r]=s.useState("all"),[d,o]=s.useState("7d"),[m,g]=s.useState(null),x=a.filter(e=>"active"===e.status),h=a.reduce((e,a)=>e+a.impressions,0),p=a.reduce((e,a)=>e+a.clicks,0),u=a.reduce((e,a)=>e+a.conversions,0),f=h>0?p/h*100:0;s.useEffect(()=>{"all"!==t&&b(t)},[t]);const b=async e=>{const a=await Se.getCampaignStats(e);g(a)},w=[{date:"Mon",impressions:1200,clicks:45,conversions:3},{date:"Tue",impressions:1800,clicks:72,conversions:5},{date:"Wed",impressions:2400,clicks:98,conversions:8},{date:"Thu",impressions:2100,clicks:85,conversions:6},{date:"Fri",impressions:3200,clicks:142,conversions:12},{date:"Sat",impressions:3800,clicks:178,conversions:15},{date:"Sun",impressions:3500,clicks:165,conversions:14}],_=[...a].sort((e,a)=>a.clicks-e.clicks).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Campaign Analytics"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(te,{value:t,onValueChange:r,children:[e.jsx(re,{className:"w-[200px]",children:e.jsx(ie,{placeholder:"Select campaign"})}),e.jsxs(ne,{children:[e.jsx(le,{value:"all",children:"All Campaigns"}),a.map(a=>e.jsx(le,{value:a.id,children:a.name},a.id))]})]}),e.jsxs(te,{value:d,onValueChange:o,children:[e.jsx(re,{className:"w-[150px]",children:e.jsx(ie,{placeholder:"Time range"})}),e.jsxs(ne,{children:[e.jsx(le,{value:"7d",children:"Last 7 days"}),e.jsx(le,{value:"30d",children:"Last 30 days"}),e.jsx(le,{value:"90d",children:"Last 90 days"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium text-white",children:"Total Impressions"}),e.jsx(T,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:h.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(G,{className:"h-3 w-3 inline text-green-500"})," +15.3% from last week"]})]})]}),e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium text-white",children:"Total Clicks"}),e.jsx(be,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:p.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(G,{className:"h-3 w-3 inline text-green-500"})," +8.2% from last week"]})]})]}),e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium text-white",children:"Overall CTR"}),e.jsx(Ce,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[f.toFixed(2),"%"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(Y,{className:"h-3 w-3 inline text-red-500"})," -0.8% from last week"]})]})]}),e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium text-white",children:"Conversions"}),e.jsx(O,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:u.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(G,{className:"h-3 w-3 inline text-green-500"})," +5% from last week"]})]})]})]}),e.jsxs(i,{defaultValue:"performance",className:"space-y-4",children:[e.jsxs(n,{className:"bg-gray-800 border-gray-700",children:[e.jsx(l,{value:"performance",className:"data-[state=active]:bg-red-600",children:"Performance"}),e.jsx(l,{value:"engagement",className:"data-[state=active]:bg-red-600",children:"Engagement"}),e.jsx(l,{value:"campaigns",className:"data-[state=active]:bg-red-600",children:"Top Campaigns"})]}),e.jsx(c,{value:"performance",className:"space-y-4",children:e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsx(v,{children:e.jsx(y,{className:"text-white",children:"Performance Trends"})}),e.jsx(N,{children:e.jsx(ce,{width:"100%",height:300,children:e.jsxs(de,{data:w,children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(me,{dataKey:"date"}),e.jsx(ge,{}),e.jsx(xe,{}),e.jsx(he,{}),e.jsx(pe,{type:"monotone",dataKey:"impressions",stroke:"#8b5cf6",name:"Impressions"}),e.jsx(pe,{type:"monotone",dataKey:"clicks",stroke:"#3b82f6",name:"Clicks"})]})})})]})}),e.jsx(c,{value:"engagement",className:"space-y-4",children:e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsx(v,{children:e.jsx(y,{className:"text-white",children:"Engagement Metrics"})}),e.jsx(N,{children:e.jsx(ce,{width:"100%",height:300,children:e.jsxs(ue,{data:w,children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(me,{dataKey:"date"}),e.jsx(ge,{}),e.jsx(xe,{}),e.jsx(he,{}),e.jsx(je,{dataKey:"conversions",fill:"#10b981",name:"Conversions"})]})})})]})}),e.jsx(c,{value:"campaigns",className:"space-y-4",children:e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsx(v,{children:e.jsx(y,{className:"text-white",children:"Top Performing Campaigns"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:_.map((a,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-lg font-semibold text-gray-400",children:["#",s+1]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[a.impressions.toLocaleString()," impressions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-white",children:[a.clicks," clicks"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[a.impressions>0?(a.clicks/a.impressions*100).toFixed(2):"0.00","% CTR"]})]})]},a.id))})})]})})]}),e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsx(v,{children:e.jsx(y,{className:"text-white",children:"Active Campaigns Summary"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsx(B,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:x.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Active Campaigns"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsx(H,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Campaigns"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsx(G,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[p>0?(u/p*100).toFixed(1):"0.0","%"]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Conversion Rate"})]})]})})]})]})};var Ue="horizontal",Le=["horizontal","vertical"],Re=s.forwardRef((s,t)=>{const{decorative:r,orientation:i=Ue,...n}=s,l=function(e){return Le.includes(e)}(i)?i:Ue,c=r?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"};return e.jsx(a.div,{"data-orientation":l,...c,...n,ref:t})});Re.displayName="Separator";var ze=Re;const Ee=s.forwardRef(({className:a,orientation:s="horizontal",decorative:t=!0,...r},i)=>e.jsx(ze,{ref:i,decorative:t,orientation:s,className:h("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...r}));Ee.displayName=ze.displayName;const $e=({advertiser:a,onUpdate:t})=>{const{toast:i}=g(),[n,l]=s.useState(!1),[c,d]=s.useState(!1),[m,x]=s.useState({company_name:a.company_name,company_email:a.company_email,website:a.website||""});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsxs(v,{children:[e.jsx(y,{className:"text-white",children:"Account Status"}),e.jsx(f,{className:"text-gray-400",children:"Your current advertiser account status and details"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Account Status"})]}),(a=>{switch(a){case"active":return e.jsxs(F,{className:"bg-green-500",children:[e.jsx(fe,{className:"h-3 w-3 mr-1"})," Active"]});case"suspended":return e.jsxs(F,{className:"bg-red-500",children:[e.jsx(z,{className:"h-3 w-3 mr-1"})," Suspended"]});case"pending":return e.jsxs(F,{className:"bg-yellow-500",children:[e.jsx(z,{className:"h-3 w-3 mr-1"})," Pending"]});default:return e.jsx(F,{children:a})}})(a.status)]}),e.jsx(Ee,{className:"bg-gray-700"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Account ID"}),e.jsx("p",{className:"font-mono text-xs text-white",children:a.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Member Since"}),e.jsx("p",{className:"text-white",children:new Date(a.created_at).toLocaleDateString()})]})]})]})]}),e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-white",children:"Company Information"}),e.jsx(f,{className:"text-gray-400",children:"Manage your company details and contact information"})]}),!n&&e.jsx(r,{variant:"outline",size:"sm",onClick:()=>l(!0),className:"border-gray-600 text-gray-300 hover:bg-white/10",children:"Edit"})]})}),e.jsx(N,{className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"company_name",children:"Company Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(b,{id:"company_name",value:m.company_name,onChange:e=>x({...m,company_name:e.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"company_email",children:"Company Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(b,{id:"company_email",type:"email",value:m.company_email,onChange:e=>x({...m,company_email:e.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"website",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(b,{id:"website",type:"url",value:m.website,onChange:e=>x({...m,website:e.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:async()=>{try{d(!0);const{data:e,error:s}=await o.from("advertisers").update(m).eq("id",a.id).select().single();if(s)throw s;t(e),l(!1),i({title:"Settings Updated",description:"Your advertiser profile has been updated successfully"})}catch(e){i({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"})}finally{d(!1)}},disabled:c,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),c?"Saving...":"Save Changes"]}),e.jsx(r,{variant:"outline",onClick:()=>{l(!1),x({company_name:a.company_name,company_email:a.company_email,website:a.website||""})},className:"border-gray-600 text-gray-300 hover:bg-white/10",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Company Name"}),e.jsx("p",{className:"font-medium text-white",children:a.company_name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Company Email"}),e.jsx("p",{className:"font-medium text-white",children:a.company_email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Website"}),e.jsx("p",{className:"font-medium text-white",children:a.website?e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-red-400 hover:underline",children:a.website}):e.jsx("span",{className:"text-gray-500",children:"Not provided"})})]})]})]})})]}),e.jsxs(j,{className:"bg-white/5 border-gray-700",children:[e.jsxs(v,{children:[e.jsx(y,{className:"text-white",children:"API Access"}),e.jsx(f,{className:"text-gray-400",children:"Programmatic access for campaign management (Coming Soon)"})]}),e.jsx(N,{children:e.jsx("div",{className:"p-4 bg-gray-800/50 border border-gray-700 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"API access will be available in a future update"})})})]})]})},Be=()=>{const a=t(),{user:d,signOut:o}=p(),g=m(e=>e.isDemoMode),[x,h]=s.useState(null),[j,v]=s.useState([]),[y,f]=s.useState(!0),[N,b]=s.useState(!1),[w,_]=s.useState("campaigns"),C={id:"demo-advertiser-1",user_id:"demo-user-1",company_name:"Paradise Resorts International",company_email:"marketing@paradiseresorts.com",website:"https://www.paradiseresorts.com",status:"active",created_at:new Date("2024-01-15").toISOString(),updated_at:(new Date).toISOString()},S=[{id:"demo-campaign-uber",advertiser_id:"demo-advertiser-1",name:"Uber - Premium Airport Rides",description:"Flat $10 off airport rides for Chravel users. Choose from Uber Comfort or Uber Black for luxury travel.",discount_details:"$10 off airport rides",images:[{url:"https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800",alt:"Airport terminal",order:0},{url:"https://images.unsplash.com/photo-1464037866556-6812c9d1c72e?w=800",alt:"Luxury car interior",order:1},{url:"https://images.unsplash.com/photo-1606768666853-403c90a981ad?w=800",alt:"City skyline",order:2}],destination_info:{location:"Miami, FL"},tags:["rideshare","airport-transfer","premium-service","city-travel"],status:"active",impressions:15234,clicks:1203,conversions:89,start_date:new Date("2024-01-01").toISOString(),end_date:new Date("2024-12-31").toISOString(),created_at:new Date("2024-01-01").toISOString(),updated_at:new Date("2024-01-01").toISOString(),targeting:{id:"demo-targeting-uber",campaign_id:"demo-campaign-uber",age_min:21,age_max:65,genders:["all"],interests:["business-travel","airport-transportation","premium-services"],locations:["United States","Canada"],trip_types:["business","leisure","group"],created_at:new Date("2024-01-01").toISOString(),updated_at:new Date("2024-01-01").toISOString()}},{id:"demo-campaign-lyft",advertiser_id:"demo-advertiser-1",name:"Lyft - Reliable City Rides",description:"Safe, friendly rides when you need them. New user discount for Chravel members available citywide.",discount_details:"New user discount for Chravel",images:[{url:"https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800",alt:"City street view",order:0},{url:"https://images.unsplash.com/photo-1502489597346-dad15683d4c2?w=800",alt:"Happy passenger",order:1}],destination_info:{location:"Major Cities Nationwide"},tags:["rideshare","city-travel","new-user-offer","budget-friendly"],status:"active",impressions:12876,clicks:945,conversions:67,start_date:new Date("2024-02-01").toISOString(),end_date:new Date("2024-11-30").toISOString(),created_at:new Date("2024-02-01").toISOString(),updated_at:new Date("2024-02-01").toISOString(),targeting:{id:"demo-targeting-lyft",campaign_id:"demo-campaign-lyft",age_min:18,age_max:55,genders:["all"],interests:["city-exploration","nightlife","dining"],locations:["United States","Canada"],trip_types:["leisure","group","solo"],created_at:new Date("2024-02-01").toISOString(),updated_at:new Date("2024-02-01").toISOString()}},{id:"demo-campaign-hotels",advertiser_id:"demo-advertiser-1",name:"Hotels.com - Compare & Save",description:"Compare hotel prices and earn rewards. Get one night free for every 10 nights booked.",discount_details:"Collect 10 nights, get 1 free",images:[{url:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800",alt:"Luxury hotel exterior",order:0},{url:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=800",alt:"Hotel pool view",order:1},{url:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=800",alt:"Comfortable hotel room",order:2}],destination_info:{location:"Global Hotel Network"},tags:["lodging","price-comparison","rewards-program","travel-booking"],status:"active",impressions:18765,clicks:1456,conversions:134,start_date:new Date("2024-01-15").toISOString(),end_date:new Date("2024-12-31").toISOString(),created_at:new Date("2024-01-15").toISOString(),updated_at:new Date("2024-01-15").toISOString(),targeting:{id:"demo-targeting-hotels",campaign_id:"demo-campaign-hotels",age_min:25,age_max:65,genders:["all"],interests:["hotels","accommodations","travel-planning"],locations:["United States","Canada","United Kingdom","Australia"],trip_types:["leisure","business","family","romantic"],created_at:new Date("2024-01-15").toISOString(),updated_at:new Date("2024-01-15").toISOString()}}];s.useEffect(()=>{g?(h(C),v(S),f(!1)):k()},[g]);const k=async()=>{try{f(!0);const e=await Se.getAdvertiserProfile();if(h(e),e){const e=await Se.getCampaigns();v(e)}}catch(e){}finally{f(!1)}},D=async e=>{h(e),await k()};if(y)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})});if(!g&&!x)return e.jsx(ke,{onComplete:D});const I=g?x||C:x,P=g?j.length>0?j:S:j;return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[g&&e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 text-white py-2 px-4 text-center",children:e.jsx("p",{className:"text-sm font-medium",children:"🎭 Demo Mode Active - This is a preview of the Chravel Advertiser Hub"})}),e.jsx("header",{className:"bg-gradient-to-r from-gray-900 to-gray-800 border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Chravel Advertiser Hub"}),e.jsx("span",{className:"text-sm text-gray-400",children:(null==I?void 0:I.company_name)||"Loading..."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>a("/"),className:"border-gray-600 text-gray-300 hover:bg-white/10",children:"Back to Chravel"}),!g&&e.jsxs(r,{variant:"ghost",size:"sm",onClick:async()=>{await o(),a("/")},className:"text-gray-300 hover:bg-white/10",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(i,{value:w,onValueChange:_,children:[e.jsxs(n,{className:"mb-8 bg-gray-800 border-gray-700",children:[e.jsxs(l,{value:"campaigns",className:"flex items-center gap-2 data-[state=active]:bg-red-600",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Campaigns"]}),e.jsxs(l,{value:"analytics",className:"flex items-center gap-2 data-[state=active]:bg-red-600",children:[e.jsx(B,{className:"h-4 w-4"}),"Analytics"]}),e.jsxs(l,{value:"settings",className:"flex items-center gap-2 data-[state=active]:bg-red-600",children:[e.jsx(u,{className:"h-4 w-4"}),"Settings"]})]}),e.jsxs(c,{value:"campaigns",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Campaigns"}),e.jsxs(r,{onClick:()=>b(!0),className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]}),e.jsx(Pe,{campaigns:P,onRefresh:k})]}),e.jsx(c,{value:"analytics",children:e.jsx(Me,{campaigns:P})}),e.jsx(c,{value:"settings",children:e.jsx($e,{advertiser:I,onUpdate:h})})]})}),N&&e.jsx(Fe,{onClose:()=>b(!1),onSuccess:async()=>{b(!1),await k()}})]})};export{Be as AdvertiserDashboard,Be as default};
