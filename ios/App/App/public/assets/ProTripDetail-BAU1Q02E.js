import{c as C,u as X,k as S,o as F,j as e,S as H,r as p,H as Z,X as U,z as J,A as K,I as Q}from"./index-CAsyng-G.js";import{g as k,a as ee,P as se,d as te,G as re,e as ae,b as le,T as ie,c as ne}from"./TripDetailModals-DY4m2USS.js";import{A as oe}from"./arrow-left-DsyQ2ZDs.js";import{C as L}from"./crown-DXGOoHaJ.js";import{e as ce}from"./SeatManagementSection-BFc4Xk5u.js";import{M as de,D as B}from"./SettingsMenu-BOjv86PG.js";import{U as N}from"./users-DV9oPzUN.js";import{C as I}from"./calendar-B2WMmvpa.js";import{C as me,L as V,P as xe}from"./googleMapsService-BX6sUOcy.js";import{S as T,a as ue,b as he,c as pe,d as ge,e as D}from"./select-XMWUKs4c.js";import{T as be,P as fe,C as je,H as ye}from"./TripTabs-B7ZlRlhB.js";import{D as Ne,a as we,b as ve,c as Ce,L as Se}from"./dialog-Cx8-WJ72.js";import{B as R}from"./button-_Pv0MPf0.js";import{I as ke}from"./input-CkF3ltBX.js";import{B as Re}from"./badge-J4HoHOpX.js";import{U as Te}from"./user-D5s9iwuG.js";import{S as q}from"./useSavedRecommendations-POBY9hWZ.js";import{C as O}from"./camera-CpfyDuxc.js";import{B as Pe}from"./building-Br_mTkeH.js";import{u as Me}from"./useDemoMode-BjEsodyt.js";import{p as z}from"./eventsMockData-BosocEr8.js";import{P as A}from"./ProTripNotFound-DSO3vkYd.js";import"./avatarUtils-ZvhZyhoo.js";import"./demoModeService-C5DiNBaU.js";import"./map-pin-BpJQ3jXK.js";import"./plus-CmGY8coD.js";import"./clock-z7hIZNmF.js";import"./dropdown-menu-DesE2wBT.js";import"./chevron-right-ubVvME2N.js";import"./card-BWfXNMJp.js";import"./share-2-bKBjjyB8.js";import"./calendar-BbT1q-ev.js";import"./chevron-left-DBJ6HR3b.js";import"./avatar-BV3tYu8d.js";import"./circle-check-big-DmirYwTN.js";import"./filter-CGCfNQCb.js";import"./ellipsis-vertical-CzHInxXT.js";import"./sparkles-C9bYoM-0.js";import"./pro-DyZQNKrs.js";import"./loader-circle-CkOmKk2l.js";import"./archive-D_5MXjjN.js";import"./tabs-Ba-WFkQA.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=C("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=C("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=C("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=C("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=C("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=C("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Ie=({tripContext:a,showInbox:r,onToggleInbox:s,onShowInvite:c,onShowTripSettings:l,onShowAuth:i})=>{const x=X(),{user:d}=S(),{accentColors:m}=F();return e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("button",{onClick:()=>x("/"),className:"flex items-center gap-3 text-gray-300 hover:text-white transition-colors group",children:[e.jsx("div",{className:"bg-gray-800 p-2 rounded-lg shadow-lg group-hover:shadow-yellow-500/20 transition-all border border-gray-700 hover:border-yellow-500/50",children:e.jsx(oe,{size:20})}),e.jsx("span",{className:"font-medium",children:"Back to Trips"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`bg-gradient-to-r ${m.gradient} backdrop-blur-sm border border-yellow-500/30 rounded-xl px-4 py-2 flex items-center gap-2`,children:[e.jsx(L,{size:16,className:"text-white"}),e.jsx("span",{className:"text-white font-medium",children:"PRO"})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:c,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl transition-colors flex items-center gap-2",children:[e.jsx(ce,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Invite"})]}),e.jsxs("button",{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl transition-colors flex items-center gap-2",children:[e.jsx(de,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:r?"Hide Inbox":"Messages"})]}),e.jsx("button",{onClick:l,className:"bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-xl transition-colors",children:e.jsx(H,{size:20})})]})]})]})},Le=({isOpen:a,onClose:r,roomAssignments:s,roster:c,onUpdateAssignments:l})=>{const[i,x]=p.useState(s);if(!a)return null;const d=()=>{l(i),r()},m=n=>{const u=c.find(g=>g.id===n);return(u==null?void 0:u.name)||"Unknown"},h=n=>{switch(n){case"suite":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"single":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"double":return"bg-green-500/20 text-green-400 border-green-500/30";case"connecting":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"text-red-400",size:24}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Room Assignments"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(U,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(n=>e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:n.room}),e.jsx("p",{className:"text-gray-400 text-sm",children:n.hotel})]}),e.jsx("div",{className:`px-2 py-1 rounded-lg border text-xs font-medium ${h(n.roomType)}`,children:n.roomType})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(N,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["Occupants (",n.occupants.length,")"]})]}),e.jsx("div",{className:"space-y-1",children:n.occupants.map(u=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsx("span",{className:"text-white",children:m(u)})]},u))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(I,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-xs",children:"Check-in"})]}),e.jsx("p",{className:"text-white text-sm",children:new Date(n.checkIn).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(I,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-xs",children:"Check-out"})]}),e.jsx("p",{className:"text-white text-sm",children:new Date(n.checkOut).toLocaleDateString()})]})]}),n.specialRequests&&n.specialRequests.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Special Requests:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:n.specialRequests.map((u,g)=>e.jsx("span",{className:"bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded text-xs",children:u},g))})]})]})]},n.id))})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-700",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:d,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Save Changes"})]})]})})},P=[{id:"chat",label:"Chat",icon:null},{id:"calendar",label:"Calendar",icon:I},{id:"tasks",label:"Tasks",icon:ee},{id:"polls",label:"Polls",icon:me},{id:"places",label:"Places",icon:null},{id:"team",label:"Team",icon:N,proOnly:!0,requiredPermissions:["read"]},{id:"finance",label:"Finance",icon:B,proOnly:!0,restrictedRoles:["talent","cast","student"],requiredPermissions:["finance"]},{id:"medical",label:"Medical",icon:T,proOnly:!0,requiredPermissions:["medical","admin"]},{id:"compliance",label:"Compliance",icon:G,proOnly:!0,restrictedRoles:["talent","cast","student"],requiredPermissions:["compliance","admin"]},{id:"sponsors",label:"Sponsors",icon:_,proOnly:!0,requiredPermissions:["admin"]},{id:"ai-chat",label:"Concierge",icon:null}],De=(a,r,s)=>{let c=P;if(s){const l=k(s);if(!l)return console.error(`Invalid ProTripCategory: "${s}". Showing all tabs.`),P;c=P.filter(i=>!i.proOnly||l.availableTabs.includes(i.id)||["chat","places","ai-chat"].includes(i.id))}return c.filter(l=>!(l.restrictedRoles&&l.restrictedRoles.includes(a.toLowerCase())||l.requiredPermissions&&l.requiredPermissions.length>0&&!l.requiredPermissions.some(x=>r.includes(x))))},W=(a,r,s)=>!!((a==="finance"||a==="compliance")&&["talent","cast","student","artist"].includes(r.toLowerCase())||!s.includes("write")&&!s.includes("admin")),qe=(a,r,s)=>{const c=P.find(l=>l.id===a);return!c||c.restrictedRoles&&c.restrictedRoles.includes(r.toLowerCase())?!1:c.requiredPermissions&&c.requiredPermissions.length>0?c.requiredPermissions.some(l=>s.includes(l)):!0},Oe=({tabs:a,activeTab:r,onTabChange:s,category:c})=>{const{accentColors:l}=F(),{user:i}=S(),x=(i==null?void 0:i.proRole)||"staff",d=(i==null?void 0:i.permissions)||["read"];return e.jsx("div",{className:"flex overflow-x-auto whitespace-nowrap scroll-smooth gap-2 mb-8 pb-2 -mx-2 px-2 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 justify-center",children:a.map(m=>{const h=m.icon,n=W(m.id,x,d),u=m.id==="team"&&c==="Content"?"Cast & Crew":m.label;return e.jsxs("button",{onClick:()=>s(m.id),className:`flex-shrink-0 min-w-max px-4 py-3 rounded-lg font-medium transition-all duration-200 text-sm flex items-center gap-2 ${r===m.id?`bg-gradient-to-r ${l.gradient} text-white shadow-md`:"bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white"} ${n?"opacity-75":""}`,children:[h&&e.jsx(h,{size:16}),u,m.proOnly&&e.jsx(L,{size:14,className:`text-${l.primary}`}),n&&e.jsx(V,{size:12,className:"text-gray-400"})]},m.id)})})},$e=(a,r)=>{const s=k(a),c=[];return s.roles.forEach(i=>{c.push({value:i,label:i,isCustom:!1})}),r.filter(i=>!s.roles.includes(i)).forEach(i=>{c.push({value:i,label:i,isCustom:!0})}),c},Ee=a=>{const r=a.map(s=>s.role).filter(Boolean);return[...new Set(r)].sort()},Fe=(a,r)=>k(r).roles.includes(a)?"bg-red-600/20 text-red-400":"bg-blue-600/20 text-blue-400",He=({isOpen:a,onClose:r,member:s,category:c,existingRoles:l,onUpdateRole:i})=>{const[x,d]=p.useState(""),[m,h]=p.useState(!1),[n,u]=p.useState(!1),[g,f]=p.useState(""),b=k(c);$e(c,l),p.useEffect(()=>{s&&a&&(d(s.role),h(!b.roles.includes(s.role)),f(""))},[s,a,b.roles]);const w=async()=>{if(!s||!x.trim()){f("Role is required");return}u(!0),f("");try{await i(s.id,x.trim()),r()}catch{f("Failed to update role. Please try again.")}finally{u(!1)}},j=()=>{d((s==null?void 0:s.role)||""),h(!1),f(""),r()};return s?e.jsx(Ne,{open:a,onOpenChange:r,children:e.jsxs(we,{className:"bg-gray-900 border-gray-700 text-white max-w-md",children:[e.jsx(ve,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Te,{size:20}),"Edit Team Member Role"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",alt:s.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.email}),e.jsxs(Re,{className:"mt-1 bg-red-600/20 text-red-400",children:["Current: ",s.role]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Se,{htmlFor:"role-type",className:"text-sm font-medium",children:"Role Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:m?"outline":"default",size:"sm",onClick:()=>{h(!1),d(b.roles[0]||"")},disabled:b.roles.length===0,className:"flex-1",children:"Predefined"}),e.jsx(R,{type:"button",variant:m?"default":"outline",size:"sm",onClick:()=>{h(!0),d("")},className:"flex-1",children:"Custom"})]}),!m&&b.roles.length>0?e.jsxs(ue,{value:x,onValueChange:d,children:[e.jsx(he,{className:"bg-gray-800 border-gray-600",children:e.jsx(pe,{placeholder:"Select a role"})}),e.jsxs(ge,{className:"bg-gray-800 border-gray-600",children:[b.roles.map(t=>e.jsx(D,{value:t,className:"text-white hover:bg-gray-700",children:t},t)),l.filter(t=>!b.roles.includes(t)).map(t=>e.jsxs(D,{value:t,className:"text-white hover:bg-gray-700",children:[t," ",e.jsx("span",{className:"text-xs text-gray-400",children:"(Custom)"})]},t))]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{value:x,onChange:t=>d(t.target.value),placeholder:"Enter custom role (e.g., Production Manager, Lead Vocalist)",className:"bg-gray-800 border-gray-600 text-white"}),l.length>0&&e.jsxs("div",{className:"text-xs text-gray-400",children:[e.jsx("p",{className:"mb-1",children:"Existing roles:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.slice(0,5).map(t=>e.jsx("button",{type:"button",onClick:()=>d(t),className:"bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-xs transition-colors",children:t},t)),l.length>5&&e.jsxs("span",{className:"text-gray-500",children:["+",l.length-5," more"]})]})]})]})]}),g&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3",children:e.jsx("p",{className:"text-red-400 text-sm",children:g})}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(R,{onClick:j,variant:"outline",className:"flex-1",disabled:n,children:[e.jsx(U,{size:16,className:"mr-1"}),"Cancel"]}),e.jsx(R,{onClick:w,disabled:n||!x.trim()||x===s.role,className:"flex-1 bg-red-600 hover:bg-red-700",children:n?e.jsx(e.Fragment,{children:"Saving..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{size:16,className:"mr-1"}),"Save Role"]})})]})]})]})}):null},Ue=({roster:a,userRole:r,isReadOnly:s=!1,category:c,onUpdateMemberRole:l})=>{const[i,x]=p.useState("all"),[d,m]=p.useState(!1),[h,n]=p.useState(null),{terminology:{teamLabel:u},roles:g}=k(c),f=g.length>0?["all",...g]:["all"],b=Ee(a),w=i==="all"?a:a.filter(o=>o.role===i),j=o=>{s||!l||n(o)},t=async(o,y)=>{l&&await l(o,y)},v=o=>{switch(o){case"AllAccess":return"bg-green-500";case"Backstage":return"bg-yellow-500";case"Guest":return"bg-blue-500";case"Restricted":return"bg-red-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"space-y-6",children:[s&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:"Read-only access for your role"})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"text-red-400",size:24}),e.jsx("h2",{className:"text-xl font-bold text-white",children:u})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-gray-400",children:[a.length," total members"]}),e.jsxs("button",{onClick:()=>m(!d),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(T,{size:16}),d?"Hide Credentials":"Show Credentials"]})]})]}),g.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(o=>e.jsxs("button",{onClick:()=>x(o),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${i===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[o==="all"?"All Roles":o,o!=="all"&&e.jsxs("span",{className:"ml-1 text-xs",children:["(",a.filter(y=>y.role===o).length,")"]})]},o))}),g.length===0&&e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:e.jsx("p",{className:"text-blue-400 text-sm",children:"Team members can have custom titles entered manually"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:w.map(o=>e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:o.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",alt:o.name,className:"w-12 h-12 rounded-full border-2 border-gray-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-medium truncate",children:o.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:o.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`${Fe(o.role,c)} px-2 py-1 rounded text-xs font-medium`,children:o.role}),d&&e.jsx("span",{className:`${v(o.credentialLevel)} text-white px-2 py-1 rounded text-xs font-medium`,children:o.credentialLevel})]})]}),r==="admin"&&!s&&l&&e.jsx("button",{onClick:()=>j(o),className:"text-gray-400 hover:text-white transition-colors p-1 rounded hover:bg-white/10",title:"Edit member role",children:e.jsx(H,{size:16})})]}),o.medicalNotes&&e.jsx("div",{className:"mt-3 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:14,className:"text-yellow-400"}),e.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"Medical Alert"})]})}),o.dietaryRestrictions&&o.dietaryRestrictions.length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-gray-400 text-xs",children:["Dietary: ",o.dietaryRestrictions.join(", ")]})}),d&&o.permissions.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:o.permissions.map((y,M)=>e.jsx("span",{className:"bg-gray-700 text-gray-300 px-2 py-1 rounded text-xs",children:y},M))})]})]},o.id))}),w.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No team members found for the selected role."})]}),e.jsx(He,{isOpen:!!h,onClose:()=>n(null),member:h,category:c,existingRoles:b,onUpdateRole:t})]})},Be=({activeTab:a,tripId:r,basecamp:s,tripData:c,category:l,onUpdateRoomAssignments:i,onUpdateMemberRole:x})=>{const{user:d}=S(),m=(d==null?void 0:d.proRole)||"staff",h=(d==null?void 0:d.permissions)||["read"];if(!qe(a,m,h))return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-red-500/10 backdrop-blur-sm border border-red-500/20 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-red-400 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-300",children:"You don't have permission to access this section."}),e.jsxs("p",{className:"text-red-300/80 text-sm mt-2",children:["Current role: ",m]})]})});const n=W(a,m,h),u=()=>{switch(a){case"chat":return e.jsx(ae,{enableGroupChat:!0,showBroadcasts:!0});case"calendar":return e.jsx(re,{});case"tasks":return e.jsx(te,{tripId:r});case"polls":return e.jsx(je,{});case"places":return e.jsx(fe,{});case"team":return e.jsx(Ue,{roster:c.roster||[],userRole:m,isReadOnly:n,category:l,onUpdateMemberRole:x});case"finance":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Financial Management"}),n&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:"Read-only access for your role"})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{size:48,className:"text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Per-diem & Settlement"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Per-diem automation and settlement tracking coming soon"})]})]})});case"medical":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Medical & Wellness"}),n&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:"Read-only access for your role"})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{size:48,className:"text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Health Monitoring"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Injury status tracking and compliance monitoring coming soon"})]})]})});case"compliance":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Compliance Management"}),n&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:"Read-only access for your role"})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{size:48,className:"text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Regulatory Compliance"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Visa, union, and safety compliance tracking coming soon"})]})]})});case"sponsors":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Sponsor Management"}),n&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:"Read-only access for your role"})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_,{size:48,className:"text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Partnership Tracking"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Activation checklists and deliverable tracking coming soon"})]})]})});case"ai-chat":return e.jsx(se,{tripId:r,basecamp:s});default:return e.jsx(be,{activeTab:"chat",onTabChange:()=>{},tripId:r})}};return e.jsx(e.Fragment,{children:u()})},Ve=(a,r)=>{const s=a.toLowerCase();switch(r){case"Sports – Pro, Collegiate, Youth":return s.includes("player")?xe:s.includes("coach")?N:s.includes("medical")||s.includes("trainer")?ye:T;case"Tour – Music, Comedy, etc.":return s.includes("artist")?q:s.includes("manager")?N:s.includes("security")?V:s.includes("sound")||s.includes("production")?E:O;case"Business Travel":return s.includes("executive")?L:s.includes("manager")?N:Pe;case"School Trip":return s.includes("teacher")||s.includes("supervisor")?$:s.includes("student")?N:T;case"Content":return s.includes("cast")||s.includes("talent")?q:s.includes("producer")||s.includes("director")?O:E;case"Other":return s.includes("founder")?ze:s.includes("mentor")?$:N;default:return N}},_e=(a,r)=>{const s=a.toLowerCase();switch(r){case"Sports – Pro, Collegiate, Youth":return s.includes("player")?"bg-green-500":s.includes("coach")?"bg-blue-500":s.includes("medical")?"bg-pink-500":"bg-gray-500";case"Tour – Music, Comedy, etc.":return s.includes("artist")?"bg-yellow-500":s.includes("manager")?"bg-blue-500":s.includes("security")?"bg-purple-500":"bg-gray-500";case"Business Travel":return s.includes("executive")?"bg-red-500":"bg-blue-500";case"School Trip":return s.includes("teacher")?"bg-blue-500":s.includes("student")?"bg-green-500":"bg-gray-500";case"Content":return s.includes("cast")?"bg-yellow-500":s.includes("producer")?"bg-red-500":"bg-gray-500";case"Other":return s.includes("founder")?"bg-yellow-500":s.includes("mentor")?"bg-blue-500":"bg-gray-500";default:return"bg-gray-500"}},Ge=({category:a})=>{const{user:r,switchRole:s}=S(),c=k(a);return p.useEffect(()=>{if(!(r!=null&&r.isPro)||!r.proRole)return;const l=c.roles.map(i=>i.toLowerCase());l.includes(r.proRole)||s(l[0])},[a]),r!=null&&r.isPro?e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700 rounded-xl p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-2",children:["Roles - ",c.name]}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Current role: ",e.jsx("span",{className:"text-white font-medium",children:r.proRole})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.roles.map(l=>{const i=Ve(l,a),x=_e(l,a);return e.jsxs(R,{onClick:()=>s(l.toLowerCase()),variant:r.proRole===l.toLowerCase()?"default":"outline",size:"sm",className:`flex items-center gap-2 ${r.proRole===l.toLowerCase()?`${x} text-white`:"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[e.jsx(i,{size:14}),l]},l)})})]}):null},We=({activeTab:a,onTabChange:r,onShowTripsPlusModal:s,tripId:c,basecamp:l,tripData:i,selectedCategory:x,onUpdateTripData:d})=>{const[m,h]=p.useState(!1),{user:n}=S(),u=(n==null?void 0:n.proRole)||"staff",g=(n==null?void 0:n.permissions)||["read"],f=De(u,g,x),b=j=>{console.log("Updated room assignments:",j)},w=async(j,t)=>{var v;try{const o=((v=i.roster)==null?void 0:v.map(y=>y.id===j?{...y,role:t}:y))||[];d&&d({roster:o}),console.log(`Updated member ${j} role to: ${t}`)}catch(o){throw console.error("Failed to update member role:",o),o}};return e.jsxs(e.Fragment,{children:[e.jsx(Ge,{category:x}),e.jsx(Oe,{tabs:f,activeTab:a,onTabChange:r,category:x}),e.jsx(Be,{activeTab:a,tripId:c,basecamp:l,tripData:i,category:x,onUpdateRoomAssignments:b,onUpdateMemberRole:w}),e.jsx(Le,{isOpen:m,onClose:()=>h(!1),roomAssignments:i.roomAssignments||[],roster:i.roster||[],onUpdateAssignments:b})]})},qs=()=>{const{proTripId:a}=K(),{user:r}=S(),{isDemoMode:s}=Me(),[c,l]=p.useState("chat"),[i,x]=p.useState(!1),[d,m]=p.useState(!1),[h,n]=p.useState(!1),[u,g]=p.useState(!1),[f,b]=p.useState(!1),[w,j]=p.useState(!1);if(!s)return e.jsx(A,{message:"Demo Mode is disabled",details:"Turn on Demo Mode to view sample professional trips and explore all features."});if(!a)return e.jsx(A,{message:"No trip ID provided."});if(!(a in z))return e.jsx(A,{message:"The requested trip could not be found.",details:`Trip ID: ${a}`,availableIds:Object.keys(z)});const t=z[a];t.participants;const v={id:t.id,name:t.title,description:t.description||"",destination:t.location,start_date:t.dateRange.split(" - ")[0],end_date:t.dateRange.split(" - ")[1],created_by:"demo-user",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_archived:!1,trip_type:"pro"},o={name:t.basecamp_name||"",address:t.basecamp_address||""},y=t.broadcasts||[],M=t.links||[],Y={...v,basecamp:o,broadcasts:y,links:M,proTripCategory:t.proTripCategory,budget:t.budget,schedule:t.schedule,roster:t.roster,roomAssignments:t.roomAssignments,perDiem:t.perDiem,settlement:t.settlement,medical:t.medical,compliance:t.compliance,media:t.media,sponsors:t.sponsors};return e.jsx(Q,{variant:"pro",children:e.jsxs("div",{className:"min-h-screen bg-black text-white",children:[e.jsx(Ie,{tripContext:Y,showInbox:i,onToggleInbox:()=>x(!i),onShowInvite:()=>n(!0),onShowTripSettings:()=>b(!0),onShowAuth:()=>g(!0)}),i&&e.jsx(le,{}),e.jsx(ie,{trip:{id:parseInt(t.id)||0,title:t.title,location:t.location,dateRange:t.dateRange,description:t.description||"",participants:t.participants},category:t.proTripCategory,tags:t.tags,onCategoryChange:()=>{}}),e.jsx(We,{activeTab:c,onTabChange:l,onShowTripsPlusModal:()=>j(!0),tripId:a,basecamp:o,tripData:t,selectedCategory:t.proTripCategory}),e.jsx(ne,{showSettings:d,onCloseSettings:()=>m(!1),showInvite:h,onCloseInvite:()=>n(!1),showAuth:u,onCloseAuth:()=>g(!1),showTripSettings:f,onCloseTripSettings:()=>b(!1),showTripsPlusModal:w,onCloseTripsPlusModal:()=>j(!1),tripName:t.title,tripId:a,userId:r==null?void 0:r.id})]})})};export{qs as default};
