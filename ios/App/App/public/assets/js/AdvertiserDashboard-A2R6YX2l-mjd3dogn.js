import{j as e}from"./ui-vendor-BO3EQrMK-mjd3dogn.js";import{r as a,i as s}from"./react-vendor-D1R0t5S0-mjd3dogn.js";import{c as t,s as r,a8 as i,j as n,B as l,X as c,a as d,l as o,u as m}from"./index-Ta7FH5xW-mjd3dogn.js";import{T as g,a as x,b as h,c as p}from"./tabs-Dxuz3Y6S-mjd3dogn.js";import{C as u,b as j,c as v,d as y,a as f}from"./card-jeNxgMYk-mjd3dogn.js";import{I as N}from"./input-DsI2n-oJ-mjd3dogn.js";import{L as b}from"./label-D_iG0y88-mjd3dogn.js";import{M as w}from"./mail-BdBVrsyz-mjd3dogn.js";import{G as _,D as C,S,L as k}from"./switch-GKuTbu---mjd3dogn.js";import{B as D}from"./badge-DyE_ZUPM-mjd3dogn.js";import{D as I,a as P,b as T,c as M}from"./dialog-BcLamxvL-mjd3dogn.js";import{T as O,I as A}from"./textarea-BudkfAn8-mjd3dogn.js";import{U as F,a as U,S as L}from"./user-DFuJ2ZP3-mjd3dogn.js";import{c as E,d as R,P as $,a as q,b as z,C as B}from"./calendar-ylgcJK3b-mjd3dogn.js";import{C as Y}from"./calendar-C9K0fVga-mjd3dogn.js";import{E as H}from"./eye-BNDPAvT6-mjd3dogn.js";import{T as G}from"./trending-up-B0a-0y1l-mjd3dogn.js";import{a as K}from"./utils-DD44zzh--mjd3dogn.js";import{M as V}from"./map-pin-BtCU-LeS-mjd3dogn.js";import{C as W}from"./chevron-left-C1xtDQ_l-mjd3dogn.js";import{C as Z}from"./chevron-right-DKRZr0Ps-mjd3dogn.js";import{U as J}from"./users-B07yK8Y7-mjd3dogn.js";import{a as Q,S as X,b as ee,c as ae,d as se,e as te}from"./select-CMjqEsxb-mjd3dogn.js";import{T as re}from"./trending-down-MCtSAEQe-mjd3dogn.js";import{R as ie,L as ne,C as le,X as ce,Y as de,T as oe,a as me,b as ge,B as xe,c as he}from"./charts-CLK9EMgA-mjd3dogn.js";import{C as pe}from"./chart-column-DOJCLy2J-mjd3dogn.js";import{S as ue}from"./separator-R_tKikBH-mjd3dogn.js";import{S as je}from"./save-DwQheero-mjd3dogn.js";import{C as ve}from"./circle-alert-CX60mGhN-mjd3dogn.js";import{C as ye}from"./circle-check-big-Bvor9_sf-mjd3dogn.js";import{P as fe}from"./plus-Dhwa7sZY-mjd3dogn.js";import"./supabase-DyX-XggK-mjd3dogn.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=t("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),be=t("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),we=t("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),_e=t("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Ce=t("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */class Se{static async getAdvertiserProfile(){try{const{data:{user:e}}=await r.auth.getUser();if(!e)throw new Error("Not authenticated");const{data:a,error:s}=await r.from("advertisers").select("*").eq("user_id",e.id).single();if(s&&"PGRST116"!==s.code)throw s;return a}catch(e){return null}}static async createAdvertiserProfile(e){try{if(i.getState().isDemoMode)return{id:"demo-advertiser-"+Date.now(),user_id:"demo-user",company_name:e.company_name,company_email:e.company_email,website:e.website,status:"active",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};const{data:{user:a}}=await r.auth.getUser();if(!a)throw new Error("Not authenticated");const{data:s,error:t}=await r.from("advertisers").insert({user_id:a.id,...e}).select().single();if(t)throw t;return s}catch(a){throw a}}static async getCampaigns(){try{const e=await this.getAdvertiserProfile();if(!e)return[];const{data:a,error:s}=await r.from("campaigns").select("\n          *,\n          targeting:campaign_targeting(*)\n        ").eq("advertiser_id",e.id).order("created_at",{ascending:!1});if(s)throw s;return a||[]}catch(e){return[]}}static async getCampaign(e){try{const{data:a,error:s}=await r.from("campaigns").select("\n          *,\n          targeting:campaign_targeting(*)\n        ").eq("id",e).single();if(s)throw s;return a}catch(a){return null}}static async createCampaign(e){try{const a=await this.getAdvertiserProfile();if(!a)throw new Error("No advertiser profile found");const{data:s,error:t}=await r.from("campaigns").insert({advertiser_id:a.id,name:e.name,description:e.description,discount_details:e.discount_details,images:e.images,destination_info:e.destination_info,tags:e.tags,status:e.status,start_date:e.start_date,end_date:e.end_date}).select().single();if(t)throw t;if(s&&e.targeting){const{error:a}=await r.from("campaign_targeting").insert({campaign_id:s.id,...e.targeting});if(a)throw await r.from("campaigns").delete().eq("id",s.id),a}return s}catch(a){throw a}}static async updateCampaign(e,a){try{const{targeting:s,...t}=a,{data:i,error:n}=await r.from("campaigns").update(t).eq("id",e).select().single();if(n)throw n;if(s){const{error:a}=await r.from("campaign_targeting").upsert({campaign_id:e,...s});if(a)throw a}return i}catch(s){throw s}}static async deleteCampaign(e){try{const{error:a}=await r.from("campaigns").delete().eq("id",e);if(a)throw a;return!0}catch(a){return!1}}static async updateCampaignStatus(e,a){try{const{error:s}=await r.from("campaigns").update({status:a}).eq("id",e);if(s)throw s;return!0}catch(s){return!1}}static async getCampaignStats(e){try{const a=await this.getCampaign(e);if(!a)return null;return{impressions:a.impressions||0,clicks:a.clicks||0,conversions:a.conversions||0,ctr:a.impressions>0?a.clicks/a.impressions*100:0,conversionRate:a.clicks>0?a.conversions/a.clicks*100:0}}catch(a){return null}}static async trackEvent(e,a,s){try{const{data:{user:t}}=await r.auth.getUser();await r.from("campaign_analytics").insert({campaign_id:e,user_id:null==t?void 0:t.id,event_type:a,event_data:s}),await r.rpc("increment_campaign_stat",{p_campaign_id:e,p_stat_type:a})}catch(t){}}static async getActiveCampaigns(e){try{const a=r.from("campaigns").select("\n          *,\n          targeting:campaign_targeting(*)\n        ").eq("status","active").or(`start_date.is.null,start_date.lte.${(new Date).toISOString()}`).or(`end_date.is.null,end_date.gte.${(new Date).toISOString()}`),{data:s,error:t}=await a;if(t)throw t;let i=s||[];return e&&(i=i.filter(a=>{var s,t,r,i;const n=a.targeting;if(!n)return!0;if((null==(s=e.interests)?void 0:s.length)&&(null==(t=n.interests)?void 0:t.length)){if(!e.interests.some(e=>n.interests.includes(e)))return!1}return!(e.location&&(null==(r=n.locations)?void 0:r.length)&&!n.locations.includes(e.location))&&!(e.trip_type&&(null==(i=n.trip_types)?void 0:i.length)&&!n.trip_types.includes(e.trip_type))})),i}catch(a){return[]}}static async uploadCampaignImage(e){try{const a=e.name.split(".").pop(),s=`campaign-images/${`${crypto.randomUUID()}.${a}`}`,{error:t}=await r.storage.from("advertiser-assets").upload(s,e);if(t)throw t;const{data:i}=r.storage.from("advertiser-assets").getPublicUrl(s);return i.publicUrl}catch(a){return null}}}const ke=({onComplete:s})=>{const{toast:t}=n(),r=i(e=>e.isDemoMode),[c,d]=a.useState(!1),[o,m]=a.useState({company_name:r?"Demo Travel Company":"",company_email:r?"demo@travelcompany.com":"",website:r?"https://www.demotravelcompany.com":""});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs(u,{className:"w-full max-w-md",children:[e.jsxs(j,{className:"text-center",children:[e.jsx(v,{className:"text-2xl font-bold",children:"Welcome to Chravel Advertiser Hub"}),e.jsx(y,{children:r?"Demo Mode: Fill out the form below to see how the advertiser hub works":"Create your advertiser profile to start promoting your travel destinations"})]}),e.jsx(f,{children:e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o.company_name&&o.company_email)try{d(!0);const e=await Se.createAdvertiserProfile(o);e&&(t({title:"Welcome to Chravel Ads!",description:"Your advertiser account has been created successfully"}),s(e))}catch(a){t({title:"Error",description:"Failed to create advertiser profile. Please try again.",variant:"destructive"})}finally{d(!1)}else t({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"company_name",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{id:"company_name",type:"text",placeholder:"Your Company Name",value:o.company_name,onChange:e=>m({...o,company_name:e.target.value}),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"company_email",children:["Company Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{id:"company_email",type:"email",placeholder:"contact@company.com",value:o.company_email,onChange:e=>m({...o,company_email:e.target.value}),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"website",children:"Website (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{id:"website",type:"url",placeholder:"https://www.company.com",value:o.website,onChange:e=>m({...o,website:e.target.value}),className:"pl-10"})]})]}),e.jsx(l,{type:"submit",className:"w-full",disabled:c,children:c?"Creating Profile...":"Create Advertiser Profile"})]})})]})})},De={transportation:[{value:"rideshare",label:"Rideshare"},{value:"airport-transfer",label:"Airport Transfer"},{value:"premium-service",label:"Premium Service"},{value:"city-travel",label:"City Travel"},{value:"car-rental",label:"Car Rental"}],accommodation:[{value:"lodging",label:"Lodging"},{value:"price-comparison",label:"Price Comparison"},{value:"rewards-program",label:"Rewards Program"},{value:"budget-friendly",label:"Budget Friendly"},{value:"luxury-stays",label:"Luxury Stays"}],services:[{value:"travel-booking",label:"Travel Booking"},{value:"package-deals",label:"Package Deals"},{value:"multi-service",label:"Multi-Service"},{value:"business-travel",label:"Business Travel"},{value:"concierge",label:"Concierge"}],specialOffers:[{value:"new-user-offer",label:"New User Offer"},{value:"promotional",label:"Promotional"},{value:"discount",label:"Discount"},{value:"rewards",label:"Rewards"},{value:"limited-time",label:"Limited Time"}],travelType:[{value:"group-travel",label:"Group Travel"},{value:"solo-travel",label:"Solo Travel"},{value:"family-friendly",label:"Family Friendly"},{value:"corporate-travel",label:"Corporate Travel"},{value:"adventure",label:"Adventure"}]},Ie=({campaign:s,onClose:t,onSuccess:r})=>{const{toast:i}=n(),[o,m]=a.useState(!1),[g,x]=a.useState(!1),[h,p]=a.useState({name:s.name,description:s.description||"",discount_details:s.discount_details,images:s.images,destination_info:s.destination_info,tags:s.tags,status:"draft"===s.status?"draft":"active",start_date:s.start_date,end_date:s.end_date,targeting:s.targeting?{age_min:s.targeting.age_min,age_max:s.targeting.age_max,genders:s.targeting.genders,interests:s.targeting.interests,locations:s.targeting.locations,trip_types:s.targeting.trip_types}:{genders:["all"],interests:[],locations:[],trip_types:[]}});return e.jsx(I,{open:!0,onOpenChange:t,children:e.jsxs(P,{className:"max-w-3xl max-h-[90vh] overflow-y-auto bg-gray-900 border-gray-700",children:[e.jsx(T,{children:e.jsx(M,{className:"text-white",children:"Edit Campaign"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",className:"text-gray-300",children:"Campaign Name"}),e.jsx(N,{id:"name",value:h.name,onChange:e=>p({...h,name:e.target.value}),className:"mt-1 bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"description",className:"text-gray-300",children:"Description"}),e.jsx(O,{id:"description",value:h.description,onChange:e=>p({...h,description:e.target.value}),className:"mt-1 bg-gray-800 border-gray-700 text-white",rows:3})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"discount",className:"text-gray-300",children:"Discount Details"}),e.jsx(N,{id:"discount",value:h.discount_details||"",onChange:e=>p({...h,discount_details:e.target.value}),className:"mt-1 bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsxs(b,{className:"text-gray-300",children:["Campaign Images (",h.images.length,"/",5,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mt-2 mb-4",children:h.images.map((a,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url,alt:a.alt,className:"w-full h-32 object-cover rounded-lg"}),e.jsx(l,{size:"sm",variant:"destructive",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(e=>{const a=h.images.filter((a,s)=>s!==e);p({...h,images:a})})(s),children:e.jsx(c,{className:"h-4 w-4"})})]},s))}),h.images.length<5&&e.jsxs("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-6 text-center bg-gray-800/30",children:[e.jsx("input",{type:"file",id:"image-upload",multiple:!0,accept:"image/*",onChange:async e=>{const a=e.target.files;if(!a)return;const s=5-h.images.length;if(a.length>s)return void i({title:"Too Many Images",description:`You can only upload ${s} more image(s). Maximum is 5.`,variant:"destructive"});x(!0);const t=[];for(let r=0;r<a.length;r++){const e=a[r],s=await Se.uploadCampaignImage(e);s&&t.push({url:s,alt:e.name,order:h.images.length+r})}p({...h,images:[...h.images,...t]}),x(!1)},className:"hidden"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(F,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-400",children:g?"Uploading...":`Click to upload (${5-h.images.length} slots remaining)`})]})]})]}),e.jsxs("div",{children:[e.jsxs(b,{className:"text-gray-300",children:["Campaign Tags (",h.tags.length,"/",5,")"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Choose tags that best describe your campaign"}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto p-4 bg-gray-800/30 rounded-lg",children:Object.entries(De).map(([a,s])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2 capitalize",children:a.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>{const s=h.tags.includes(a.value),t=!s&&h.tags.length>=5;return e.jsxs("label",{className:d("flex items-center space-x-2 p-2 rounded border cursor-pointer transition-colors",s?"bg-red-600/20 border-red-500":t?"bg-gray-800/30 border-gray-700 opacity-50 cursor-not-allowed":"bg-gray-800/50 border-gray-700 hover:bg-gray-800"),children:[e.jsx("input",{type:"checkbox",checked:s,disabled:t,onChange:e=>{p({...h,tags:e.target.checked?[...h.tags,a.value]:h.tags.filter(e=>e!==a.value)})},className:"rounded border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-300",children:a.label})]},a.value)})})]},a))}),e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[h.tags.length," / ",5," tags selected"]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-700",children:[e.jsx(l,{variant:"outline",onClick:t,disabled:o,className:"border-gray-600 text-gray-300 hover:bg-white/10",children:"Cancel"}),e.jsx(l,{onClick:async()=>{try{m(!0),await Se.updateCampaign(s.id,h),i({title:"Campaign Updated",description:`"${h.name}" has been updated successfully`}),r()}catch(e){i({title:"Error",description:"Failed to update campaign. Please try again.",variant:"destructive"})}finally{m(!1)}},disabled:o||!h.name||!h.description,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700",children:o?"Saving...":"Save Changes"})]})]})]})})},Pe=({campaigns:s,onRefresh:t})=>{const{toast:r}=n(),[i,c]=a.useState(null),d=e=>{switch(e){case"active":return"bg-green-500";case"paused":return"bg-yellow-500";case"draft":default:return"bg-gray-500";case"ended":return"bg-red-500"}},m=async e=>{const a="active"===e.status?"paused":"active";await Se.updateCampaignStatus(e.id,a)?(r({title:"Status Updated",description:`Campaign "${e.name}" is now ${a}`}),t()):r({title:"Error",description:"Failed to update campaign status",variant:"destructive"})};return 0===s.length?e.jsx(u,{className:"text-center py-12 bg-white/5 border-gray-700",children:e.jsxs(f,{children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"No campaigns yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create your first campaign to start advertising on Chravel"})]})}):e.jsxs("div",{className:"grid gap-6",children:[s.map(a=>{var s,i;return e.jsxs(u,{className:"bg-white/5 border-gray-700 hover:bg-white/10 transition-all",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-xl text-white",children:a.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx(D,{className:`${d(a.status)} text-white`,children:a.status}),a.discount_details&&e.jsx(D,{variant:"outline",children:a.discount_details})]})]}),e.jsxs("div",{className:"flex gap-2",children:["draft"===a.status?e.jsx(l,{size:"sm",variant:"outline",onClick:()=>m(a),children:e.jsx(E,{className:"h-4 w-4"})}):"active"===a.status?e.jsx(l,{size:"sm",variant:"outline",onClick:()=>m(a),children:e.jsx(we,{className:"h-4 w-4"})}):null,e.jsx(l,{size:"sm",variant:"outline",onClick:()=>c(a),className:"border-gray-600 hover:bg-white/10",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>(async(e,a)=>{if(!confirm(`Are you sure you want to delete "${a}"?`))return;await Se.deleteCampaign(e)?(r({title:"Campaign Deleted",description:`"${a}" has been deleted`}),t()):r({title:"Error",description:"Failed to delete campaign",variant:"destructive"})})(a.id,a.name),children:e.jsx(o,{className:"h-4 w-4"})})]})]})}),e.jsxs(f,{children:[e.jsx("p",{className:"text-gray-300 mb-4",children:a.description}),(a.start_date||a.end_date)&&e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-4",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.start_date?K(new Date(a.start_date),"MMM d, yyyy"):"No start date"," - ",a.end_date?K(new Date(a.end_date),"MMM d, yyyy"):"No end date"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"Impressions"})]}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:a.impressions.toLocaleString()})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"Clicks"})]}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:a.clicks.toLocaleString()})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"CTR"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-white",children:[a.impressions>0?(a.clicks/a.impressions*100).toFixed(2):"0.00","%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center text-gray-400 mb-1",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:"Conversions"})]}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:a.conversions.toLocaleString()})]})]}),a.targeting&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Targeting:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[null==(s=a.targeting.interests)?void 0:s.map(a=>e.jsx(D,{variant:"secondary",children:a.replace("_"," ")},a)),null==(i=a.targeting.locations)?void 0:i.map(a=>e.jsxs(D,{variant:"secondary",children:["ðŸ“ ",a]},a))]})]})]})]},a.id)}),i&&e.jsx(Ie,{campaign:i,onClose:()=>c(null),onSuccess:()=>{c(null),t()}})]})},Te=({campaign:a,className:s=""})=>{var t,r;const i=(null==(r=null==(t=a.images)?void 0:t[0])?void 0:r.url)||"/placeholder.svg";return e.jsxs(u,{className:`overflow-hidden hover:shadow-lg transition-shadow cursor-pointer ${s}`,children:[e.jsxs("div",{className:"relative h-48 bg-gray-200",children:[e.jsx("img",{src:i,alt:a.name||"Campaign preview",className:"w-full h-full object-cover"}),a.discount_details&&e.jsx(D,{className:"absolute top-3 right-3 bg-green-600 text-white",children:a.discount_details}),e.jsx(D,{className:"absolute top-3 left-3 bg-purple-600 text-white",children:"Promoted"})]}),e.jsxs(f,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-1",children:a.name||"Campaign Name"}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:a.description||"Your campaign description will appear here..."}),a.destination_info&&(a.destination_info.city||a.destination_info.country)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:[a.destination_info.city,a.destination_info.country].filter(Boolean).join(", ")})]}),a.tags&&a.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[a.tags.slice(0,3).map(a=>e.jsx(D,{variant:"secondary",className:"text-xs",children:a},a)),a.tags.length>3&&e.jsxs(D,{variant:"secondary",className:"text-xs",children:["+",a.tags.length-3]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[e.jsx("button",{className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:"View Details"}),e.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Book Now"})]})]})]})},Me=["nightlife","live_music","dancing","happy_hour","group_outings","food_dining","cocktails","rooftop_venues","date_night","adventure","beach","cultural","luxury","budget_travel"],Oe=["leisure","business","group","family","solo","romantic"],Ae=({onClose:s,onSuccess:t})=>{const{toast:r}=n(),[i,o]=a.useState(1),[m,g]=a.useState(!1),[x,h]=a.useState(!1),[p,u]=a.useState({name:"",description:"",discount_details:"",images:[],destination_info:{},tags:[],status:"draft",targeting:{genders:["all"],interests:[],locations:[],trip_types:[]}}),j=[{id:1,title:"Campaign Details",icon:_e},{id:2,title:"Images & Media",icon:A},{id:3,title:"Targeting",icon:J},{id:4,title:"Schedule & Budget",icon:C},{id:5,title:"Review & Launch",icon:Q}],v=async e=>{const a=e.target.files;if(!a)return;const s=5-p.images.length;if(a.length>s)return r({title:"Too Many Images",description:`You can only upload ${s} more image(s). Maximum is 5.`,variant:"destructive"}),void(e.target.value="");h(!0);const t=[];for(let r=0;r<a.length;r++){const e=a[r],s=await Se.uploadCampaignImage(e);s&&t.push({url:s,alt:e.name,order:p.images.length+r})}u({...p,images:[...p.images,...t]}),h(!1),e.target.value=""},y=()=>{switch(i){case 1:return p.name&&p.description;case 2:case 3:case 4:case 5:return!0;default:return!1}};return e.jsx(I,{open:!0,onOpenChange:s,children:e.jsxs(P,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(T,{children:e.jsx(M,{children:"Create New Campaign"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:j.map((a,s)=>{const t=a.icon;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:d("flex items-center justify-center w-10 h-10 rounded-full",i>=a.id?"bg-purple-600 text-white":"bg-gray-200 text-gray-400"),children:e.jsx(t,{className:"h-5 w-5"})}),s<j.length-1&&e.jsx("div",{className:d("w-16 h-1 mx-2",i>a.id?"bg-purple-600":"bg-gray-200")})]},a.id)})}),e.jsx("div",{className:"min-h-[300px]",children:(()=>{var a,s;switch(i){case 1:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",children:"Campaign Name *"}),e.jsx(N,{id:"name",value:p.name,onChange:e=>u({...p,name:e.target.value}),placeholder:"Summer Beach Getaway Special",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"description",children:"Description *"}),e.jsx(O,{id:"description",value:p.description,onChange:e=>u({...p,description:e.target.value}),placeholder:"Describe your offer and what makes it special...",className:"mt-1",rows:4})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"discount",children:"Discount Details (Optional)"}),e.jsx(N,{id:"discount",value:p.discount_details||"",onChange:e=>u({...p,discount_details:e.target.value}),placeholder:"20% off first booking",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"location",children:"Destination"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(V,{className:"h-5 w-5 text-gray-400 mt-2"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(N,{placeholder:"City",value:(null==(a=p.destination_info)?void 0:a.city)||"",onChange:e=>u({...p,destination_info:{...p.destination_info,city:e.target.value}})}),e.jsx(N,{placeholder:"Country",value:(null==(s=p.destination_info)?void 0:s.country)||"",onChange:e=>u({...p,destination_info:{...p.destination_info,country:e.target.value}})})]})]})]})]});case 2:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Campaign Images"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Upload carousel images for your campaign (",p.images.length,"/",5,")"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:p.images.map((a,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url,alt:a.alt,className:"w-full h-32 object-cover rounded-lg"}),e.jsx(l,{size:"sm",variant:"destructive",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(e=>{const a=p.images.filter((a,s)=>s!==e);u({...p,images:a})})(s),children:e.jsx(c,{className:"h-4 w-4"})})]},s))}),p.images.length<5&&e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",id:"image-upload",multiple:!0,accept:"image/*",onChange:v,className:"hidden"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(F,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:x?"Uploading...":`Click to upload (${5-p.images.length} slots remaining)`})]})]})]}),e.jsxs("div",{children:[e.jsxs(b,{children:["Campaign Tags (Select up to ",5,")"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Choose tags that best describe your campaign"}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Object.entries(De).map(([a,s])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2 capitalize",children:a.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(a=>{const s=p.tags.includes(a.value),t=!s&&p.tags.length>=5;return e.jsxs("label",{className:d("flex items-center space-x-2 p-2 rounded border cursor-pointer transition-colors",s?"bg-red-600/20 border-red-500":t?"bg-gray-800/30 border-gray-700 opacity-50 cursor-not-allowed":"bg-gray-800/50 border-gray-700 hover:bg-gray-800"),children:[e.jsx("input",{type:"checkbox",checked:s,disabled:t,onChange:e=>{u({...p,tags:e.target.checked?[...p.tags,a.value]:p.tags.filter(e=>e!==a.value)})},className:"rounded border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-300",children:a.label})]},a.value)})})]},a))}),e.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[p.tags.length," / ",5," tags selected"]})]})]});case 3:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Age Range"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(N,{type:"number",placeholder:"Min",value:p.targeting.age_min||"",onChange:e=>u({...p,targeting:{...p.targeting,age_min:parseInt(e.target.value)}}),className:"w-20"}),e.jsx("span",{children:"to"}),e.jsx(N,{type:"number",placeholder:"Max",value:p.targeting.age_max||"",onChange:e=>u({...p,targeting:{...p.targeting,age_max:parseInt(e.target.value)}}),className:"w-20"})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Interests"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Me.map(a=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:p.targeting.interests.includes(a),onChange:e=>{const s=e.target.checked?[...p.targeting.interests,a]:p.targeting.interests.filter(e=>e!==a);u({...p,targeting:{...p.targeting,interests:s}})},className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm",children:a.replace("_"," ")})]},a))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Trip Types"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Oe.map(a=>e.jsx(D,{variant:p.targeting.trip_types.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>{const e=p.targeting.trip_types.includes(a)?p.targeting.trip_types.filter(e=>e!==a):[...p.targeting.trip_types,a];u({...p,targeting:{...p.targeting,trip_types:e}})},children:a},a))})]})]});case 4:return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Start Date"}),e.jsxs($,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:d("w-full justify-start text-left font-normal mt-1",!p.start_date&&"text-muted-foreground"),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),p.start_date?K(new Date(p.start_date),"PPP"):"Select date"]})}),e.jsx(z,{className:"w-auto p-0",children:e.jsx(B,{mode:"single",selected:p.start_date?new Date(p.start_date):void 0,onSelect:e=>u({...p,start_date:null==e?void 0:e.toISOString()}),initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"End Date"}),e.jsxs($,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:d("w-full justify-start text-left font-normal mt-1",!p.end_date&&"text-muted-foreground"),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),p.end_date?K(new Date(p.end_date),"PPP"):"Select date"]})}),e.jsx(z,{className:"w-auto p-0",children:e.jsx(B,{mode:"single",selected:p.end_date?new Date(p.end_date):void 0,onSelect:e=>u({...p,end_date:null==e?void 0:e.toISOString()}),initialFocus:!0})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Launch Campaign Immediately"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set campaign status to active"})]}),e.jsx(S,{checked:"active"===p.status,onCheckedChange:e=>u({...p,status:e?"active":"draft"})})]})]});case 5:return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Review Your Campaign"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Preview (as it will appear to users):"}),e.jsx(Te,{campaign:p,className:"max-w-sm mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Images"}),e.jsxs("p",{className:"font-medium",children:[p.images.length," images"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx(D,{className:"active"===p.status?"bg-green-500":"bg-gray-500",children:p.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Targeting"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.targeting.interests.map(a=>e.jsx(D,{variant:"outline",children:a.replace("_"," ")},a)),p.targeting.trip_types.map(a=>e.jsx(D,{variant:"outline",children:a},a))]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:"active"===p.status?"âœ… Your campaign will go live immediately after creation":"ðŸ“ Your campaign will be saved as a draft"})})]});default:return null}})()}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(l,{variant:"outline",onClick:()=>o(i-1),disabled:1===i,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Previous"]}),i<5?e.jsxs(l,{onClick:()=>o(i+1),disabled:!y(),children:["Next",e.jsx(Z,{className:"h-4 w-4 ml-2"})]}):e.jsx(l,{onClick:async()=>{try{g(!0);const e=await Se.createCampaign(p);e&&(r({title:"Campaign Created!",description:`"${e.name}" has been created successfully`}),t())}catch(e){r({title:"Error",description:"Failed to create campaign. Please try again.",variant:"destructive"})}finally{g(!1)}},disabled:m||!y(),children:m?"Creating...":"Create Campaign"})]})]})})},Fe=({campaigns:s})=>{const[t,r]=a.useState("all"),[i,n]=a.useState("7d"),[l,c]=a.useState(null),d=s.filter(e=>"active"===e.status),o=s.reduce((e,a)=>e+a.impressions,0),m=s.reduce((e,a)=>e+a.clicks,0),y=s.reduce((e,a)=>e+a.conversions,0),N=o>0?m/o*100:0;a.useEffect(()=>{"all"!==t&&b(t)},[t]);const b=async e=>{const a=await Se.getCampaignStats(e);c(a)},w=[{date:"Mon",impressions:1200,clicks:45,conversions:3},{date:"Tue",impressions:1800,clicks:72,conversions:5},{date:"Wed",impressions:2400,clicks:98,conversions:8},{date:"Thu",impressions:2100,clicks:85,conversions:6},{date:"Fri",impressions:3200,clicks:142,conversions:12},{date:"Sat",impressions:3800,clicks:178,conversions:15},{date:"Sun",impressions:3500,clicks:165,conversions:14}],_=[...s].sort((e,a)=>a.clicks-e.clicks).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white text-center md:text-left",children:"Campaign Analytics"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center md:justify-start",children:[e.jsxs(X,{value:t,onValueChange:r,children:[e.jsx(ee,{className:"w-full sm:w-[200px]",children:e.jsx(ae,{placeholder:"Select campaign"})}),e.jsxs(se,{children:[e.jsx(te,{value:"all",children:"All Campaigns"}),s.map(a=>e.jsx(te,{value:a.id,children:a.name},a.id))]})]}),e.jsxs(X,{value:i,onValueChange:n,children:[e.jsx(ee,{className:"w-full sm:w-[150px]",children:e.jsx(ae,{placeholder:"Time range"})}),e.jsxs(se,{children:[e.jsx(te,{value:"7d",children:"Last 7 days"}),e.jsx(te,{value:"30d",children:"Last 30 days"}),e.jsx(te,{value:"90d",children:"Last 90 days"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-white",children:"Total Impressions"}),e.jsx(H,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:o.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(G,{className:"h-3 w-3 inline text-green-500"})," +15.3% from last week"]})]})]}),e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-white",children:"Total Clicks"}),e.jsx(be,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:m.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(G,{className:"h-3 w-3 inline text-green-500"})," +8.2% from last week"]})]})]}),e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-white",children:"Overall CTR"}),e.jsx(Ce,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[N.toFixed(2),"%"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(re,{className:"h-3 w-3 inline text-red-500"})," -0.8% from last week"]})]})]}),e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-white",children:"Conversions"}),e.jsx(C,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:y.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx(G,{className:"h-3 w-3 inline text-green-500"})," +5% from last week"]})]})]})]}),e.jsxs(g,{defaultValue:"performance",className:"space-y-4",children:[e.jsxs(x,{className:"bg-gray-800 border-gray-700",children:[e.jsx(h,{value:"performance",className:"data-[state=active]:bg-red-600",children:"Performance"}),e.jsx(h,{value:"engagement",className:"data-[state=active]:bg-red-600",children:"Engagement"}),e.jsx(h,{value:"campaigns",className:"data-[state=active]:bg-red-600",children:"Top Campaigns"})]}),e.jsx(p,{value:"performance",className:"space-y-4",children:e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsx(j,{children:e.jsx(v,{className:"text-white",children:"Performance Trends"})}),e.jsx(f,{children:e.jsx(ie,{width:"100%",height:300,children:e.jsxs(ne,{data:w,children:[e.jsx(le,{strokeDasharray:"3 3"}),e.jsx(ce,{dataKey:"date"}),e.jsx(de,{}),e.jsx(oe,{}),e.jsx(me,{}),e.jsx(ge,{type:"monotone",dataKey:"impressions",stroke:"#8b5cf6",name:"Impressions"}),e.jsx(ge,{type:"monotone",dataKey:"clicks",stroke:"#3b82f6",name:"Clicks"})]})})})]})}),e.jsx(p,{value:"engagement",className:"space-y-4",children:e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsx(j,{children:e.jsx(v,{className:"text-white",children:"Engagement Metrics"})}),e.jsx(f,{children:e.jsx(ie,{width:"100%",height:300,children:e.jsxs(xe,{data:w,children:[e.jsx(le,{strokeDasharray:"3 3"}),e.jsx(ce,{dataKey:"date"}),e.jsx(de,{}),e.jsx(oe,{}),e.jsx(me,{}),e.jsx(he,{dataKey:"conversions",fill:"#10b981",name:"Conversions"})]})})})]})}),e.jsx(p,{value:"campaigns",className:"space-y-4",children:e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsx(j,{children:e.jsx(v,{className:"text-white",children:"Top Performing Campaigns"})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-4",children:_.map((a,s)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-lg font-semibold text-gray-400",children:["#",s+1]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[a.impressions.toLocaleString()," impressions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-white",children:[a.clicks," clicks"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[a.impressions>0?(a.clicks/a.impressions*100).toFixed(2):"0.00","% CTR"]})]})]},a.id))})})]})})]}),e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsx(j,{children:e.jsx(v,{className:"text-white",children:"Active Campaigns Summary"})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsx(pe,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Active Campaigns"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsx(Y,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Campaigns"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsx(G,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[m>0?(y/m*100).toFixed(1):"0.0","%"]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Conversion Rate"})]})]})})]})]})},Ue=({advertiser:s,onUpdate:t})=>{const{toast:i}=n(),[c,d]=a.useState(!1),[o,m]=a.useState(!1),[g,x]=a.useState({company_name:s.company_name,company_email:s.company_email,website:s.website||""});return e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsxs(j,{className:"pb-3 sm:pb-6",children:[e.jsx(v,{className:"text-base sm:text-lg text-white",children:"Account Status"}),e.jsx(y,{className:"text-xs sm:text-sm text-gray-400",children:"Your current advertiser account status and details"})]}),e.jsxs(f,{className:"space-y-3 sm:space-y-4 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Account Status"})]}),(a=>{switch(a){case"active":return e.jsxs(D,{className:"bg-green-500",children:[e.jsx(ye,{className:"h-3 w-3 mr-1"})," Active"]});case"suspended":return e.jsxs(D,{className:"bg-red-500",children:[e.jsx(ve,{className:"h-3 w-3 mr-1"})," Suspended"]});case"pending":return e.jsxs(D,{className:"bg-yellow-500",children:[e.jsx(ve,{className:"h-3 w-3 mr-1"})," Pending"]});default:return e.jsx(D,{children:a})}})(s.status)]}),e.jsx(ue,{className:"bg-gray-700"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Account ID"}),e.jsx("p",{className:"font-mono text-xs text-white",children:s.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Member Since"}),e.jsx("p",{className:"text-white",children:new Date(s.created_at).toLocaleDateString()})]})]})]})]}),e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsx(j,{className:"pb-3 sm:pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-base sm:text-lg text-white",children:"Company Information"}),e.jsx(y,{className:"text-xs sm:text-sm text-gray-400",children:"Manage your company details and contact information"})]}),!c&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>d(!0),className:"border-gray-600 text-gray-300 hover:bg-white/10 w-full sm:w-auto",children:"Edit"})]})}),e.jsx(f,{className:"space-y-3 sm:space-y-4 px-4 sm:px-6",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"company_name",children:"Company Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{id:"company_name",value:g.company_name,onChange:e=>x({...g,company_name:e.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"company_email",children:"Company Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{id:"company_email",type:"email",value:g.company_email,onChange:e=>x({...g,company_email:e.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"website",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{id:"website",type:"url",value:g.website,onChange:e=>x({...g,website:e.target.value}),className:"pl-10"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(l,{onClick:async()=>{try{m(!0);const{data:e,error:a}=await r.from("advertisers").update(g).eq("id",s.id).select().single();if(a)throw a;t(e),d(!1),i({title:"Settings Updated",description:"Your advertiser profile has been updated successfully"})}catch(e){i({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"})}finally{m(!1)}},disabled:o,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 w-full sm:w-auto",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]}),e.jsx(l,{variant:"outline",onClick:()=>{d(!1),x({company_name:s.company_name,company_email:s.company_email,website:s.website||""})},className:"border-gray-600 text-gray-300 hover:bg-white/10 w-full sm:w-auto",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Company Name"}),e.jsx("p",{className:"font-medium text-white",children:s.company_name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Company Email"}),e.jsx("p",{className:"font-medium text-white",children:s.company_email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Website"}),e.jsx("p",{className:"font-medium text-white",children:s.website?e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-red-400 hover:underline",children:s.website}):e.jsx("span",{className:"text-gray-500",children:"Not provided"})})]})]})]})})]}),e.jsxs(u,{className:"bg-white/5 border-gray-700",children:[e.jsxs(j,{className:"pb-3 sm:pb-6",children:[e.jsx(v,{className:"text-base sm:text-lg text-white",children:"API Access"}),e.jsx(y,{className:"text-xs sm:text-sm text-gray-400",children:"Programmatic access for campaign management (Coming Soon)"})]}),e.jsx(f,{children:e.jsx("div",{className:"p-4 bg-gray-800/50 border border-gray-700 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"API access will be available in a future update"})})})]})]})},Le=()=>{const t=s(),{user:r,signOut:n}=m(),c=i(e=>e.isDemoMode),[d,o]=a.useState(null),[u,j]=a.useState([]),[v,y]=a.useState(!0),[f,N]=a.useState(!1),[b,w]=a.useState("campaigns"),_={id:"demo-advertiser-1",user_id:"demo-user-1",company_name:"Paradise Resorts International",company_email:"marketing@paradiseresorts.com",website:"https://www.paradiseresorts.com",status:"active",created_at:new Date("2024-01-15").toISOString(),updated_at:(new Date).toISOString()},C=[{id:"demo-campaign-uber",advertiser_id:"demo-advertiser-1",name:"Uber - Premium Airport Rides",description:"Flat $10 off airport rides for Chravel users. Choose from Uber Comfort or Uber Black for luxury travel.",discount_details:"$10 off airport rides",images:[{url:"https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800",alt:"Airport terminal",order:0},{url:"https://images.unsplash.com/photo-1464037866556-6812c9d1c72e?w=800",alt:"Luxury car interior",order:1},{url:"https://images.unsplash.com/photo-1606768666853-403c90a981ad?w=800",alt:"City skyline",order:2}],destination_info:{location:"Miami, FL"},tags:["rideshare","airport-transfer","premium-service","city-travel"],status:"active",impressions:15234,clicks:1203,conversions:89,start_date:new Date("2024-01-01").toISOString(),end_date:new Date("2024-12-31").toISOString(),created_at:new Date("2024-01-01").toISOString(),updated_at:new Date("2024-01-01").toISOString(),targeting:{id:"demo-targeting-uber",campaign_id:"demo-campaign-uber",age_min:21,age_max:65,genders:["all"],interests:["business-travel","airport-transportation","premium-services"],locations:["United States","Canada"],trip_types:["business","leisure","group"],created_at:new Date("2024-01-01").toISOString(),updated_at:new Date("2024-01-01").toISOString()}},{id:"demo-campaign-lyft",advertiser_id:"demo-advertiser-1",name:"Lyft - Reliable City Rides",description:"Safe, friendly rides when you need them. New user discount for Chravel members available citywide.",discount_details:"New user discount for Chravel",images:[{url:"https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800",alt:"City street view",order:0},{url:"https://images.unsplash.com/photo-1502489597346-dad15683d4c2?w=800",alt:"Happy passenger",order:1}],destination_info:{location:"Major Cities Nationwide"},tags:["rideshare","city-travel","new-user-offer","budget-friendly"],status:"active",impressions:12876,clicks:945,conversions:67,start_date:new Date("2024-02-01").toISOString(),end_date:new Date("2024-11-30").toISOString(),created_at:new Date("2024-02-01").toISOString(),updated_at:new Date("2024-02-01").toISOString(),targeting:{id:"demo-targeting-lyft",campaign_id:"demo-campaign-lyft",age_min:18,age_max:55,genders:["all"],interests:["city-exploration","nightlife","dining"],locations:["United States","Canada"],trip_types:["leisure","group","solo"],created_at:new Date("2024-02-01").toISOString(),updated_at:new Date("2024-02-01").toISOString()}},{id:"demo-campaign-hotels",advertiser_id:"demo-advertiser-1",name:"Hotels.com - Compare & Save",description:"Compare hotel prices and earn rewards. Get one night free for every 10 nights booked.",discount_details:"Collect 10 nights, get 1 free",images:[{url:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800",alt:"Luxury hotel exterior",order:0},{url:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=800",alt:"Hotel pool view",order:1},{url:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=800",alt:"Comfortable hotel room",order:2}],destination_info:{location:"Global Hotel Network"},tags:["lodging","price-comparison","rewards-program","travel-booking"],status:"active",impressions:18765,clicks:1456,conversions:134,start_date:new Date("2024-01-15").toISOString(),end_date:new Date("2024-12-31").toISOString(),created_at:new Date("2024-01-15").toISOString(),updated_at:new Date("2024-01-15").toISOString(),targeting:{id:"demo-targeting-hotels",campaign_id:"demo-campaign-hotels",age_min:25,age_max:65,genders:["all"],interests:["hotels","accommodations","travel-planning"],locations:["United States","Canada","United Kingdom","Australia"],trip_types:["leisure","business","family","romantic"],created_at:new Date("2024-01-15").toISOString(),updated_at:new Date("2024-01-15").toISOString()}}];a.useEffect(()=>{c?(o(_),j(C),y(!1)):S()},[c]);const S=async()=>{try{y(!0);const e=await Se.getAdvertiserProfile();if(o(e),e){const e=await Se.getCampaigns();j(e)}}catch(e){}finally{y(!1)}},D=async e=>{o(e),await S()};if(v)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})});if(!c&&!d)return e.jsx(ke,{onComplete:D});const I=c?d||_:d,P=c?u.length>0?u:C:u;return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[c&&e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 text-white py-2 px-4 text-center",children:e.jsx("p",{className:"text-sm font-medium",children:"ðŸŽ­ Demo Mode Active - This is a preview of the Chravel Advertiser Hub"})}),e.jsx("header",{className:"bg-gradient-to-r from-gray-900 to-gray-800 border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 h-auto sm:h-16 py-3 sm:py-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-white",children:"Chravel Advertiser Hub"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-400 truncate max-w-[120px] sm:max-w-none",children:(null==I?void 0:I.company_name)||"Loading..."})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>t("/"),className:"border-gray-600 text-gray-300 hover:bg-white/10 flex-1 sm:flex-none",children:"Back to Chravel"}),!c&&e.jsxs(l,{variant:"ghost",size:"sm",onClick:async()=>{await n(),t("/")},className:"text-gray-300 hover:bg-white/10 flex-1 sm:flex-none",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(g,{value:b,onValueChange:w,children:[e.jsxs(x,{className:"mb-8 bg-gray-800 border-gray-700",children:[e.jsxs(h,{value:"campaigns",className:"flex items-center gap-2 data-[state=active]:bg-red-600",children:[e.jsx(fe,{className:"h-4 w-4"}),"Campaigns"]}),e.jsxs(h,{value:"analytics",className:"flex items-center gap-2 data-[state=active]:bg-red-600",children:[e.jsx(pe,{className:"h-4 w-4"}),"Analytics"]}),e.jsxs(h,{value:"settings",className:"flex items-center gap-2 data-[state=active]:bg-red-600",children:[e.jsx(L,{className:"h-4 w-4"}),"Settings"]})]}),e.jsxs(p,{value:"campaigns",className:"space-y-6 mobile-safe-scroll overflow-y-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white text-center md:text-left",children:"Your Campaigns"}),e.jsx("div",{className:"flex justify-center md:justify-start",children:e.jsxs(l,{onClick:()=>N(!0),className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 w-full sm:w-auto",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})})]}),e.jsx(Pe,{campaigns:P,onRefresh:S})]}),e.jsx(p,{value:"analytics",className:"mobile-safe-scroll overflow-y-auto",children:e.jsx(Fe,{campaigns:P})}),e.jsx(p,{value:"settings",className:"mobile-safe-scroll overflow-y-auto",children:e.jsx(Ue,{advertiser:I,onUpdate:o})})]})}),f&&e.jsx(Ae,{onClose:()=>N(!1),onSuccess:async()=>{N(!1),await S()}})]})};export{Le as AdvertiserDashboard,Le as default};
