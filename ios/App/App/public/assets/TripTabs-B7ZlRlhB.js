var He=Object.defineProperty;var Ge=(o,t,a)=>t in o?He(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var V=(o,t,a)=>Ge(o,typeof t!="symbol"?t+"":t,a);import{c as se,j as e,r as g,X as ae,B as qe,s as te,z as We,R as Ke,m as Ce,H as J,p as ye,h as Je,o as ze}from"./index-CAsyng-G.js";import{V as fe,f as Ye,h as Qe,i as Ze,a as Xe,e as ke,P as et,G as tt,d as at}from"./TripDetailModals-DY4m2USS.js";import{B as D}from"./button-_Pv0MPf0.js";import{P as ve}from"./plus-CmGY8coD.js";import{C as Ie,d as be,P as st,G as Se,a as Y,u as Pe,D as it,L as rt}from"./googleMapsService-BX6sUOcy.js";import{M as de,D as we,Z as ot,o as nt,p as lt,q as ne}from"./SettingsMenu-BOjv86PG.js";import{E as Q,S as ct}from"./useSavedRecommendations-POBY9hWZ.js";import{T as dt,a as mt,b as W,c as K}from"./tabs-Ba-WFkQA.js";import{u as ut}from"./useDemoMode-BjEsodyt.js";import{p as re,e as oe}from"./eventsMockData-BosocEr8.js";import{B as G}from"./badge-J4HoHOpX.js";import{M as T}from"./map-pin-BpJQ3jXK.js";import{L as me,F as le,D as ht,f as pt,T as gt,S as xt,d as ft}from"./SeatManagementSection-BFc4Xk5u.js";import{S as je}from"./sparkles-C9bYoM-0.js";import{C as ue}from"./camera-CpfyDuxc.js";import{U as bt}from"./users-DV9oPzUN.js";import{C as wt}from"./circle-check-big-DmirYwTN.js";import{L as yt}from"./loader-circle-CkOmKk2l.js";import{C as vt}from"./clock-z7hIZNmF.js";import{D as jt,a as _t,b as Nt,c as kt,L as H}from"./dialog-Cx8-WJ72.js";import{I as ge}from"./input-CkF3ltBX.js";import{a as St,b as Dt,c as Ct,d as zt,e as It}from"./select-XMWUKs4c.js";import{f as Pt,C as Ot}from"./calendar-BbT1q-ev.js";import{C as he}from"./calendar-B2WMmvpa.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=se("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=se("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=se("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),Lt=({option:o,totalVotes:t,userVote:a,onVote:i})=>{const m=t>0?o.votes/t*100:0,n=a===o.id;return e.jsxs("button",{onClick:()=>i(o.id),disabled:!!a,className:`w-full text-left p-4 rounded-xl border transition-all ${a?n?"border-glass-enterprise-blue bg-glass-enterprise-blue/20":"border-glass-slate-border bg-glass-slate-bg/50":"border-glass-slate-border hover:border-glass-enterprise-blue hover:bg-glass-enterprise-blue/10"} ${a?"cursor-default":"cursor-pointer"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-white",children:o.text}),a&&e.jsxs("span",{className:"text-sm font-semibold text-gray-400",children:[o.votes," votes (",m.toFixed(0),"%)"]})]}),a&&e.jsx("div",{className:"w-full bg-glass-slate-bg rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-glass-enterprise-blue to-glass-accent-orange h-2 rounded-full transition-all duration-500",style:{width:`${m}%`}})})]})},Rt=({poll:o,onVote:t})=>{const a=i=>{t(o.id,i)};return e.jsxs("div",{className:"bg-glass-slate-card border border-glass-slate-border rounded-2xl p-6 shadow-enterprise-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:o.question}),e.jsx("div",{className:"space-y-3",children:o.options.map(i=>e.jsx(Lt,{option:i,totalVotes:o.totalVotes,userVote:o.userVote,onVote:a},i.id))}),o.userVote&&e.jsxs("p",{className:"text-sm text-gray-400 mt-4 text-center",children:[o.totalVotes," total votes"]})]})},X=()=>`option_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,$t=()=>{const[o,t]=g.useState(""),[a,i]=g.useState([{id:X(),text:""},{id:X(),text:""}]),m=g.useCallback(()=>{i(s=>[...s,{id:X(),text:""}])},[]),n=g.useCallback((s,u)=>{i(c=>{const x=[...c];return x[s]={...x[s],text:u},x})},[]),r=g.useCallback(s=>{i(u=>u.filter((c,x)=>x!==s))},[]),h=g.useCallback(()=>o.trim()?a.filter(u=>u.text.trim()).length<2?{isValid:!1,error:"At least 2 options are required"}:{isValid:!0}:{isValid:!1,error:"Question is required"},[o,a]),l=g.useCallback(()=>h().isValid?{question:o.trim(),options:a.filter(u=>u.text.trim()).map(u=>u.text.trim())}:null,[o,a,h]),p=g.useCallback(()=>{t(""),i([{id:X(),text:""},{id:X(),text:""}])},[]);return{question:o,options:a,validOptions:a.filter(s=>s.text.trim()),canAddOption:a.length<10,canRemoveOption:a.length>2,setQuestion:t,addOption:m,updateOption:n,removeOption:r,validatePoll:h,getPollData:l,resetForm:p}},Ft=({onCreatePoll:o,onCancel:t})=>{const{question:a,options:i,setQuestion:m,addOption:n,updateOption:r,removeOption:h,getPollData:l}=$t(),p=()=>{const s=l();if(!s)return;const u={id:Date.now().toString(),question:s.question,options:s.options.map((c,x)=>({id:String.fromCharCode(97+x),text:c,votes:0})),totalVotes:0};o(u)};return e.jsxs("div",{className:"bg-glass-slate-card border border-glass-slate-border rounded-2xl p-6 shadow-enterprise-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Create New Poll"}),e.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-glass-slate-bg hover:bg-glass-slate-border flex items-center justify-center transition-colors",children:e.jsx(ae,{size:16,className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Poll Question"}),e.jsx("input",{type:"text",value:a,onChange:s=>m(s.target.value),placeholder:"What would you like to ask the group?",className:"w-full bg-glass-slate-bg border border-glass-slate-border rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-glass-enterprise-blue focus:ring-2 focus:ring-glass-enterprise-blue/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Options"}),e.jsxs("div",{className:"space-y-2",children:[i.map((s,u)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.text,onChange:c=>r(u,c.target.value),placeholder:`Option ${u+1}`,className:"flex-1 bg-glass-slate-bg border border-glass-slate-border rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-glass-enterprise-blue"}),i.length>2&&e.jsx("button",{onClick:()=>h(u),className:"w-8 h-8 rounded-lg bg-red-500 hover:bg-red-600 flex items-center justify-center text-white transition-colors",children:e.jsx(ae,{size:14})})]},s.id)),i.length<6&&e.jsxs("button",{onClick:n,className:"w-full h-10 border-2 border-dashed border-glass-slate-border rounded-lg text-gray-400 hover:border-glass-enterprise-blue hover:text-glass-enterprise-blue transition-colors flex items-center justify-center gap-2",children:[e.jsx(ve,{size:16}),"Add Option"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(D,{onClick:t,variant:"outline",className:"flex-1 h-10 rounded-lg border border-glass-slate-border hover:border-gray-500 font-semibold bg-glass-slate-bg text-white hover:bg-glass-slate-border",children:"Cancel"}),e.jsx(D,{onClick:p,disabled:!a.trim()||i.filter(s=>s.text.trim()).length<2,className:"flex-1 h-10 rounded-lg bg-gradient-to-r from-glass-enterprise-blue to-glass-enterprise-blue-light hover:from-glass-enterprise-blue-light hover:to-glass-enterprise-blue font-semibold text-white border border-glass-enterprise-blue/50",children:"Create Poll"})]})]})]})},Bt=()=>{const[o,t]=g.useState(!1),[a,i]=g.useState([{id:"1",question:"Which restaurant should we visit first?",options:[{id:"a",text:"L'Ami Jean",votes:8},{id:"b",text:"Breizh CafÃ©",votes:5},{id:"c",text:"Le Comptoir du Relais",votes:12}],totalVotes:25},{id:"2",question:"What amount is everybody going to spend tonight on a table at a club?",options:[{id:"a",text:"$300 each",votes:3},{id:"b",text:"$600 each",votes:7},{id:"c",text:"$900 each",votes:2}],totalVotes:12}]),m=(r,h)=>{i(a.map(l=>{if(l.id===r&&!l.userVote){const p=l.options.map(s=>s.id===h?{...s,votes:s.votes+1}:s);return{...l,options:p,totalVotes:l.totalVotes+1,userVote:h}}return l}))},n=r=>{i([r,...a]),t(!1)};return e.jsxs("div",{className:"space-y-6",children:[!o&&e.jsxs(D,{onClick:()=>t(!0),className:"w-full h-12 rounded-xl bg-gradient-to-r from-glass-enterprise-blue to-glass-enterprise-blue-light hover:from-glass-enterprise-blue-light hover:to-glass-enterprise-blue font-semibold shadow-enterprise border border-glass-enterprise-blue/50 text-white",children:[e.jsx(Ie,{size:20,className:"mr-2"}),"Create Poll"]}),o&&e.jsx(Ft,{onCreatePoll:n,onCancel:()=>t(!1)}),a.map(r=>e.jsx(Rt,{poll:r,onVote:m},r.id))]})},Et=()=>{const[o,t]=g.useState([{id:"1",author:"Emma",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=40&h=40&fit=crop&crop=face",content:"This place looks amazing! Has anyone been here before?",timestamp:"2 hours ago",likes:3,linkUrl:"https://lamijean.fr",linkTitle:"L'Ami Jean - Traditional Bistro"},{id:"2",author:"Jake",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",content:"The reviews are incredible! Definitely adding this to our must-visit list.",timestamp:"1 hour ago",likes:5,replies:[{id:"2a",author:"Sarah",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",content:"Should we make a reservation now?",timestamp:"45 min ago",likes:2}]}]),[a,i]=g.useState(""),m=()=>{if(!a.trim())return;const r={id:Date.now().toString(),author:"You",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",content:a,timestamp:"just now",likes:0};t([r,...o]),i("")},n=r=>{t(o.map(h=>h.id===r?{...h,likes:h.likes+1}:h))};return e.jsxs("div",{className:"p-6 space-y-6 bg-glass-slate-bg min-h-screen",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(de,{size:20,className:"text-glass-enterprise-blue"}),"Group Polls"]}),e.jsx(Bt,{})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(de,{size:20,className:"text-purple-400"}),"Link Comments"]}),e.jsxs("div",{className:"bg-glass-slate-bg rounded-2xl p-4 mb-6",children:[e.jsx("textarea",{value:a,onChange:r=>i(r.target.value),placeholder:"Share your thoughts about the links posted...",className:"w-full bg-glass-slate-card border border-glass-slate-border rounded-xl p-4 text-white placeholder-gray-500 focus:outline-none focus:border-glass-enterprise-blue focus:ring-2 focus:ring-glass-enterprise-blue/20 resize-none",rows:3}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:m,disabled:!a.trim(),className:"bg-gradient-to-r from-glass-enterprise-blue to-glass-enterprise-blue-light hover:from-glass-enterprise-blue-light hover:to-glass-enterprise-blue disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2 rounded-xl font-semibold transition-all shadow-enterprise border border-glass-enterprise-blue/50",children:"Post Comment"})})]}),o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No comments yet"}),e.jsx("div",{className:"text-gray-400",children:"Start the conversation about the places you're visiting!"})]}):e.jsx("div",{className:"space-y-4",children:o.map(r=>e.jsxs("div",{className:"bg-glass-slate-card border border-glass-slate-border rounded-2xl p-6 shadow-enterprise",children:[r.linkUrl&&e.jsxs("div",{className:"bg-glass-enterprise-blue/10 border border-glass-enterprise-blue/30 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-glass-enterprise-blue font-medium mb-1",children:[e.jsx(Q,{size:16}),r.linkTitle]}),e.jsx("a",{href:r.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"text-glass-enterprise-blue-light text-sm hover:underline break-all",children:r.linkUrl})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:r.avatar,alt:r.author,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-white",children:r.author}),e.jsx("span",{className:"text-gray-400 text-sm",children:r.timestamp})]}),e.jsx("p",{className:"text-gray-300 mb-3",children:r.content}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>n(r.id),className:"flex items-center gap-1 text-gray-400 hover:text-red-400 transition-colors",children:[e.jsx(De,{size:16}),e.jsx("span",{className:"text-sm",children:r.likes})]}),e.jsxs("button",{className:"flex items-center gap-1 text-gray-400 hover:text-glass-enterprise-blue transition-colors",children:[e.jsx(Tt,{size:16}),e.jsx("span",{className:"text-sm",children:"Reply"})]})]}),r.replies&&r.replies.length>0&&e.jsx("div",{className:"mt-4 space-y-3 border-l-2 border-glass-slate-border pl-4",children:r.replies.map(h=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:h.avatar,alt:h.author,className:"w-8 h-8 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-white text-sm",children:h.author}),e.jsx("span",{className:"text-gray-400 text-xs",children:h.timestamp})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-2",children:h.content}),e.jsxs("button",{onClick:()=>n(h.id),className:"flex items-center gap-1 text-gray-400 hover:text-red-400 transition-colors",children:[e.jsx(De,{size:14}),e.jsx("span",{className:"text-xs",children:h.likes})]})]})]},h.id))})]})]})]},r.id))})]})]})},Ut={1:{tripId:1,tripTitle:"Spring Break Cancun 2026 Kappa Alpha Psi Trip",location:"Cancun, Mexico",photos:[{id:"cancun-photo-1",media_url:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=600&h=400&fit=crop",filename:"Beach Volleyball Tournament.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:425678,mime_type:"image/jpeg"},{id:"cancun-photo-2",media_url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=400&fit=crop",filename:"Sunset Resort Pool Party.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"upload",file_size:523456,mime_type:"image/jpeg"},{id:"cancun-photo-3",media_url:"https://images.unsplash.com/photo-1539635278303-d4002c07eae3?w=600&h=400&fit=crop",filename:"Brotherhood Beach Group Shot.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*3).toISOString(),source:"chat",file_size:378901,mime_type:"image/jpeg"}],videos:[{id:"cancun-video-1",media_url:"/mock/videos/cancun-beach-party.mp4",filename:"Epic Beach Party Highlights.mp4",media_type:"video",metadata:{duration:52,width:1280,height:720,poster:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop"},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:12456e3,mime_type:"video/mp4"}],audio:[{id:"cancun-audio-1",media_url:"/mock/audio/cancun-meetup.mp3",filename:"Voice Note - Meet at tiki bar 8pm!.mp3",media_type:"audio",metadata:{duration:6.2},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:156780,mime_type:"audio/mp3"}],files:[{id:"cancun-file-1",media_url:"/mock/files/cancun-resort-confirmation.pdf",filename:"Moon Palace Resort Confirmation.pdf",media_type:"document",metadata:{pageCount:3,confirmationNumber:"MP-CAN-2026-789"},created_at:new Date(Date.now()-864e5*10).toISOString(),source:"upload",file_size:267890,mime_type:"application/pdf"},{id:"cancun-file-2",media_url:"https://images.unsplash.com/photo-1523794027912-478866de8aa4?w=400&h=300&fit=crop",filename:"Excursion Tickets - Chichen Itza.jpg",media_type:"image",metadata:{isTicket:!0,venue:"Chichen Itza",date:"2026-03-17",extractedEvents:1},created_at:new Date(Date.now()-864e5*5).toISOString(),source:"upload",file_size:345600,mime_type:"image/jpeg"}],links:[{id:"cancun-link-1",url:"https://www.palaceresorts.com/moon-palace-cancun",title:"Moon Palace Cancun - All Inclusive Resort",description:"Luxury all-inclusive resort with 6 restaurants, water park, and pristine beaches.",domain:"palaceresorts.com",image_url:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*15).toISOString(),source:"pinned",category:"Housing",tags:["resort","all-inclusive","accommodation"]},{id:"cancun-link-2",url:"https://www.joestonecrab.com/",title:"Joe's Stone Crab Cancun - Seafood Excellence",description:"World-famous stone crab and fresh seafood in the heart of Cancun.",domain:"joestonecrab.com",image_url:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*3).toISOString(),source:"chat",category:"Eats",tags:["seafood","restaurant","upscale"]},{id:"cancun-link-3",url:"https://www.cocobongo.com.mx/",title:"Coco Bongo Show & Disco",description:"Spectacular acrobatic show with live performances and tribute acts.",domain:"cocobongo.com.mx",image_url:"https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*2).toISOString(),source:"pinned",category:"Activities",tags:["nightlife","show","entertainment"]},{id:"cancun-link-4",url:"https://www.tripadvisor.com/Attraction_Review-g150807-d152896-Reviews-Chichen_Itza-Chichen_Itza_Yucatan_Peninsula.html",title:"Chichen Itza Day Trip",description:"Ancient Mayan ruins and Wonder of the World archaeological site.",domain:"tripadvisor.com",image_url:"https://images.unsplash.com/photo-1518638150340-f706e86654de?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*5).toISOString(),source:"manual",category:"Activities",tags:["cultural","historical","tour"]}]},2:{tripId:2,tripTitle:"Tokyo Adventure",location:"Tokyo, Japan",photos:[{id:"tokyo-photo-1",media_url:"https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=600&h=400&fit=crop",filename:"Shibuya Crossing Night Shot.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:456789,mime_type:"image/jpeg"},{id:"tokyo-photo-2",media_url:"https://images.unsplash.com/photo-1522059773416-5d424f04e00a?w=600&h=400&fit=crop",filename:"Cherry Blossoms Ueno Park.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"upload",file_size:398765,mime_type:"image/jpeg"},{id:"tokyo-photo-3",media_url:"https://images.unsplash.com/photo-1551963831-b3b1ca40c98e?w=600&h=400&fit=crop",filename:"Sushi Bar Group Experience.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*3).toISOString(),source:"chat",file_size:423456,mime_type:"image/jpeg"}],videos:[{id:"tokyo-video-1",media_url:"/mock/videos/tokyo-karaoke.mp4",filename:"Epic Karaoke Night Shibuya.mp4",media_type:"video",metadata:{duration:78,width:1280,height:720,poster:"https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400&h=300&fit=crop"},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"chat",file_size:15678e3,mime_type:"video/mp4"}],audio:[{id:"tokyo-audio-1",media_url:"/mock/audio/tokyo-tsukiji.mp3",filename:"Voice Note - Tsukiji Market 6am meeting.mp3",media_type:"audio",metadata:{duration:8.5},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:234567,mime_type:"audio/mp3"}],files:[{id:"tokyo-file-1",media_url:"/mock/files/jr-pass-confirmation.pdf",filename:"JR Pass - 7 Day Tokyo Regional.pdf",media_type:"document",metadata:{passType:"7-day",regions:["Tokyo","Kanto"]},created_at:new Date(Date.now()-864e5*12).toISOString(),source:"upload",file_size:189456,mime_type:"application/pdf"},{id:"tokyo-file-2",media_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",filename:"Tokyo Itinerary Day by Day.pdf",media_type:"document",metadata:{isSchedule:!0,days:10,extractedEvents:15},created_at:new Date(Date.now()-864e5*8).toISOString(),source:"upload",file_size:567890,mime_type:"application/pdf"}],links:[{id:"tokyo-link-1",url:"https://www.booking.com/hotel/jp/the-millennials-shibuya.html",title:"The Millennials Shibuya Capsule Hotel",description:"Modern capsule hotel in the heart of Shibuya with high-tech amenities.",domain:"booking.com",image_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*20).toISOString(),source:"pinned",category:"Housing",tags:["capsule","modern","shibuya"]},{id:"tokyo-link-2",url:"https://sushidai-tsukiji.com/",title:"Sushi Dai - Tsukiji Outer Market",description:"World-famous sushi restaurant known for the freshest tuna and traditional preparation.",domain:"sushidai-tsukiji.com",image_url:"https://images.unsplash.com/photo-1551963831-b3b1ca40c98e?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*4).toISOString(),source:"chat",category:"Eats",tags:["sushi","traditional","tsukiji"]},{id:"tokyo-link-3",url:"https://www.teamlab.art/e/planets/",title:"teamLab Planets TOKYO Digital Art Museum",description:"Immersive digital art experience with interactive installations and water features.",domain:"teamlab.art",image_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*6).toISOString(),source:"pinned",category:"Activities",tags:["art","digital","immersive"]},{id:"tokyo-link-4",url:"https://www.robot-restaurant.com/",title:"Robot Restaurant Shinjuku",description:"Crazy robot show with lasers, music, and mechanical mayhem in Shinjuku.",domain:"robot-restaurant.com",image_url:"https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*3).toISOString(),source:"manual",category:"Activities",tags:["entertainment","unique","shinjuku"]}]},3:{tripId:3,tripTitle:"Jack and Jill's destination wedding",location:"Bali, Indonesia",photos:[{id:"bali-photo-1",media_url:"https://images.unsplash.com/photo-1519741497674-611481863552?w=600&h=400&fit=crop",filename:"Beachside Wedding Ceremony.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"upload",file_size:567890,mime_type:"image/jpeg"},{id:"bali-photo-2",media_url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=400&fit=crop",filename:"Sunset Reception Ubud.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"chat",file_size:456123,mime_type:"image/jpeg"}],videos:[{id:"bali-video-1",media_url:"/mock/videos/bali-ceremony.mp4",filename:"Wedding Ceremony Highlights.mp4",media_type:"video",metadata:{duration:125,width:1920,height:1080,poster:"https://images.unsplash.com/photo-1519741497674-611481863552?w=400&h=300&fit=crop"},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"upload",file_size:25678e3,mime_type:"video/mp4"}],audio:[{id:"bali-audio-1",media_url:"/mock/audio/bali-rehearsal.mp3",filename:"Voice Note - Rehearsal dinner reminder.mp3",media_type:"audio",metadata:{duration:5.8},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"chat",file_size:145600,mime_type:"audio/mp3"}],files:[{id:"bali-file-1",media_url:"/mock/files/villa-booking-confirmation.pdf",filename:"Villa Seminyak Wedding Package.pdf",media_type:"document",metadata:{guests:50,package:"Premium Beach Wedding"},created_at:new Date(Date.now()-864e5*30).toISOString(),source:"upload",file_size:423789,mime_type:"application/pdf"}],links:[{id:"bali-link-1",url:"https://www.seminyakbeachresort.com/",title:"Seminyak Beach Resort & Spa",description:"Luxury beachfront resort perfect for destination weddings with ocean views.",domain:"seminyakbeachresort.com",image_url:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*45).toISOString(),source:"pinned",category:"Housing",tags:["resort","wedding-venue","luxury"]},{id:"bali-link-2",url:"https://www.lalucianbali.com/",title:"La Lucciola - Beachside Italian",description:"Romantic Italian restaurant with stunning ocean views and fresh seafood.",domain:"lalucianbali.com",image_url:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*5).toISOString(),source:"chat",category:"Eats",tags:["italian","romantic","ocean-view"]},{id:"bali-link-3",url:"https://www.baliswing.com/",title:"Bali Swing Adventure Experience",description:"Thrilling jungle swings with incredible valley views for adventurous couples.",domain:"baliswing.com",image_url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*10).toISOString(),source:"manual",category:"Activities",tags:["adventure","scenic","couples"]}]},4:{tripId:4,tripTitle:"Kristen's Bachelorette Party",location:"Nashville, TN",photos:[{id:"nashville-photo-1",media_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=600&h=400&fit=crop",filename:"Honky Tonk Squad Goals.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:456789,mime_type:"image/jpeg"},{id:"nashville-photo-2",media_url:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=600&h=400&fit=crop",filename:"Broadway Live Music Night.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"upload",file_size:523456,mime_type:"image/jpeg"}],videos:[{id:"nashville-video-1",media_url:"/mock/videos/nashville-karaoke.mp4",filename:"Bride Karaoke Highlights.mp4",media_type:"video",metadata:{duration:67,width:1280,height:720,poster:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=400&h=300&fit=crop"},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:13456e3,mime_type:"video/mp4"}],audio:[{id:"nashville-audio-1",media_url:"/mock/audio/nashville-meetup.mp3",filename:"Voice Note - Meeting at Tootsies 9pm.mp3",media_type:"audio",metadata:{duration:5.2},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:145600,mime_type:"audio/mp3"}],files:[{id:"nashville-file-1",media_url:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=400&h=300&fit=crop",filename:"Grand Ole Opry VIP Tickets.jpg",media_type:"image",metadata:{isTicket:!0,venue:"Grand Ole Opry",date:"2025-11-09",extractedEvents:1},created_at:new Date(Date.now()-864e5*7).toISOString(),source:"upload",file_size:234567,mime_type:"image/jpeg"}],links:[{id:"nashville-link-1",url:"https://www.omnihotels.com/hotels/nashville",title:"Omni Nashville Hotel - Downtown",description:"Luxury hotel in the heart of Music City with rooftop pool and spa services.",domain:"omnihotels.com",image_url:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*20).toISOString(),source:"pinned",category:"Housing",tags:["hotel","luxury","downtown"]},{id:"nashville-link-2",url:"https://www.hattiebs.com/",title:"Hattie B's Hot Chicken - Nashville Original",description:"Famous Nashville hot chicken with multiple heat levels and Southern sides.",domain:"hattiebs.com",image_url:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*3).toISOString(),source:"chat",category:"Eats",tags:["chicken","nashville","spicy"]},{id:"nashville-link-3",url:"https://www.ryman.com/",title:"Ryman Auditorium - Mother Church of Country Music",description:"Historic venue with legendary country music performances and backstage tours.",domain:"ryman.com",image_url:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*5).toISOString(),source:"manual",category:"Activities",tags:["music","historic","tour"]}]},6:{tripId:6,tripTitle:"Johnson Family Summer Vacay",location:"Aspen, CO",photos:[{id:"aspen-photo-1",media_url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=400&fit=crop",filename:"Family Mountain Hike.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"chat",file_size:445678,mime_type:"image/jpeg"},{id:"aspen-photo-2",media_url:"https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=600&h=400&fit=crop",filename:"Multi-Gen Lodge Group.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*3).toISOString(),source:"upload",file_size:523789,mime_type:"image/jpeg"}],videos:[{id:"aspen-video-1",media_url:"/mock/videos/aspen-family.mp4",filename:"Family Adventure Montage.mp4",media_type:"video",metadata:{duration:89,width:1280,height:720,poster:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop"},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"chat",file_size:16789e3,mime_type:"video/mp4"}],audio:[{id:"aspen-audio-1",media_url:"/mock/audio/aspen-meetup.mp3",filename:"Voice Note - Breakfast at 8am lodge lobby.mp3",media_type:"audio",metadata:{duration:6.1},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:167890,mime_type:"audio/mp3"}],files:[{id:"aspen-file-1",media_url:"/mock/files/aspen-lodge-reservation.pdf",filename:"Little Nell Resort Confirmation.pdf",media_type:"document",metadata:{guests:7,nights:8},created_at:new Date(Date.now()-864e5*25).toISOString(),source:"upload",file_size:345600,mime_type:"application/pdf"}],links:[{id:"aspen-link-1",url:"https://www.thelittlenell.com/",title:"The Little Nell - Five-Star Aspen Resort",description:"Luxury ski-in/ski-out resort at the base of Aspen Mountain with world-class spa.",domain:"thelittlenell.com",image_url:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*45).toISOString(),source:"pinned",category:"Housing",tags:["resort","luxury","ski"]},{id:"aspen-link-2",url:"https://www.matsuhisaaspen.com/",title:"Matsuhisa Aspen - Renowned Japanese Cuisine",description:"World-famous Japanese restaurant by Nobu Matsuhisa with fresh sushi and mountain views.",domain:"matsuhisaaspen.com",image_url:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*4).toISOString(),source:"chat",category:"Eats",tags:["japanese","sushi","upscale"]}]},7:{tripId:7,tripTitle:"Fantasy Football Chat's Annual Golf Outing",location:"Phoenix, Arizona",photos:[{id:"phoenix-photo-1",media_url:"https://images.unsplash.com/photo-1535131749006-b7f58c99034b?w=600&h=400&fit=crop",filename:"Desert Golf Championship.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:434567,mime_type:"image/jpeg"}],videos:[{id:"phoenix-video-1",media_url:"/mock/videos/phoenix-golf.mp4",filename:"Hole-in-One Celebration.mp4",media_type:"video",metadata:{duration:45,width:1280,height:720,poster:"https://images.unsplash.com/photo-1535131749006-b7f58c99034b?w=400&h=300&fit=crop"},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:9876e3,mime_type:"video/mp4"}],audio:[{id:"phoenix-audio-1",media_url:"/mock/audio/phoenix-tee-time.mp3",filename:"Voice Note - Tee time moved to 7am.mp3",media_type:"audio",metadata:{duration:4.9},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:134500,mime_type:"audio/mp3"}],files:[{id:"phoenix-file-1",media_url:"/mock/files/tpc-scottsdale-booking.pdf",filename:"TPC Scottsdale Tee Times.pdf",media_type:"document",metadata:{players:6,rounds:3},created_at:new Date(Date.now()-864e5*12).toISOString(),source:"upload",file_size:267890,mime_type:"application/pdf"}],links:[{id:"phoenix-link-1",url:"https://www.tpc.com/scottsdale/",title:"TPC Scottsdale - Stadium Course",description:"Home of the Waste Management Phoenix Open with the famous 16th hole stadium.",domain:"tpc.com",image_url:"https://images.unsplash.com/photo-1535131749006-b7f58c99034b?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*15).toISOString(),source:"pinned",category:"Activities",tags:["golf","pga","tournament"]},{id:"phoenix-link-2",url:"https://www.fourseasons.com/scottsdale/",title:"Four Seasons Resort Scottsdale at Troon North",description:"Luxury desert resort with championship golf courses and spa in the Sonoran Desert.",domain:"fourseasons.com",image_url:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*20).toISOString(),source:"pinned",category:"Housing",tags:["resort","luxury","golf"]}]},5:{tripId:5,tripTitle:"Coachella Squad 2026",location:"Indio, CA",photos:[{id:"coachella-photo-1",media_url:"https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=600&h=400&fit=crop",filename:"Main Stage Festival Vibes.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:445678,mime_type:"image/jpeg"},{id:"coachella-photo-2",media_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=600&h=400&fit=crop",filename:"Ferris Wheel Desert Sunset.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"upload",file_size:523456,mime_type:"image/jpeg"},{id:"coachella-photo-3",media_url:"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=600&h=400&fit=crop",filename:"Squad Goals at Sahara Tent.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"chat",file_size:378901,mime_type:"image/jpeg"},{id:"coachella-photo-4",media_url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=400&fit=crop",filename:"Desert House Pool Party.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*3).toISOString(),source:"upload",file_size:456789,mime_type:"image/jpeg"},{id:"coachella-photo-5",media_url:"https://images.unsplash.com/photo-1540039155733-5bb30b53aa14?w=600&h=400&fit=crop",filename:"Food Truck Adventures.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*4).toISOString(),source:"chat",file_size:387654,mime_type:"image/jpeg"},{id:"coachella-photo-6",media_url:"https://images.unsplash.com/photo-1483032469466-b937c425697b?w=600&h=400&fit=crop",filename:"Late Night Art Installation.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*5).toISOString(),source:"upload",file_size:423567,mime_type:"image/jpeg"},{id:"coachella-photo-7",media_url:"https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=600&h=400&fit=crop",filename:"Morning Coffee Desert Views.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*6).toISOString(),source:"chat",file_size:398745,mime_type:"image/jpeg"},{id:"coachella-photo-8",media_url:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=600&h=400&fit=crop",filename:"Full Group Festival Outfits.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*7).toISOString(),source:"upload",file_size:467832,mime_type:"image/jpeg"}],videos:[{id:"coachella-video-1",media_url:"/mock/videos/coachella-highlights.mp4",filename:"Festival Highlights Reel.mp4",media_type:"video",metadata:{duration:95,width:1280,height:720},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:18456e3,mime_type:"video/mp4"},{id:"coachella-video-2",media_url:"/mock/videos/desert-house-tour.mp4",filename:"Epic Desert House Tour.mp4",media_type:"video",metadata:{duration:42,width:1280,height:720},created_at:new Date(Date.now()-864e5*3).toISOString(),source:"upload",file_size:8734e3,mime_type:"video/mp4"},{id:"coachella-video-3",media_url:"/mock/videos/sunset-timelapse.mp4",filename:"Desert Sunset Timelapse.mp4",media_type:"video",metadata:{duration:28,width:1280,height:720},created_at:new Date(Date.now()-864e5*5).toISOString(),source:"chat",file_size:5632e3,mime_type:"video/mp4"}],audio:[{id:"coachella-audio-1",media_url:"/mock/audio/coachella-meetup.mp3",filename:"Voice Note - Meet at Sahara tent 3pm.mp3",media_type:"audio",metadata:{duration:4.7},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:123456,mime_type:"audio/mp3"},{id:"coachella-audio-2",media_url:"/mock/audio/pool-party-plans.mp3",filename:"Pool party at house after headliner.mp3",media_type:"audio",metadata:{duration:8.2},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"chat",file_size:215432,mime_type:"audio/mp3"},{id:"coachella-audio-3",media_url:"/mock/audio/food-recommendations.mp3",filename:"Best food trucks to hit tomorrow.mp3",media_type:"audio",metadata:{duration:12.4},created_at:new Date(Date.now()-864e5*3).toISOString(),source:"chat",file_size:324567,mime_type:"audio/mp3"},{id:"coachella-audio-4",media_url:"/mock/audio/morning-meetup.mp3",filename:"Coffee meetup before gates open.mp3",media_type:"audio",metadata:{duration:6.8},created_at:new Date(Date.now()-864e5*4).toISOString(),source:"chat",file_size:178234,mime_type:"audio/mp3"}],files:[{id:"coachella-file-1",media_url:"https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?w=400&h=300&fit=crop",filename:"Weekend 1 Festival Passes.jpg",media_type:"image",metadata:{isTicket:!0,venue:"Coachella Valley Music Festival",date:"2026-04-10",extractedEvents:3},created_at:new Date(Date.now()-864e5*15).toISOString(),source:"upload",file_size:234567,mime_type:"image/jpeg"},{id:"coachella-file-2",media_url:"/mock/files/coachella-lineup-schedule.pdf",filename:"Coachella 2026 Lineup & Schedule.pdf",media_type:"document",metadata:{isSchedule:!0,extractedEvents:47,pageCount:8},created_at:new Date(Date.now()-864e5*20).toISOString(),source:"upload",file_size:2456789,mime_type:"application/pdf"},{id:"coachella-file-3",media_url:"https://images.unsplash.com/photo-1543892555-d79449d33e8b?w=400&h=300&fit=crop",filename:"Desert House Rental Receipt.jpg",media_type:"image",metadata:{isReceipt:!0,totalAmount:2400,splitCount:8,perPersonAmount:300,preferredMethod:"venmo"},created_at:new Date(Date.now()-864e5*25).toISOString(),source:"chat",file_size:345678,mime_type:"image/jpeg"},{id:"coachella-file-4",media_url:"/mock/files/festival-map.pdf",filename:"Coachella Festival Grounds Map.pdf",media_type:"document",metadata:{pageCount:2,extractedEvents:0},created_at:new Date(Date.now()-864e5*30).toISOString(),source:"upload",file_size:1234567,mime_type:"application/pdf"},{id:"coachella-file-5",media_url:"https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=400&h=300&fit=crop",filename:"VIP Camping Pass Confirmation.jpg",media_type:"image",metadata:{isTicket:!0,venue:"Coachella VIP Camping",date:"2026-04-10"},created_at:new Date(Date.now()-864e5*35).toISOString(),source:"upload",file_size:198765,mime_type:"image/jpeg"}],links:[{id:"coachella-link-1",url:"https://www.airbnb.com/rooms/coachella-desert-house",title:"Desert House Coachella - 8 Guests",description:"Stunning desert house with pool, perfect for festival groups.",domain:"airbnb.com",image_url:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*30).toISOString(),source:"pinned",category:"Housing",tags:["airbnb","desert","festival"]},{id:"coachella-link-2",url:"https://www.yelp.com/biz/pappy-and-harriets-pioneertown",title:"Pappy & Harriet's Pioneertown Palace",description:"Legendary desert venue and restaurant, perfect for pre-festival dinner.",domain:"yelp.com",image_url:"https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*28).toISOString(),source:"manual",category:"Eats",tags:["restaurant","desert","iconic"]},{id:"coachella-link-3",url:"https://www.uber.com/us/en/ride/uber-shuttle/",title:"Uber Festival Shuttle Service",description:"Pre-book shuttle rides to avoid festival traffic and parking.",domain:"uber.com",image_url:"https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*25).toISOString(),source:"pinned",category:"Activities",tags:["transportation","shuttle","festival"]},{id:"coachella-link-4",url:"https://www.coachella.com/lineup",title:"Coachella 2026 Official Lineup",description:"Full artist lineup and set times for both weekends.",domain:"coachella.com",image_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*40).toISOString(),source:"pinned",category:"Activities",tags:["lineup","official","schedule"]},{id:"coachella-link-5",url:"https://www.wholefoodsmarket.com/stores/palmdesert",title:"Whole Foods Market Palm Desert",description:"Stock up on snacks and supplies before heading to the festival.",domain:"wholefoodsmarket.com",image_url:"https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*22).toISOString(),source:"manual",category:"Eats",tags:["grocery","supplies","healthy"]}]},9:{tripId:9,tripTitle:"Spring Break Cancun 2026",location:"Cancun, Mexico",photos:[{id:"cancun-photo-1",media_url:"https://images.unsplash.com/photo-1544552866-d3ed42536cfd?w=600&h=400&fit=crop",filename:"Beach Day Paradise.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:445678,mime_type:"image/jpeg"},{id:"cancun-photo-2",media_url:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=600&h=400&fit=crop",filename:"Resort Pool Vibes.jpg",media_type:"image",metadata:{width:800,height:600},created_at:new Date(Date.now()-864e5*2).toISOString(),source:"upload",file_size:523456,mime_type:"image/jpeg"}],videos:[{id:"cancun-video-1",media_url:"/mock/videos/beach-volleyball.mp4",filename:"Epic Beach Volleyball Game.mp4",media_type:"video",metadata:{duration:45,width:1280,height:720},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:8456e3,mime_type:"video/mp4"}],audio:[{id:"cancun-audio-1",media_url:"/mock/audio/dinner-plans.mp3",filename:"Voice Note - Dinner reservations confirmed.mp3",media_type:"audio",metadata:{duration:7.2},created_at:new Date(Date.now()-864e5*1).toISOString(),source:"chat",file_size:189432,mime_type:"audio/mp3"}],files:[{id:"cancun-file-1",media_url:"https://images.unsplash.com/photo-1544966503-7adce1a35804?w=400&h=300&fit=crop",filename:"Flight Confirmation - Mexico City.jpg",media_type:"image",metadata:{isTicket:!0,venue:"AeroMexico Flight AM445",date:"2026-03-15"},created_at:new Date(Date.now()-864e5*10).toISOString(),source:"upload",file_size:234567,mime_type:"image/jpeg"},{id:"cancun-file-2",media_url:"/mock/files/hotel-confirmation.pdf",filename:"Hotel Riu Cancun Confirmation.pdf",media_type:"document",metadata:{extractedEvents:2,pageCount:3},created_at:new Date(Date.now()-864e5*15).toISOString(),source:"upload",file_size:1456789,mime_type:"application/pdf"},{id:"cancun-file-3",media_url:"https://images.unsplash.com/photo-1586227740560-8cf2732c1531?w=400&h=300&fit=crop",filename:"Dinner Receipt - La Isla.jpg",media_type:"image",metadata:{isReceipt:!0,totalAmount:240,splitCount:6,perPersonAmount:40,preferredMethod:"venmo"},created_at:new Date(Date.now()-864e5*3).toISOString(),source:"chat",file_size:198765,mime_type:"image/jpeg"},{id:"cancun-file-4",media_url:"/mock/files/cancun-itinerary.pdf",filename:"Cancun Week Itinerary.pdf",media_type:"document",metadata:{isSchedule:!0,extractedEvents:12,pageCount:4},created_at:new Date(Date.now()-864e5*20).toISOString(),source:"upload",file_size:987654,mime_type:"application/pdf"}],links:[{id:"cancun-link-1",url:"https://www.airbnb.com/rooms/beachfront-villa-cancun",title:"Beachfront Villa with Private Pool",description:"Luxury 4BR villa steps from the beach, perfect for groups",domain:"airbnb.com",image_url:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=200&fit=crop",created_at:new Date(Date.now()-864e5*25).toISOString(),source:"pinned",category:"Housing",tags:["beachfront","villa","pool"]}]}};class q{static isUsingMockData(){return this.USE_MOCK_DATA}static getTripMockData(t){if(!this.USE_MOCK_DATA)return null;const a=typeof t=="string"?parseInt(t,10):t;return Ut[a]||null}static getMockMediaItems(t){const a=this.getTripMockData(t);return a?[...a.photos,...a.videos,...a.audio,...a.files]:[]}static getMockLinkItems(t){const a=this.getTripMockData(t);return a?a.links:[]}static getMockMediaByType(t,a){const i=this.getTripMockData(t);return i?i[a]||[]:[]}static getMockLinksByCategory(t,a){const i=this.getTripMockData(t);return i?a?i.links.filter(m=>m.category===a):i.links:[]}static async isEnabled(){return await qe("TRIPS_DEMO_MODE"),!0}static getTripMediaItems(t){return this.getMockMediaItems(t)}static getTripLinkItems(t){return this.getMockLinkItems(t)}}V(q,"USE_MOCK_DATA",!0);class E{static getUniversalMockData(t){const a=be(t),i=this.fallbackPhotos.map((l,p)=>({...l,id:`${t}-photo-${p+1}`})),m=this.fallbackVideos.map((l,p)=>({...l,id:`${t}-video-${p+1}`})),n=this.fallbackAudio.map((l,p)=>({...l,id:`${t}-audio-${p+1}`})),r=this.fallbackFiles.map((l,p)=>({...l,id:`${t}-file-${p+1}`})),h=this.fallbackLinks.map((l,p)=>({...l,id:`${t}-link-${p+1}`}));return a==="pro"&&r.push({id:`${t}-pro-file-1`,media_url:"/mock/files/tour_rider.pdf",filename:"Tour Rider Requirements.pdf",media_type:"document",metadata:{extractedEvents:5},created_at:new Date(Date.now()-12e5).toISOString(),source:"upload",file_size:1024e3,mime_type:"application/pdf"}),a==="event"&&r.push({id:`${t}-event-file-1`,media_url:"/mock/files/speaker_guidelines.pdf",filename:"Speaker Guidelines.pdf",media_type:"document",metadata:{extractedEvents:3},created_at:new Date(Date.now()-15e5).toISOString(),source:"upload",file_size:896e3,mime_type:"application/pdf"}),{photos:i,videos:m,audio:n,files:r,links:h}}static getCombinedMediaItems(t){const a=this.getUniversalMockData(t);return[...a.photos,...a.videos,...a.audio,...a.files]}static getLinkItems(t){return this.getUniversalMockData(t).links}}V(E,"fallbackPhotos",[{id:"fallback-photo-1",media_url:"/mock/images/travel-selfie.jpg",filename:"Group Travel Selfie.jpg",media_type:"image",metadata:{width:1920,height:1080},created_at:new Date(Date.now()-36e5).toISOString(),source:"chat",file_size:2457600,mime_type:"image/jpeg"},{id:"fallback-photo-2",media_url:"/mock/images/group-mountain-photo.jpg",filename:"Mountain Adventure.jpg",media_type:"image",metadata:{width:1920,height:1080},created_at:new Date(Date.now()-72e5).toISOString(),source:"upload",file_size:3145728,mime_type:"image/jpeg"},{id:"fallback-photo-3",media_url:"/mock/images/dinner-receipt-preview.jpg",filename:"Group Dinner.jpg",media_type:"image",metadata:{width:1920,height:1080},created_at:new Date(Date.now()-108e5).toISOString(),source:"chat",file_size:1843200,mime_type:"image/jpeg"},{id:"fallback-photo-4",media_url:"/mock/images/wedding-ceremony.jpg",filename:"Ceremony Moment.jpg",media_type:"image",metadata:{width:1920,height:1080},created_at:new Date(Date.now()-144e5).toISOString(),source:"upload",file_size:2621440,mime_type:"image/jpeg"}]),V(E,"fallbackVideos",[{id:"fallback-video-1",media_url:"/mock/videos/team-celebration.mp4",filename:"Team Celebration.mp4",media_type:"video",metadata:{duration:45,width:1920,height:1080},created_at:new Date(Date.now()-54e5).toISOString(),source:"chat",file_size:15728640,mime_type:"video/mp4"},{id:"fallback-video-2",media_url:"/mock/videos/venue-tour.mp4",filename:"Venue Walkthrough.mp4",media_type:"video",metadata:{duration:120,width:1920,height:1080},created_at:new Date(Date.now()-9e6).toISOString(),source:"upload",file_size:45875200,mime_type:"video/mp4"}]),V(E,"fallbackAudio",[{id:"fallback-audio-1",media_url:"/mock/audio/voice-note-1.mp3",filename:"Voice Note - Planning Discussion.mp3",media_type:"audio",metadata:{duration:35},created_at:new Date(Date.now()-36e5).toISOString(),source:"chat",file_size:56e4,mime_type:"audio/mpeg"},{id:"fallback-audio-2",media_url:"/mock/audio/voice-note-2.mp3",filename:"Voice Note - Logistics Update.mp3",media_type:"audio",metadata:{duration:28},created_at:new Date(Date.now()-72e5).toISOString(),source:"chat",file_size:448e3,mime_type:"audio/mpeg"}]),V(E,"fallbackFiles",[{id:"fallback-file-1",media_url:"/mock/files/dinner_receipt.jpg",filename:"Group Dinner Receipt.jpg",media_type:"document",metadata:{isReceipt:!0,totalAmount:127.45,splitCount:4,perPersonAmount:31.86,preferredMethod:"venmo"},created_at:new Date(Date.now()-18e5).toISOString(),source:"upload",file_size:2048e3,mime_type:"image/jpeg"},{id:"fallback-file-2",media_url:"/mock/files/dodgers_tickets.pdf",filename:"Event Tickets.pdf",media_type:"document",metadata:{isTicket:!0,extractedEvents:1},created_at:new Date(Date.now()-54e5).toISOString(),source:"upload",file_size:512e3,mime_type:"application/pdf"},{id:"fallback-file-3",media_url:"/mock/images/conference-schedule-preview.jpg",filename:"Event Schedule.jpg",media_type:"document",metadata:{isSchedule:!0,extractedEvents:12},created_at:new Date(Date.now()-9e6).toISOString(),source:"chat",file_size:1536e3,mime_type:"image/jpeg"},{id:"fallback-file-4",media_url:"/mock/files/travel_itinerary.pdf",filename:"Travel Itinerary.pdf",media_type:"document",metadata:{extractedEvents:8},created_at:new Date(Date.now()-126e5).toISOString(),source:"upload",file_size:768e3,mime_type:"application/pdf"}]),V(E,"fallbackLinks",[{id:"fallback-link-1",url:"https://airbnb.com/rooms/12345",title:"Beautiful Downtown Loft - Perfect for Groups",description:"Spacious 3BR/2BA loft in the heart of downtown. Sleeps 8 comfortably with modern amenities.",domain:"airbnb.com",image_url:"/mock/images/airbnb-listing.jpg",created_at:new Date(Date.now()-36e5).toISOString(),source:"chat",category:"Housing"},{id:"fallback-link-2",url:"https://opentable.com/restaurant/profile/54321",title:"Sunset Rooftop Restaurant - Reservations Available",description:"Award-winning rooftop dining with panoramic city views. Perfect for group celebrations.",domain:"opentable.com",image_url:"/mock/images/restaurant-rooftop.jpg",created_at:new Date(Date.now()-72e5).toISOString(),source:"manual",category:"Eats"},{id:"fallback-link-3",url:"https://viator.com/tours/city-walking-tour",title:"Historic City Walking Tour - Small Groups Welcome",description:"Discover hidden gems and local history on this 3-hour guided walking tour.",domain:"viator.com",image_url:"/mock/images/walking-tour.jpg",created_at:new Date(Date.now()-108e5).toISOString(),source:"pinned",category:"Activities"},{id:"fallback-link-4",url:"https://eventbrite.com/e/concert-tickets",title:"Live Music Concert - Group Discount Available",description:"Don't miss this incredible live performance. Group rates available for 6+ people.",domain:"eventbrite.com",created_at:new Date(Date.now()-144e5).toISOString(),source:"chat",category:"Activities"}]);const Vt=o=>{const[t,a]=g.useState([]),[i,m]=g.useState([]),[n,r]=g.useState(!0),{isDemoMode:h}=ut(),l=g.useCallback(async()=>{r(!0);try{let c=[];const x=be(o);if(h||q.isEnabled())if(x==="consumer"&&q.getTripMediaItems(parseInt(o)).length>0)c=q.getTripMediaItems(parseInt(o));else if(x==="pro"&&re[o]){const N=re[o];c=[...(N.photos||[]).map(b=>({...b,media_type:"image"})),...(N.videos||[]).map(b=>({...b,media_type:"video"})),...(N.audio||[]).map(b=>({...b,media_type:"audio"})),...(N.files||[]).map(b=>({...b,media_type:"document"}))]}else if(x==="event"&&oe[o]){const N=oe[o];c=[...(N.photos||[]).map(b=>({...b,media_type:"image"})),...(N.videos||[]).map(b=>({...b,media_type:"video"})),...(N.audio||[]).map(b=>({...b,media_type:"audio"})),...(N.files||[]).map(b=>({...b,media_type:"document"}))]}else c=E.getCombinedMediaItems(o);else{const[N,b]=await Promise.all([te.from("trip_media_index").select("*").eq("trip_id",o).order("created_at",{ascending:!1}),te.from("trip_files").select("*").eq("trip_id",o).order("created_at",{ascending:!1})]);c=[...(N.data||[]).map(y=>({id:y.id,media_url:y.media_url,filename:y.filename||"Untitled",media_type:y.media_type,metadata:y.metadata||{},created_at:y.created_at,source:"chat"})),...(b.data||[]).map(y=>({id:y.id,media_url:`/storage/trip-files/${y.name}`,filename:y.name,media_type:y.file_type,metadata:{extracted_events:y.extracted_events},created_at:y.created_at,source:"upload"}))]}a(c)}catch(c){console.error("Error fetching media items:",c),a(h?E.getCombinedMediaItems(o):[])}finally{r(!1)}},[o,h]),p=g.useCallback(async()=>{try{let c=[];const x=be(o);if(h||q.isEnabled())x==="consumer"&&q.getTripLinkItems(parseInt(o)).length>0?c=q.getTripLinkItems(parseInt(o)):x==="pro"&&re[o]?c=re[o].links||[]:x==="event"&&oe[o]?c=oe[o].links||[]:c=E.getLinkItems(o);else{const[N,b]=await Promise.all([te.from("trip_link_index").select("*").eq("trip_id",o).order("created_at",{ascending:!1}),te.from("trip_links").select("*").eq("trip_id",o).order("created_at",{ascending:!1})]);c=[...(N.data||[]).map(y=>({id:y.id,url:y.url,title:y.og_title||"Untitled Link",description:y.og_description||"",domain:y.domain||new URL(y.url).hostname,image_url:y.og_image_url,created_at:y.created_at,source:"chat",category:"Activities",tags:[]})),...(b.data||[]).map(y=>({id:y.id,url:y.url,title:y.title||"Untitled Link",description:y.description||"",domain:new URL(y.url).hostname,image_url:void 0,created_at:y.created_at,source:"manual",category:y.category||"Activities",tags:[]}))]}m(c)}catch(c){console.error("Error fetching link items:",c),m(h?E.getLinkItems(o):[])}},[o,h]);g.useEffect(()=>{l(),p()},[l,p]);const s=g.useCallback(c=>c==="all"?[...t,...i]:c==="photos"?t.filter(x=>x.media_type==="image"):c==="videos"?t.filter(x=>x.media_type==="video"):c==="audio"?t.filter(x=>x.media_type==="audio"):c==="files"?t.filter(x=>x.media_type==="document"):c==="links"?i:t,[t,i]),u=g.useCallback(()=>[...t,...i].sort((c,x)=>new Date(x.created_at).getTime()-new Date(c.created_at).getTime()),[t,i]);return{mediaItems:t,linkItems:i,loading:n,totalItems:t.length+i.length,filterByType:s,getAllItemsSorted:u,refetch:()=>{l(),p()}}},Ht=({method:o,size:t=20})=>{const a={size:t,className:Gt(o)};switch(o){case"venmo":return e.jsx(lt,{...a});case"splitwise":return e.jsx(nt,{...a});case"cashapp":return e.jsx(we,{...a});case"zelle":return e.jsx(ot,{...a});default:return e.jsx(we,{...a})}},Gt=o=>{switch(o){case"venmo":return"text-blue-400";case"splitwise":return"text-green-400";case"cashapp":return"text-emerald-400";case"zelle":return"text-purple-400";default:return"text-gray-400"}},qt=(o,t,a)=>{const i=t.toFixed(2);switch(o){case"venmo":return`venmo://paycharge?txn=pay&recipients=${encodeURIComponent(a)}&amount=${i}&note=${encodeURIComponent("Trip expense")}`;case"cashapp":return`https://cash.app/$${encodeURIComponent(a)}/${i}`;case"zelle":return"https://www.zellepay.com/send-money";case"splitwise":return"https://secure.splitwise.com/";default:return null}},Ae=()=>{const[o,t]=g.useState(!1),[a,i]=g.useState(null);return{resolvePlaceName:async r=>{if(!r.trim())return{success:!1,error:"Place name is required"};t(!0),i(null);try{const{data:h,error:l}=await te.functions.invoke("venue-enricher",{body:{action:"resolve_place_links",query:r}});if(l)throw l;return h.success?{success:!0,place:h.place,linkOptions:h.linkOptions}:{success:!1,error:h.error||"Failed to resolve place"}}catch(h){const l=h instanceof Error?h.message:"Unknown error occurred";return i(l),{success:!1,error:l}}finally{t(!1)}},categorizePlaceType:r=>r.includes("lodging")||r.includes("hotel")?"housing":r.includes("restaurant")||r.includes("food")||r.includes("meal_takeaway")?"eats":r.includes("tourist_attraction")||r.includes("museum")||r.includes("amusement_park")?"day-activities":r.includes("night_club")||r.includes("bar")?"nightlife":r.includes("gym")||r.includes("spa")?"fitness":r.includes("travel_agency")||r.includes("airport")||r.includes("bus_station")?"transportation":"other",isLoading:o,error:a}},Wt=[{id:"housing",label:"Housing",icon:"ð ",description:"Hotels, Airbnbs, hostels"},{id:"eats",label:"Eats",icon:"ð½ï¸",description:"Restaurants, cafes, food tours"},{id:"day-activities",label:"Day Activities",icon:"âï¸",description:"Museums, tours, attractions"},{id:"nightlife",label:"Nightlife",icon:"ð",description:"Bars, clubs, evening events"},{id:"fitness",label:"Fitness",icon:"ðª",description:"Gyms, yoga, sports activities"},{id:"reservations",label:"Reservations",icon:"ð",description:"Restaurant bookings, confirmations"},{id:"transportation",label:"Transportation",icon:"âï¸",description:"Flights, cars, rideshares"},{id:"essentials",label:"Essentials",icon:"ð",description:"Packing, weather, documents"},{id:"other",label:"Other",icon:"ð",description:"Everything else"}],Kt=[{id:"1",title:"Charming 3BR Apartment in Montmartre",url:"https://airbnb.com/rooms/123",postedBy:"Emma"},{id:"2",title:"L'Ami Jean - Traditional Bistro",url:"https://example.com/restaurant",postedBy:"Jake"}],Jt=({isOpen:o,onClose:t})=>{const[a,i]=g.useState("place"),[m,n]=g.useState(""),[r,h]=g.useState(""),[l,p]=g.useState(""),[s,u]=g.useState(""),[c,x]=g.useState(""),[N,b]=g.useState(!1),[y,S]=g.useState(!1),[k,C]=g.useState([]),[v,z]=g.useState(!1),[I,L]=g.useState(null),[F,$]=g.useState([]),[f,_]=g.useState(null),[j,A]=g.useState(!1),{resolvePlaceName:M,categorizePlaceType:O,isLoading:U}=Ae(),_e=(w,P)=>{const R=[];return Kt.forEach(d=>{let B=0;if(d.url===w)B=1;else if(w&&d.url)try{const Z=new URL(w).hostname,ie=new URL(d.url).hostname;Z===ie&&(B=Math.max(B,.7))}catch{}if(P&&d.title){const Z=P.toLowerCase().split(" "),ie=d.title.toLowerCase().split(" "),Ve=Z.filter(pe=>pe.length>3&&ie.some(Ne=>Ne.includes(pe)||pe.includes(Ne))).length/Math.max(Z.length,ie.length);B=Math.max(B,Ve)}B>.6&&R.push({id:d.id,title:d.title,url:d.url,postedBy:d.postedBy,similarity:B})}),R.sort((d,B)=>B.similarity-d.similarity)},Re=w=>{if(n(w),w||r){const P=_e(w,r);C(P),z(P.length>0)}},$e=w=>{if(h(w),m||w){const P=_e(m,w);C(P),z(P.length>0)}},Fe=async()=>{if(!s.trim())return;const w=await M(s);if(w.success&&w.place&&w.linkOptions){L(w.place),$(w.linkOptions),h(w.place.name),p(w.place.formatted_address);const P=O(w.place.types);!c&&!N&&x(P),A(!0);const R=w.linkOptions.find(d=>d.isPrimary)||w.linkOptions[0];_(R),n(R.url)}},Be=async w=>{w.preventDefault(),S(!0);try{let P=m,R=r;a==="place"&&f&&(P=f.url,R=r||(I==null?void 0:I.name)||"");let d=c;!c&&N&&(d=await Ee(P,R,l)),d||(d="other"),console.log("Adding link:",{url:P,title:R,description:l,category:d,linkType:f==null?void 0:f.type,fromPlace:a==="place"}),t(),Ue()}catch(P){console.error("Error adding link:",P)}finally{S(!1)}},Ee=async(w,P,R)=>{const d=`${P} ${R} ${w}`.toLowerCase();return d.includes("airbnb")||d.includes("hotel")||d.includes("hostel")||d.includes("apartment")||d.includes("accommodation")||d.includes("booking.com")||d.includes("vrbo")||d.includes("stay")||d.includes("lodge")?"housing":d.includes("flight")||d.includes("airline")||d.includes("airport")||d.includes("uber")||d.includes("lyft")||d.includes("rental car")||d.includes("train")||d.includes("bus")||d.includes("transfer")||d.includes("expedia")||d.includes("kayak")||d.includes("car rental")?"transportation":d.includes("reservation")||d.includes("booking")||d.includes("opentable")||d.includes("resy")||d.includes("confirmed")||d.includes("table")||d.includes("tickets")||d.includes("seats")||d.includes("confirmation")?"reservations":d.includes("packing")||d.includes("checklist")||d.includes("weather")||d.includes("passport")||d.includes("visa")||d.includes("insurance")||d.includes("documents")||d.includes("emergency")||d.includes("essentials")||d.includes("what to bring")||d.includes("travel tips")?"essentials":d.includes("restaurant")||d.includes("cafe")||d.includes("food")||d.includes("menu")||d.includes("dining")||d.includes("michelin")||d.includes("cuisine")||d.includes("brunch")||d.includes("lunch")||d.includes("dinner")||d.includes("bakery")?"eats":d.includes("bar")||d.includes("club")||d.includes("nightlife")||d.includes("cocktail")||d.includes("pub")||d.includes("lounge")||d.includes("drinks")||d.includes("party")||d.includes("rooftop")?"nightlife":d.includes("gym")||d.includes("fitness")||d.includes("yoga")||d.includes("workout")||d.includes("sports")||d.includes("running")||d.includes("hiking")||d.includes("swimming")||d.includes("tennis")?"fitness":d.includes("museum")||d.includes("tour")||d.includes("attraction")||d.includes("activity")||d.includes("experience")||d.includes("sightseeing")||d.includes("gallery")||d.includes("monument")||d.includes("park")||d.includes("excursion")||d.includes("adventure")?"day-activities":"other"},Ue=()=>{i("place"),n(""),h(""),p(""),u(""),x(""),b(!1),C([]),z(!1),L(null),$([]),_(null),A(!1)};return o?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add Link"}),e.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:e.jsx(ae,{size:20})})]}),e.jsxs("form",{onSubmit:Be,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex bg-slate-900/50 rounded-lg p-1 border border-slate-600",children:[e.jsxs("button",{type:"button",onClick:()=>i("place"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all ${a==="place"?"bg-blue-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[e.jsx(T,{size:16,className:"inline mr-2"}),"Add by Place Name"]}),e.jsxs("button",{type:"button",onClick:()=>i("url"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all ${a==="url"?"bg-blue-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[e.jsx(me,{size:16,className:"inline mr-2"}),"Add by URL"]})]}),a==="place"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Place Name *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(T,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:s,onChange:w=>u(w.target.value),placeholder:"e.g., Gotham Hotel New York",required:a==="place",className:"w-full bg-slate-900/50 border border-slate-600 rounded-lg pl-10 pr-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"})]}),e.jsx(D,{type:"button",onClick:Fe,disabled:!s.trim()||U,className:"bg-blue-600 hover:bg-blue-700",children:U?"Searching...":"Search"})]})]}),a==="url"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Link URL *"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"url",value:m,onChange:w=>Re(w.target.value),placeholder:"https://...",required:a==="url",className:"w-full bg-slate-900/50 border border-slate-600 rounded-lg pl-10 pr-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"})]})]}),j&&I&&F.length>0&&e.jsxs("div",{className:"p-4 bg-slate-900/30 rounded-lg border border-slate-700",children:[e.jsx("div",{className:"flex items-start gap-3 mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-white",children:I.name}),e.jsx("p",{className:"text-sm text-slate-400",children:I.formatted_address}),I.rating&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ct,{size:14,className:"text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-slate-300",children:I.rating})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Choose Link Type:"}),F.map(w=>e.jsx("button",{type:"button",onClick:()=>{_(w),n(w.url)},className:`w-full p-3 rounded-lg border text-left transition-all ${(f==null?void 0:f.type)===w.type?"bg-blue-600/20 border-blue-600 text-white":"bg-slate-900/30 border-slate-700 text-slate-300 hover:border-slate-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.label}),e.jsx("div",{className:"text-xs text-slate-400",children:w.description})]}),e.jsx(Q,{size:16,className:"text-slate-400"})]})},w.type))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:r,onChange:w=>$e(w.target.value),placeholder:"Give this link a title...",required:!0,className:"w-full bg-slate-900/50 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"})]}),v&&k.length>0&&e.jsxs("div",{className:"p-3 bg-amber-900/20 border border-amber-600/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(We,{size:16,className:"text-amber-400"}),e.jsx("span",{className:"text-sm font-medium text-amber-300",children:"Similar links found"})]}),k.slice(0,2).map(w=>e.jsxs("div",{className:"text-xs text-amber-200 mb-1",children:['"',w.title,'" by ',w.postedBy," ",w.similarity>.9?"(exact match)":"(similar)"]},w.id)),e.jsx("div",{className:"text-xs text-amber-300 mt-2",children:"Continue if you're sure this is different"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:l,onChange:w=>p(w.target.value),placeholder:"Add some context or notes...",rows:3,className:"w-full bg-slate-900/50 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-500 resize-none"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-900/30 rounded-lg border border-slate-700/50",children:[e.jsx("input",{type:"checkbox",id:"ai-sorting",checked:N,onChange:w=>b(w.target.checked),className:"w-4 h-4 text-blue-600 bg-slate-800 border-slate-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"ai-sorting",className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(je,{size:16,className:"text-blue-400"}),"Let AI categorize this link automatically"]})]}),!N&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Category (optional)"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-64 overflow-y-auto",children:Wt.map(w=>e.jsxs("button",{type:"button",onClick:()=>x(w.id===c?"":w.id),className:`flex items-center gap-3 p-3 rounded-lg border text-left transition-all ${c===w.id?"bg-blue-600/20 border-blue-600 text-white":"bg-slate-900/30 border-slate-700 text-slate-300 hover:border-slate-600"}`,children:[e.jsx("span",{className:"text-lg",children:w.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.label}),e.jsx("div",{className:"text-xs text-slate-400",children:w.description})]})]},w.id))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(D,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),e.jsx(D,{type:"submit",disabled:y||a==="place"&&!f,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:y?"Adding...":"Add Link"})]})]})]})}):null},ee=({items:o,type:t})=>{const[a,i]=Ke.useState(null),[m,n]=g.useState(!1),r=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=s=>{if(!s)return"";const u=1024,c=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(s)/Math.log(u));return parseFloat((s/Math.pow(u,x)).toFixed(1))+" "+c[x]},l=s=>{var u,c;if((u=s.metadata)!=null&&u.preferredMethod&&((c=s.metadata)!=null&&c.perPersonAmount)){const x=qt(s.metadata.preferredMethod,s.metadata.perPersonAmount,"Trip Member");x&&window.open(x,"_blank")}};if(t==="links"){const s=o,u=a?s.filter(c=>c.category===a):s;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs(D,{variant:a===null?"default":"outline",size:"sm",onClick:()=>i(null),className:"text-xs",children:["All Links (",s.length,")"]}),e.jsxs(D,{variant:a==="Housing"?"default":"outline",size:"sm",onClick:()=>i("Housing"),className:"text-xs",children:["Housing (",s.filter(c=>c.category==="Housing").length,")"]}),e.jsxs(D,{variant:a==="Eats"?"default":"outline",size:"sm",onClick:()=>i("Eats"),className:"text-xs",children:["Eats (",s.filter(c=>c.category==="Eats").length,")"]}),e.jsxs(D,{variant:a==="Activities"?"default":"outline",size:"sm",onClick:()=>i("Activities"),className:"text-xs",children:["Activities (",s.filter(c=>c.category==="Activities").length,")"]}),e.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"text-xs ml-auto",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),"+ Add Link"]})]}),s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Links shared in chat will appear here automatically"})]}):null,u.length>0&&u.map(c=>e.jsx("div",{className:"bg-card border rounded-lg p-4 hover:bg-card/80 transition-colors",children:e.jsxs("div",{className:"flex gap-4",children:[c.image_url&&e.jsx("img",{src:c.image_url,alt:c.title,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-foreground font-medium text-sm mb-1 truncate",children:c.title}),e.jsx("p",{className:"text-muted-foreground text-xs mb-2 line-clamp-2",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{children:c.domain}),e.jsx("span",{children:r(c.created_at)}),e.jsx(G,{variant:"outline",className:"text-xs",children:c.source==="chat"?"From chat":c.source==="pinned"?"From pins":"Manual"}),c.category&&e.jsx(G,{variant:"secondary",className:"text-xs",children:c.category})]}),e.jsxs(D,{size:"sm",variant:"outline",onClick:()=>window.open(c.url,"_blank"),className:"text-xs",children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"Open"]})]})]})]})},c.id)),e.jsx(Jt,{isOpen:m,onClose:()=>n(!1)})]})}const p=o;if(t==="photos"||t==="videos")return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:[t==="photos"?"Photos":"Videos"," (",p.length,")"]}),e.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>{alert(`Add ${t==="photos"?"Photo":"Video"} functionality - would open file picker for ${t}`)},className:"text-xs",children:[t==="photos"?e.jsx(ue,{className:"w-4 h-4 mr-1"}):e.jsx(fe,{className:"w-4 h-4 mr-1"}),"+ Add ",t==="photos"?"Photo":"Video"]})]}),p.length===0?e.jsxs("div",{className:"text-center py-8",children:[t==="photos"?e.jsx(ue,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}):e.jsx(fe,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[t.charAt(0).toUpperCase()+t.slice(1)," shared in chat will appear here"]})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map(s=>{var u;return e.jsxs("div",{className:"group relative aspect-square rounded-lg overflow-hidden bg-muted cursor-pointer",onClick:()=>{if(s.media_type==="video"){const c=document.createElement("video");c.src=s.media_url,c.controls=!0,c.autoplay=!0,c.style.cssText="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;max-width:90vw;max-height:90vh;background:black;";const x=document.createElement("div");x.style.cssText="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);z-index:9998;display:flex;align-items:center;justify-content:center;",x.onclick=()=>document.body.removeChild(x),x.appendChild(c),document.body.appendChild(x)}},children:[s.media_type==="image"?e.jsx("img",{src:s.media_url,alt:s.filename,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):e.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[e.jsx("video",{src:s.media_url,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:e.jsx(st,{className:"w-12 h-12 text-white"})}),((u=s.metadata)==null?void 0:u.duration)&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:[Math.floor(s.metadata.duration/60),":",(s.metadata.duration%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors",children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"flex items-center gap-1",children:s.source==="chat"?e.jsx(de,{className:"w-4 h-4 text-white bg-black/50 rounded p-0.5"}):e.jsx(Q,{className:"w-4 h-4 text-white bg-black/50 rounded p-0.5"})})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("p",{className:"text-white text-sm font-medium truncate",children:s.filename}),e.jsxs("p",{className:"text-white/80 text-xs",children:[s.source==="chat"?"From chat":"Uploaded"," â¢ ",r(s.created_at)]})]})]})]},s.id)})})]});if(t==="files"){const s=p.filter(u=>{var c,x,N;return u.media_type==="document"||u.media_type==="image"&&(((c=u.metadata)==null?void 0:c.isSchedule)||((x=u.metadata)==null?void 0:x.isReceipt)||((N=u.metadata)==null?void 0:N.isTicket))});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Files (",s.length,")"]}),e.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>{alert("Add File functionality - would open file picker for documents, receipts, schedules")},className:"text-xs",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),"+ Add File"]})]}),s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(le,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Documents, receipts, and schedules shared in chat will appear here"})]}):e.jsx("div",{className:"space-y-3",children:s.map(u=>{var c,x,N,b,y,S,k,C,v,z;return e.jsx("div",{className:"bg-card border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(c=u.metadata)!=null&&c.isReceipt?e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:u.media_url,alt:u.filename,className:"w-12 h-12 rounded-lg object-cover"})}):(x=u.metadata)!=null&&x.isSchedule?e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:u.media_url,alt:u.filename,className:"w-12 h-12 rounded-lg object-cover"})}):e.jsx("div",{className:"flex-shrink-0",children:e.jsx(le,{className:"text-blue-400",size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-foreground font-medium truncate",children:u.filename}),((N=u.metadata)==null?void 0:N.isReceipt)&&e.jsx(G,{variant:"outline",className:"text-green-400 border-green-400/50",children:"Receipt"}),((b=u.metadata)==null?void 0:b.isTicket)&&e.jsx(G,{variant:"outline",className:"text-blue-400 border-blue-400/50",children:"Ticket"}),((y=u.metadata)==null?void 0:y.isSchedule)&&e.jsx(G,{variant:"outline",className:"text-orange-400 border-orange-400/50",children:"Schedule"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:h(u.file_size)}),e.jsx("span",{children:u.source==="chat"?"From chat":"Uploaded"}),e.jsx("span",{children:r(u.created_at)}),((S=u.metadata)==null?void 0:S.extractedEvents)&&e.jsxs(G,{variant:"outline",className:"text-orange-400 border-orange-400/50",children:[u.metadata.extractedEvents," events"]})]}),((k=u.metadata)==null?void 0:k.isReceipt)&&((C=u.metadata)==null?void 0:C.totalAmount)&&e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(we,{size:14,className:"text-green-400"}),e.jsxs("span",{className:"text-foreground text-sm font-medium",children:["$",u.metadata.totalAmount.toFixed(2)]})]}),u.metadata.splitCount&&u.metadata.perPersonAmount&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bt,{size:14,className:"text-blue-400"}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["$",u.metadata.perPersonAmount.toFixed(2)," each (",u.metadata.splitCount," people)"]})]}),u.metadata.preferredMethod&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{method:u.metadata.preferredMethod,size:14}),e.jsx("span",{className:"text-muted-foreground text-sm capitalize",children:u.metadata.preferredMethod})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[((v=u.metadata)==null?void 0:v.isReceipt)&&((z=u.metadata)==null?void 0:z.perPersonAmount)&&e.jsxs(D,{onClick:()=>l(u),size:"sm",className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600",children:["Pay $",u.metadata.perPersonAmount.toFixed(2)]}),e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>window.open(u.media_url,"_blank"),className:"text-muted-foreground hover:text-foreground",children:e.jsx(ht,{size:16})})]})]})},u.id)})})]})}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Audio (",p.length,")"]}),e.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>{alert("Add Audio functionality - would open file picker for audio files, voice notes")},className:"text-xs",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"+ Add Audio"]})]}),p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ne,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Audio files and voice notes shared in chat will appear here"})]}):e.jsx("div",{className:"space-y-3",children:p.map(s=>{var u;return e.jsx("div",{className:"bg-card border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ne,{className:"text-purple-400",size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{className:"text-foreground font-medium truncate",children:s.filename})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:h(s.file_size)}),e.jsx("span",{children:s.source==="chat"?"From chat":"Uploaded"}),e.jsx("span",{children:r(s.created_at)}),((u=s.metadata)==null?void 0:u.duration)&&e.jsxs("span",{children:[s.metadata.duration,"s"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("audio",{controls:!0,className:"h-8",children:e.jsx("source",{src:s.media_url,type:s.mime_type})})})]})},s.id)})})]})},Yt=({item:o})=>o.media_type==="image"?e.jsx("div",{className:"group relative aspect-square rounded-lg overflow-hidden bg-muted",children:e.jsx("img",{src:o.media_url,alt:o.filename,className:"w-full h-full object-cover transition-transform group-hover:scale-105"})}):o.media_type==="video"?e.jsx("div",{className:"group relative aspect-square rounded-lg overflow-hidden bg-muted",children:e.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[e.jsx("video",{src:o.media_url,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:e.jsx(fe,{className:"w-12 h-12 text-white"})})]})}):e.jsx("div",{className:"group relative aspect-square rounded-lg overflow-hidden bg-muted",children:e.jsxs("div",{className:"w-full h-full bg-white/10 flex flex-col items-center justify-center p-4",children:[o.media_type==="audio"?e.jsx(ne,{className:"w-8 h-8 text-purple-400"}):e.jsx(le,{className:"w-8 h-8 text-blue-400"}),e.jsx("span",{className:"text-xs text-center mt-2 truncate w-full",children:o.filename})]})}),Qt=({items:o,maxItems:t})=>{const a=t?o.slice(0,t):o;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(i=>e.jsx(Yt,{item:i},i.id))}),t&&o.length>t&&e.jsxs("p",{className:"text-center text-gray-400 text-sm",children:["Showing ",t," of ",o.length," items"]})]})},Zt=({items:o,maxItems:t})=>{const a=t?o.slice(0,t):o;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(i=>e.jsxs("div",{className:"group relative aspect-square rounded-lg overflow-hidden bg-muted border border-white/10 p-3 flex flex-col",children:[i.image_url?e.jsx("img",{src:i.image_url,alt:i.title,className:"w-full flex-1 object-cover rounded mb-2"}):e.jsx("div",{className:"w-full flex-1 bg-white/5 rounded mb-2 flex items-center justify-center",children:e.jsx(Q,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"text-white font-medium truncate",children:i.title}),e.jsx("p",{className:"text-gray-400 text-xs",children:i.domain})]})]},i.id))}),t&&o.length>t&&e.jsxs("p",{className:"text-center text-gray-400 text-sm",children:["Showing ",t," of ",o.length," links"]})]})},Xt=({tripId:o})=>{const[t,a]=g.useState("all"),{mediaItems:i,linkItems:m,loading:n,getAllItemsSorted:r}=Vt(o),h=()=>{if(i.length===0&&m.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ue,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Media Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Photos, videos, files, and links shared in chat or uploaded will appear here automatically"})]});const l=r(),p=l.slice(0,8),s=p.filter(c=>"media_type"in c),u=p.filter(c=>!("media_type"in c));return e.jsxs("div",{className:"space-y-4",children:[s.length>0&&e.jsx(Qt,{items:s}),u.length>0&&e.jsx(Zt,{items:u}),l.length>8&&e.jsxs("p",{className:"text-center text-gray-400 text-sm",children:["Showing 8 of ",l.length," items â¢ Use tabs above to filter by type"]})]})};return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(dt,{value:t,onValueChange:a,className:"w-full",children:[e.jsxs(mt,{className:"grid w-full grid-cols-6 bg-white/5 backdrop-blur-sm",children:[e.jsx(W,{value:"all",className:"text-xs",children:"All"}),e.jsx(W,{value:"photos",className:"text-xs",children:"Photos"}),e.jsx(W,{value:"videos",className:"text-xs",children:"Videos"}),e.jsx(W,{value:"audio",className:"text-xs",children:"Audio"}),e.jsx(W,{value:"files",className:"text-xs",children:"Files"}),e.jsx(W,{value:"links",className:"text-xs",children:"Links"})]}),e.jsx(K,{value:"all",className:"mt-6",children:h()}),e.jsx(K,{value:"photos",className:"mt-6",children:e.jsx(ee,{items:i.filter(l=>l.media_type==="image"),type:"photos"})}),e.jsx(K,{value:"videos",className:"mt-6",children:e.jsx(ee,{items:i.filter(l=>l.media_type==="video"),type:"videos"})}),e.jsx(K,{value:"audio",className:"mt-6",children:e.jsx(ee,{items:i.filter(l=>l.media_type==="audio"),type:"audio"})}),e.jsx(K,{value:"files",className:"mt-6",children:e.jsx(ee,{items:i.filter(l=>{var p,s;return l.media_type==="document"||l.media_type==="image"&&(((p=l.metadata)==null?void 0:p.isSchedule)||((s=l.metadata)==null?void 0:s.isReceipt))}),type:"files"})}),e.jsx(K,{value:"links",className:"mt-6",children:e.jsx(ee,{items:m,type:"links"})})]})})},ea=[/^https?:\/\/.+/i,/^www\..+\..+/i,/\.(com|org|net|edu|gov|co|io|ai|app|ly|me|tv|fm|xyz|biz|info)[\s\/]?/i],ta=[/(.+)\s+(in|at|near|@)\s+([a-zA-Z\s,]+)/i,/(.+),\s*([a-zA-Z\s,]+)/i,/(.+)\s+([A-Z]{2,})\s*(\d{5})?/i],Me=o=>{var a,i,m,n,r;const t=o.trim();for(const h of ta){const l=t.match(h);if(l)return{businessName:(a=l[1])==null?void 0:a.trim(),location:((i=l[2])==null?void 0:i.trim())||((m=l[3])==null?void 0:m.trim()),fullLocation:`${((n=l[2])==null?void 0:n.trim())||""} ${((r=l[3])==null?void 0:r.trim())||""}`.trim()}}return{businessName:t,location:"",fullLocation:""}},aa=o=>{const t=o.trim();if(!t)return{type:"place_name",isValid:!1};if(ea.some(r=>r.test(t)))try{const r=t.startsWith("http")?t:`https://${t}`;return new URL(r),{type:"url",isValid:!0}}catch{return{type:"url",isValid:!1}}const i=Me(t),m=i.businessName.length>0,n=[];return m&&(i.location?n.push(`${i.businessName} in ${i.location}`):(n.push(`${i.businessName} near me`),n.push(`${i.businessName} locations`))),{type:"place_name",isValid:m,suggestions:n.length>0?n:void 0}},sa=o=>{const t=o.trim();return t.startsWith("http")?t:`https://${t}`},ia=o=>{const t=Me(o);return t.location?`${t.businessName} ${t.location}`:t.businessName},ra=[{id:"restaurant",label:"Eats",icon:"ð½ï¸",description:"Restaurants, cafes, food tours"},{id:"attraction",label:"Attraction / Sightseeing",icon:"ð¯",description:"Museums, tours, attractions"},{id:"activity",label:"Day Activities",icon:"âï¸",description:"Activities and experiences"},{id:"fitness",label:"Fitness",icon:"ðª",description:"Gyms, yoga, sports activities"},{id:"nightlife",label:"Nightlife",icon:"ð",description:"Bars, clubs, evening events"},{id:"transportation",label:"Transportation",icon:"âï¸",description:"Flights, cars, rideshares"},{id:"hotel",label:"Housing",icon:"ð ",description:"Hotels, Airbnbs, hostels"}],Te=({isOpen:o,onClose:t,onPlaceAdded:a,basecamp:i})=>{const[m,n]=g.useState(""),[r,h]=g.useState(""),[l,p]=g.useState(!!i),[s,u]=g.useState(""),[c,x]=g.useState(!0),[N,b]=g.useState(!1),[y,S]=g.useState(!1),[k,C]=g.useState([]),[v,z]=g.useState(null),[I,L]=g.useState(null),{resolvePlaceName:F,categorizePlaceType:$,isLoading:f}=Ae();g.useEffect(()=>{if(!m.trim()){L(null),C([]),z(null);return}const j=aa(m);if(L(j.type),j.type==="place_name"&&j.isValid){const A=setTimeout(async()=>{const M=ia(m),O=await F(M);if(O.success&&O.place&&(C([O.place]),z(O.place),!r&&O.place.name!==r&&h(O.place.name),c&&O.place.types)){const U=$(O.place.types);U!==s&&u(U)}},500);return()=>clearTimeout(A)}},[m,F,$,c]);const _=async j=>{if(j.preventDefault(),!(!m.trim()||!r.trim())){b(!0);try{let A="",M=s;I==="url"?A=sa(m):v?A=v.website||`https://www.google.com/maps/place/?q=place_id:${v.place_id}`:A=`https://www.google.com/search?q=${encodeURIComponent(m)}`,M||(v&&v.types?M=$(v.types):M="attraction");const O={id:Date.now().toString(),name:r.trim(),url:A,category:M,calculatedAt:new Date().toISOString(),...v&&{address:v.formatted_address,rating:v.rating,placeId:v.place_id}};console.log("Adding place:",{place:O,calculateDistance:l,hasBasecamp:!!i}),a&&a(O),S(!0),setTimeout(()=>{n(""),h(""),p(!!i),u(""),x(!0),C([]),z(null),L(null),S(!1),t()},1500)}catch(A){console.error("Error adding place:",A)}finally{b(!1)}}};return o?y?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg w-full max-w-md p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(wt,{size:48,className:"text-green-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Pin saved!"}),e.jsx("p",{className:"text-slate-300",children:"Added to your trip links."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Save Trip Pin"}),e.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:e.jsx(ae,{size:20})})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 text-sm text-blue-300",children:'Enter a place name (e.g., "Starbucks Chicago IL") or URL to save it to your trip links.'}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Place or URL *"}),e.jsxs("div",{className:"relative",children:[I==="url"?e.jsx(Se,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}):e.jsx(Ce,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:m,onChange:j=>n(j.target.value),placeholder:"Target Chicago IL, https://target.com, or business name...",required:!0,className:"w-full bg-slate-900/50 border border-slate-600 rounded-lg pl-10 pr-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"}),f&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"})})]}),I&&e.jsx("div",{className:"mt-2 text-xs text-slate-400 flex items-center gap-1",children:I==="url"?e.jsxs(e.Fragment,{children:[e.jsx(Se,{size:12}),"Detected as URL"]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:12}),"Searching for places..."]})})]}),v&&I==="place_name"&&e.jsx("div",{className:"bg-slate-900/30 border border-slate-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{size:16,className:"text-green-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-white text-sm",children:v.name}),v.formatted_address&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:v.formatted_address}),v.rating&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("span",{className:"text-xs text-yellow-400",children:"â"}),e.jsx("span",{className:"text-xs text-slate-300",children:v.rating})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Place Name *"}),e.jsx("input",{type:"text",value:r,onChange:j=>h(j.target.value),placeholder:"Give this place a name...",required:!0,className:"w-full bg-slate-900/50 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-900/30 rounded-lg border border-slate-700/50",children:[e.jsx("input",{type:"checkbox",id:"ai-sorting",checked:c,onChange:j=>x(j.target.checked),className:"w-4 h-4 text-blue-600 bg-slate-800 border-slate-600 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"ai-sorting",className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(je,{size:16,className:"text-blue-400"}),"Auto-categorize based on place type"]})]}),!c&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Category (optional)"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-64 overflow-y-auto",children:ra.map(j=>e.jsxs("button",{type:"button",onClick:()=>u(j.id===s?"":j.id),className:`flex items-center gap-3 p-3 rounded-lg border text-left transition-all ${s===j.id?"bg-blue-600/20 border-blue-600 text-white":"bg-slate-900/30 border-slate-700 text-slate-300 hover:border-slate-600"}`,children:[e.jsx("span",{className:"text-lg",children:j.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.label}),e.jsx("div",{className:"text-xs text-slate-400",children:j.description})]})]},j.id))})]}),i&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:"Calculate distance from Basecamp"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:j=>p(j.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-500/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"})]})]}),e.jsx("p",{className:"text-xs text-green-300",children:"See how far your options are from your base"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(D,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),e.jsx(D,{type:"submit",disabled:N||!m.trim()||!r.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:N?"Saving...":"Save Pin"})]})]})]})}):null},Le=({isOpen:o,onClose:t,onBasecampSet:a,currentBasecamp:i})=>{const[m,n]=g.useState((i==null?void 0:i.address)||""),[r,h]=g.useState((i==null?void 0:i.name)||""),[l,p]=g.useState((i==null?void 0:i.type)||"hotel"),[s,u]=g.useState(!1),[c,x]=g.useState([]),[N,b]=g.useState(!1),[y,S]=g.useState(-1),[k,C]=g.useState(!1),v=g.useRef(null),z=g.useRef(null),I=async f=>{if(n(f),S(-1),f.length>2){C(!0);try{const _=await Y.getPlaceAutocomplete(f,["establishment","lodging","tourist_attraction","geocode"]);_.predictions&&_.predictions.length>0?(x(_.predictions.slice(0,8)),b(!0)):(x([]),b(!1))}catch(_){console.error("Error getting suggestions:",_),x([]),b(!1)}finally{C(!1)}}else x([]),b(!1)},L=async f=>{if(n(f.description),b(!1),x([]),f.place_id)try{const _=await Y.getPlaceDetailsById(f.place_id);if(_&&_.result){const j=_.result;if(!r&&j.name&&h(j.name),!l&&j.types&&j.types.length>0){const A=j.types.includes("lodging")?"hotel":j.types.includes("tourist_attraction")||j.types.includes("restaurant")?"other":l;p(A)}}}catch(_){console.error("Error getting place details:",_)}},F=f=>{if(!(!N||c.length===0))switch(f.key){case"ArrowDown":f.preventDefault(),S(_=>_<c.length-1?_+1:0);break;case"ArrowUp":f.preventDefault(),S(_=>_>0?_-1:c.length-1);break;case"Enter":f.preventDefault(),y>=0&&L(c[y]);break;case"Escape":b(!1),x([]),S(-1);break}},$=async f=>{if(f.preventDefault(),!!m.trim()){u(!0),b(!1);try{const _=await Y.geocodeAddress(m);if(_){const j={address:m.trim(),coordinates:_,name:r.trim()||void 0,type:l};a(j),t()}else alert("Could not find that address. Please try selecting from the suggestions or enter a different location.")}catch(_){console.error("Error setting basecamp:",_),alert("There was an error setting your basecamp. Please check your internet connection and try again.")}finally{u(!1)}}};return g.useEffect(()=>{const f=_=>{var j;z.current&&!z.current.contains(_.target)&&!((j=v.current)!=null&&j.contains(_.target))&&b(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),o?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-600 to-green-700 rounded-xl flex items-center justify-center",children:e.jsx(J,{size:20,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:i?"Update Basecamp":"Set Basecamp"})]}),e.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors border border-gray-700",children:e.jsx(ae,{size:16,className:"text-gray-400"})})]}),e.jsxs("form",{onSubmit:$,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Basecamp Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{size:18,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 z-10"}),e.jsx("input",{ref:v,type:"text",value:m,onChange:f=>I(f.target.value),onKeyDown:F,onFocus:()=>c.length>0&&b(!0),placeholder:"Enter hotel, Airbnb, or main lodging address...",required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-12 pr-4 py-4 text-white placeholder-gray-500 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all",autoComplete:"off"}),(N||k)&&e.jsx("div",{ref:z,className:"absolute top-full left-0 right-0 bg-gray-800 border border-gray-700 rounded-xl mt-1 shadow-lg z-20 max-h-60 overflow-y-auto",children:k?e.jsx("div",{className:"px-4 py-3 text-gray-400 text-sm",children:"Loading suggestions..."}):c.length>0?c.map((f,_)=>{var O,U;const j=f.types||[],M=j.includes("lodging")?{icon:"ð¨",label:"Hotel",color:"bg-blue-100 text-blue-800"}:j.includes("tourist_attraction")?{icon:"ð¯",label:"Attraction",color:"bg-green-100 text-green-800"}:j.includes("stadium")?{icon:"ðï¸",label:"Stadium",color:"bg-purple-100 text-purple-800"}:j.includes("establishment")?{icon:"ð",label:"Place",color:"bg-gray-100 text-gray-800"}:null;return e.jsxs("button",{type:"button",onClick:()=>L(f),className:`w-full text-left px-4 py-3 hover:bg-gray-700 transition-colors text-white text-sm flex items-center gap-3 ${_===y?"bg-gray-700":""}`,children:[e.jsx(T,{size:14,className:"text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium truncate",children:((O=f.structured_formatting)==null?void 0:O.main_text)||f.description}),M&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${M.color} flex-shrink-0`,children:[M.icon," ",M.label]})]}),((U=f.structured_formatting)==null?void 0:U.secondary_text)&&e.jsx("div",{className:"text-xs text-gray-500 truncate",children:f.structured_formatting.secondary_text})]})]},f.place_id||_)}):null})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Basecamp Name (optional)"}),e.jsx("input",{type:"text",value:r,onChange:f=>h(f.target.value),placeholder:"e.g., 'Grand Hotel Paris' or 'Downtown Airbnb'",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-4 text-white placeholder-gray-500 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Type"}),e.jsxs("select",{value:l,onChange:f=>p(f.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-4 text-white focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all",children:[e.jsx("option",{value:"hotel",children:"Hotel"}),e.jsx("option",{value:"airbnb",children:"Airbnb / Vacation Rental"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:e.jsx("p",{className:"text-sm text-green-300",children:"ð¡ Your basecamp will be used as the starting point for directions and calculating distances to places."})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(D,{type:"button",variant:"outline",onClick:t,className:"flex-1 h-12 rounded-xl border-2 border-gray-700 hover:border-gray-600 font-semibold bg-gray-800 text-white hover:bg-gray-700",children:"Cancel"}),e.jsx(D,{type:"submit",disabled:s||!m.trim(),className:"flex-1 h-12 rounded-xl bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 font-semibold shadow-lg shadow-green-500/25 border border-green-500/50",children:s?"Setting...":i?"Update":"Set Basecamp"})]})]})]})}):null},oa=({className:o})=>{const{basecamp:t,isBasecampSet:a}=ye(),[i,m]=g.useState(""),[n,r]=g.useState(()=>(t==null?void 0:t.address)||"New York City"),[h,l]=g.useState(!0),[p,s]=g.useState(!1),[u,c]=g.useState(""),[x,N]=g.useState(!1),[b,y]=g.useState(!1),S=(f,_,j=!1)=>j&&(t!=null&&t.coordinates)?Y.generateDirectionsEmbedUrlWithCoords(t.coordinates,f):_?`https://www.google.com/maps?q=${_.lat},${_.lng}&output=embed&z=14`:`https://www.google.com/maps?q=${encodeURIComponent(f)}&output=embed`;g.useEffect(()=>{a&&(t!=null&&t.address)&&(r(t.address),y(!1))},[t,a]),g.useEffect(()=>{l(!0),s(!1);const f=t!=null&&t.coordinates&&n===t.address?t.coordinates:void 0,_=S(n,f,b);c(_)},[n,t,b]);const k=f=>{if(f.preventDefault(),i.trim()){const _=i.trim();r(_),a&&(t!=null&&t.address)&&y(!0),m("")}},C=f=>{r(f)},v=()=>{t!=null&&t.address&&(r(t.address),y(!1))},z=()=>{N(!0)},I=f=>{N(!1)},L=()=>{l(!1),s(!1)},F=()=>{l(!1),s(!0)},$=()=>{s(!1),l(!0);const f=S(n);c(f+"&retry="+Date.now())};return e.jsxs("div",{className:`relative w-full h-full bg-gray-900 rounded-3xl overflow-hidden ${o}`,children:[e.jsx("div",{className:"absolute top-4 left-4 right-4 z-20",children:e.jsxs("form",{onSubmit:k,className:"relative",children:[e.jsx(Ce,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:f=>m(f.target.value),placeholder:a?"Search places from your basecamp...":"Search locations on map...",className:"w-full bg-white/95 backdrop-blur-sm border border-gray-300 rounded-xl pl-10 pr-4 py-3 text-gray-800 placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all shadow-lg text-sm"})]})}),e.jsx("div",{className:"absolute top-20 left-4 right-4 z-20",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a&&e.jsxs("button",{onClick:v,className:`px-3 py-1 rounded-full text-xs transition-all flex items-center gap-1 ${n===(t==null?void 0:t.address)?"bg-green-600 text-white":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:[e.jsx(J,{size:12}),"Basecamp"]}),["New York City","Los Angeles","Chicago","Miami","London","Paris"].map(f=>e.jsx("button",{onClick:()=>C(f),className:`px-3 py-1 rounded-full text-xs transition-all ${n===f?"bg-blue-600 text-white":"bg-white/90 text-gray-800 hover:bg-white"}`,children:f},f))]})}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-20",children:e.jsxs("div",{className:`backdrop-blur-sm rounded-lg px-4 py-2 flex items-center justify-between transition-all ${a&&n===(t==null?void 0:t.address)&&!b?"bg-green-600/95 border border-green-500/50 shadow-lg shadow-green-500/25":b&&a?"bg-blue-600/95 border border-blue-500/50 shadow-lg shadow-blue-500/25":"bg-white/95"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a&&n===(t==null?void 0:t.address)&&!b?e.jsx(J,{size:16,className:"text-white"}):b&&a?e.jsx(T,{size:16,className:"text-white"}):e.jsx(T,{size:16,className:"text-blue-600"}),e.jsx("span",{className:`text-sm font-medium ${a&&n===(t==null?void 0:t.address)&&!b||b&&a?"text-white":"text-gray-800"}`,children:b&&a?e.jsxs(e.Fragment,{children:["ð Directions to ",n]}):a&&n===(t==null?void 0:t.address)?e.jsxs(e.Fragment,{children:["ð  ",(t==null?void 0:t.name)||(t==null?void 0:t.address)]}):n})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx("button",{onClick:z,className:`transition-colors ${a&&n===(t==null?void 0:t.address)&&!b||b&&a?"text-white hover:text-green-100":"text-blue-600 hover:text-blue-800"}`,title:"Edit basecamp",children:e.jsx(Mt,{size:14})}),e.jsx("a",{href:b&&a?`https://www.google.com/maps/dir/${encodeURIComponent((t==null?void 0:t.address)||"")},${encodeURIComponent(n)}`:a&&n===(t==null?void 0:t.address)?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(n)}`:`https://www.google.com/maps/search/${encodeURIComponent(n)}`,target:"_blank",rel:"noopener noreferrer",className:`transition-colors ${a&&n===(t==null?void 0:t.address)&&!b||b&&a?"text-white hover:text-green-100":"text-blue-600 hover:text-blue-800"}`,title:b&&a?"Open directions in Google Maps":a&&n===(t==null?void 0:t.address)?"Get directions from your basecamp":"View on Google Maps",children:e.jsx(Q,{size:16})})]})]})}),h&&e.jsx("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(yt,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm",children:"Loading map..."})]})}),p&&e.jsx("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white max-w-sm mx-auto p-6",children:[e.jsx(pt,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Map Unavailable"}),e.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:['Unable to load the map for "',n,'". You can still view this location on Google Maps.']}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:$,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Try Again"}),e.jsx("a",{href:a&&n===(t==null?void 0:t.address)?`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(n)}`:`https://www.google.com/maps/search/${encodeURIComponent(n)}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors inline-block text-center",children:a&&n===(t==null?void 0:t.address)?"Get Directions from Basecamp":"Open in Google Maps"})]})]})}),u&&!p&&e.jsx("iframe",{src:u,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"absolute inset-0 w-full h-full",title:"Google Maps",onLoad:L,onError:F},u),e.jsx(Le,{isOpen:x,onClose:()=>N(!1),onBasecampSet:I,currentBasecamp:t})]})},na=({basecamp:o,onBasecampSet:t})=>{const{basecamp:a,setBasecamp:i,isBasecampSet:m}=ye(),n=a||o,r=s=>{i(s),t==null||t(s)},[h,l]=g.useState(!1),p=s=>{var c,x;const u=s.split(",");return u.length>2?`${u[0]}, ${(c=u[u.length-2])==null?void 0:c.trim()}, ${(x=u[u.length-1])==null?void 0:x.trim()}`:s};return e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-3xl p-6 shadow-2xl shadow-black/50 min-h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n?"bg-gradient-to-r from-green-600 to-green-700":"bg-gradient-to-r from-gray-600 to-gray-700"}`,children:e.jsx(J,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Set Basecamp"}),e.jsx("p",{className:"text-gray-400 text-sm",children:n?"Basecamp configured":"Choose your home base"})]})]}),e.jsx("button",{onClick:()=>l(!0),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Oe,{size:20})})]}),n?e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx(J,{size:16,className:"text-green-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-semibold mb-1",children:n.name||"Your Home Base"}),e.jsx("p",{className:"text-green-300 text-sm leading-relaxed",children:p(n.address)})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{size:16,className:"text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:"Distance Calculations"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"All places show distance from basecamp"})]})]})}),e.jsx("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(At,{size:16,className:"text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:"Route Planning"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Optimized routes from your base"})]})]})}),e.jsx("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vt,{size:16,className:"text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:"Travel Time Estimates"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Plan your daily itinerary efficiently"})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>l(!0),className:"w-full bg-gray-800 hover:bg-gray-700 text-white py-3 px-4 rounded-xl transition-all duration-200 border border-gray-700 hover:border-green-500/50 font-medium text-sm",children:"Update Basecamp Location"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{className:"bg-gray-800/50 hover:bg-gray-800 text-gray-300 py-2 px-3 rounded-lg transition-colors border border-gray-700 text-xs",children:"View on Map"}),e.jsx("button",{className:"bg-gray-800/50 hover:bg-gray-800 text-gray-300 py-2 px-3 rounded-lg transition-colors border border-gray-700 text-xs",children:"Get Directions"})]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-gray-800 to-gray-900 rounded-full flex items-center justify-center border border-gray-700 mb-6",children:e.jsx(J,{size:32,className:"text-gray-400"})}),e.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:"Set Your Basecamp"}),e.jsx("p",{className:"text-gray-400 mb-6 max-w-sm mx-auto leading-relaxed",children:"Choose a central location for your trip. We'll calculate distances and travel times from this point to all your destinations."}),e.jsx("button",{onClick:()=>l(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-8 py-4 rounded-xl transition-all duration-300 hover:scale-105 shadow-xl shadow-green-500/25 font-semibold border border-green-500/50",children:"Choose Basecamp"}),e.jsxs("div",{className:"mt-8 space-y-2 text-sm text-gray-500",children:[e.jsx("p",{children:"â¢ Hotels, vacation rentals, or meeting spots work great"}),e.jsx("p",{children:"â¢ Used for distance calculations and route planning"}),e.jsx("p",{children:"â¢ Can be updated anytime during your trip"})]})]}),e.jsx(Le,{isOpen:h,onClose:()=>l(!1),onBasecampSet:r,currentBasecamp:n})]})},xe=({isOpen:o,onClose:t,onEventAdded:a,prefilledData:i,editEvent:m})=>{const[n,r]=g.useState({title:(i==null?void 0:i.title)||(m==null?void 0:m.title)||"",date:(i==null?void 0:i.date)||(m==null?void 0:m.date)||new Date,time:(i==null?void 0:i.time)||(m==null?void 0:m.time)||"",location:(i==null?void 0:i.location)||(m==null?void 0:m.location)||"",description:(i==null?void 0:i.description)||(m==null?void 0:m.description)||"",category:(i==null?void 0:i.category)||(m==null?void 0:m.event_category)||"activity",include_in_itinerary:(i==null?void 0:i.include_in_itinerary)??(m==null?void 0:m.include_in_itinerary)??!0}),h=s=>{s.preventDefault(),!(!n.title||!n.time)&&(a(n),l())},l=()=>{r({title:"",date:new Date,time:"",location:"",description:"",category:"activity",include_in_itinerary:!0}),t()},p=[{value:"dining",label:"Dining",icon:"ð½ï¸"},{value:"lodging",label:"Lodging",icon:"ð¨"},{value:"activity",label:"Activity",icon:"ð¯"},{value:"transportation",label:"Transportation",icon:"ð"},{value:"entertainment",label:"Entertainment",icon:"ð­"},{value:"other",label:"Other",icon:"ð"}];return e.jsx(jt,{open:o,onOpenChange:l,children:e.jsxs(_t,{className:"max-w-md",children:[e.jsx(Nt,{children:e.jsx(kt,{children:m?"Edit Event":"Add to Calendar"})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"title",children:"Event Title *"}),e.jsx(ge,{id:"title",value:n.title,onChange:s=>r({...n,title:s.target.value}),placeholder:"Event name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{children:"Date *"}),e.jsxs(Ye,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(D,{variant:"outline",className:Je("w-full justify-start text-left font-normal",!n.date&&"text-muted-foreground"),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),n.date?Pt(n.date,"PPP"):"Pick a date"]})}),e.jsx(Ze,{className:"w-auto p-0",align:"start",children:e.jsx(Ot,{mode:"single",selected:n.date,onSelect:s=>s&&r({...n,date:s}),initialFocus:!0,className:"p-3 pointer-events-auto"})})]})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"time",children:"Time *"}),e.jsx(ge,{id:"time",type:"time",value:n.time,onChange:s=>r({...n,time:s.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"location",children:"Location"}),e.jsx(ge,{id:"location",value:n.location,onChange:s=>r({...n,location:s.target.value}),placeholder:"Event location"})]}),e.jsxs("div",{children:[e.jsx(H,{children:"Category"}),e.jsxs(St,{value:n.category,onValueChange:s=>r({...n,category:s}),children:[e.jsx(Dt,{children:e.jsx(Ct,{})}),e.jsx(zt,{children:p.map(s=>e.jsx(It,{value:s.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),s.label]})},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"description",children:"Description"}),e.jsx(gt,{id:"description",value:n.description,onChange:s=>r({...n,description:s.target.value}),placeholder:"Additional details...",rows:2})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{id:"include-itinerary",checked:n.include_in_itinerary,onCheckedChange:s=>r({...n,include_in_itinerary:s})}),e.jsx(H,{htmlFor:"include-itinerary",children:"Include in trip itinerary"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(D,{type:"submit",className:"flex-1",children:m?"Update Event":"Add Event"}),e.jsx(D,{type:"button",variant:"outline",onClick:l,children:"Cancel"})]})]})]})})},la=({placeName:o,placeAddress:t,category:a="activity",onEventAdded:i,variant:m="default"})=>{const[n,r]=g.useState(!1),h=p=>{i==null||i(p),r(!1)},l={title:o,location:t||o,category:a,include_in_itinerary:!0};return m==="icon"?e.jsxs(e.Fragment,{children:[e.jsx(D,{variant:"outline",size:"sm",onClick:()=>r(!0),className:"p-2",children:e.jsx(he,{size:16})}),e.jsx(xe,{isOpen:n,onClose:()=>r(!1),onEventAdded:h,prefilledData:l})]}):m==="pill"?e.jsxs(e.Fragment,{children:[e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>r(!0),className:"text-xs",children:[e.jsx(he,{size:14,className:"mr-1"}),"Add to Calendar"]}),e.jsx(xe,{isOpen:n,onClose:()=>r(!1),onEventAdded:h,prefilledData:l})]}):e.jsxs(e.Fragment,{children:[e.jsxs(D,{variant:"outline",onClick:()=>r(!0),className:"w-full",children:[e.jsx(ve,{size:16,className:"mr-2"}),"Add to Calendar"]}),e.jsx(xe,{isOpen:n,onClose:()=>r(!1),onEventAdded:h,prefilledData:l})]})},ca=({places:o,basecamp:t,onPlaceAdded:a,onPlaceRemoved:i,onEventAdded:m,distanceUnit:n,preferredMode:r})=>{const[h,l]=g.useState(!1);return e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-3xl p-6 shadow-2xl shadow-black/50 min-h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o.length>0?"bg-gradient-to-r from-red-600 to-red-700":"bg-gradient-to-r from-gray-600 to-gray-700"}`,children:e.jsx(T,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Trip Pins"}),e.jsx("p",{className:"text-gray-400 text-sm",children:o.length>0?`${o.length} saved locations`:"Save your trip locations"})]})]}),e.jsx("button",{onClick:()=>l(!0),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Oe,{size:20})})]}),o.length===0?e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-gray-800 to-gray-900 rounded-full flex items-center justify-center border border-gray-700 mb-6",children:e.jsx(T,{size:32,className:"text-gray-400"})}),e.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:"Save Trip Pins"}),e.jsx("p",{className:"text-gray-400 mb-6 max-w-sm mx-auto leading-relaxed",children:"Start saving locations you want to visit or remember for your trip. Explore the map above and add places that catch your eye."}),e.jsx("button",{onClick:()=>l(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-8 py-4 rounded-xl transition-all duration-300 hover:scale-105 shadow-xl shadow-green-500/25 font-semibold border border-green-500/50",children:"Save Pin"}),e.jsxs("div",{className:"mt-8 space-y-2 text-sm text-gray-500",children:[e.jsx("p",{children:"â¢ Places you add will be saved to Links for easy access"}),e.jsx("p",{children:"â¢ View distances from your basecamp when set"}),e.jsx("p",{children:"â¢ Add events directly to your calendar"})]})]}):e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("button",{onClick:()=>l(!0),className:"w-full bg-gray-800 hover:bg-gray-700 text-white py-3 px-4 rounded-xl transition-all duration-200 border border-gray-700 hover:border-red-500/50 font-medium text-sm",children:[e.jsx(ve,{size:16,className:"inline mr-2"}),"Add Another Pin"]})}),e.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto",children:o.map(p=>{var s;return e.jsx("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-white font-semibold text-sm",children:p.name}),e.jsx(G,{variant:"secondary",className:"text-xs bg-blue-500/20 text-blue-300 border-blue-500/30",children:"Linked"})]}),e.jsx("p",{className:"text-gray-400 text-xs capitalize mb-2",children:p.category}),p.distanceFromBasecamp&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-green-500/20 text-green-300 px-2 py-1 rounded-lg text-xs",children:[e.jsx(T,{size:12}),(s=p.distanceFromBasecamp[r])==null?void 0:s.toFixed(1)," ",p.distanceFromBasecamp.unit," from basecamp"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(la,{placeName:p.name,placeAddress:p.address,category:"activity",onEventAdded:m,variant:"pill"}),e.jsxs("button",{onClick:()=>i(p.id),className:"text-red-400 hover:text-red-300 text-xs px-2 py-1 rounded bg-red-500/10 hover:bg-red-500/20 transition-colors",children:[e.jsx(ft,{size:12,className:"inline mr-1"}),"Remove"]})]})]})})},p.id)})})]}),e.jsx(Te,{isOpen:h,onClose:()=>l(!1),onPlaceAdded:a,basecamp:t})]})};class ce{static async calculateDistance(t,a,i){var n;if(!a.coordinates&&!a.address)return console.warn("Place has no coordinates or address"),null;const m=`${t.coordinates.lat},${t.coordinates.lng}-${((n=a.coordinates)==null?void 0:n.lat)||a.address}-${i.preferredMode}`;if(this.cache.has(m))return this.cache.get(m);try{let r=null;return i.preferredMode==="straightLine"?r=this.calculateStraightLineDistance(t.coordinates,a.coordinates):r=await this.calculateRouteDistance(t,a,i.preferredMode),r!==null&&(i.unit==="km"&&r&&(r=r*1.60934),this.cache.set(m,r)),r}catch(r){return console.error("Error calculating distance:",r),null}}static calculateStraightLineDistance(t,a){if(!a)return null;const i=3959,m=this.deg2rad(a.lat-t.lat),n=this.deg2rad(a.lng-t.lng),r=Math.sin(m/2)*Math.sin(m/2)+Math.cos(this.deg2rad(t.lat))*Math.cos(this.deg2rad(a.lat))*Math.sin(n/2)*Math.sin(n/2),h=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),l=i*h;return Math.round(l*10)/10}static async calculateRouteDistance(t,a,i){var h,l;const m=`${t.coordinates.lat},${t.coordinates.lng}`,n=a.coordinates?`${a.coordinates.lat},${a.coordinates.lng}`:encodeURIComponent(a.address||""),r=i==="driving"?"DRIVING":"WALKING";try{const p=await Y.getDistanceMatrix(m,n,r);if(p.status==="OK"&&((l=(h=p.rows[0])==null?void 0:h.elements[0])==null?void 0:l.status)==="OK"){const s=p.rows[0].elements[0].distance.text;return parseFloat(s.replace(/[^\d.]/g,""))}return null}catch(p){return console.error("Error fetching distance from Google Maps API:",p),null}}static deg2rad(t){return t*(Math.PI/180)}static async geocodeAddress(t){try{return await Y.geocodeAddress(t)}catch(a){return console.error("Error geocoding address:",a),null}}}V(ce,"cache",new Map);const da=()=>{const[o,t]=g.useState([]),a=h=>{switch(h){case"restaurant":return"eats";case"attraction":return"day-activities";case"hotel":return"housing";case"activity":return"day-activities";case"fitness":return"fitness";case"nightlife":return"nightlife";case"transportation":return"transportation";default:return"other"}},i=h=>h.url?h.url:h.address?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(h.address)}`:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(h.name)}`,m=g.useCallback((h,l="You")=>{const p={id:`link-${h.id}`,title:h.name,url:i(h),description:`Saved from Places${h.address?`: ${h.address}`:""}`,category:a(h.category||"other"),postedBy:l,postedAt:"just now",upvotes:0,comments:0,originatedFromPlace:!0,placeId:h.id};return t(s=>[...s,p]),p},[]),n=g.useCallback(h=>{t(l=>l.filter(p=>p.placeId!==h))},[]),r=g.useCallback((h,l)=>{t(p=>p.map(s=>s.placeId===h?{...s,title:l.name,url:i(l),description:`Saved from Places${l.address?`: ${l.address}`:""}`,category:a(l.category||"other")}:s))},[]);return{links:o,createLinkFromPlace:m,removeLinkByPlaceId:n,updateLinkByPlaceId:r}},ma=({tripId:o="1",tripName:t="Your Trip"})=>{const{variant:a}=ze();Pe({trip_type:a==="consumer"?"consumer":"pro",enabled_features:[...it]});const{basecamp:i,setBasecamp:m,isBasecampSet:n}=ye(),[r,h]=g.useState(!1),[l,p]=g.useState([]),[s]=g.useState({preferredMode:"driving",unit:"miles",showDistances:!0}),{createLinkFromPlace:u,removeLinkByPlaceId:c,updateLinkByPlaceId:x}=da();g.useEffect(()=>{n&&i&&l.length>0&&(async()=>{const C=await Promise.all(l.map(async v=>{try{const z=await ce.calculateDistance(i,v,s),I={...v,distanceFromBasecamp:z?{[s.preferredMode]:z,unit:s.unit,calculatedAt:new Date().toISOString()}:void 0};return x(v.id,I),I}catch(z){return console.warn(`Failed to calculate distance for place ${v.id}:`,z),v}}));p(C)})()},[i,n,s.preferredMode,s.unit]);const N=async k=>{if(console.log("Setting basecamp:",k),m(k),l.length>0){const C=await Promise.all(l.map(async v=>{const z=await ce.calculateDistance(k,v,s),I={...v,distanceFromBasecamp:z?{...v.distanceFromBasecamp,[s.preferredMode]:z,unit:s.unit}:void 0};return x(v.id,I),I}));p(C)}},b=async k=>{if(console.log("Adding place:",k),i&&s.showDistances){const C=await ce.calculateDistance(i,k,s);C&&(k.distanceFromBasecamp={[s.preferredMode]:C,unit:s.unit})}p([...l,k]),u(k)},y=k=>{p(C=>C.filter(v=>v.id!==k)),c(k)},S=k=>{console.log("Event added to calendar:",k)};return e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Places"})}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-3xl overflow-hidden shadow-2xl shadow-black/50 h-96",children:e.jsx(oa,{className:"w-full h-full"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(na,{basecamp:i,onBasecampSet:N}),e.jsx(ca,{places:l,basecamp:i,onPlaceAdded:b,onPlaceRemoved:y,onEventAdded:S,distanceUnit:s.unit,preferredMode:s.preferredMode})]}),e.jsx(Te,{isOpen:r,onClose:()=>h(!1),onPlaceAdded:b,basecamp:i})]})},$a=({activeTab:o,onTabChange:t,tripId:a="1",tripName:i,basecamp:m,tripPreferences:n,showPlaces:r=!1,showConcierge:h=!1,isDemoMode:l=!1,tripData:p})=>{const[s,u]=g.useState("chat"),{accentColors:c}=ze(),x=Pe(p||{}),N=[{id:"chat",label:"Chat",icon:de,enabled:x.showChat},{id:"calendar",label:"Calendar",icon:he,enabled:x.showCalendar},{id:"tasks",label:"Tasks",icon:Xe,enabled:x.showTasks},{id:"polls",label:"Polls",icon:Ie,enabled:x.showPolls},{id:"media",label:"Media",icon:ue,enabled:x.showMedia},{id:"places",label:"Places",icon:T,enabled:r},{id:"concierge",label:"Concierge",icon:je,enabled:h}],b=(S,k)=>{k&&u(S)},y=()=>{switch(s){case"chat":return e.jsx(ke,{});case"polls":return e.jsx(Et,{});case"tasks":return e.jsx(at,{tripId:a});case"calendar":return e.jsx(tt,{});case"media":return e.jsx(Xt,{tripId:a});case"places":return e.jsx(ma,{tripId:a,tripName:i});case"concierge":return e.jsx(et,{tripId:a,basecamp:m,preferences:n,isDemoMode:l});default:return e.jsx(ke,{})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex overflow-x-auto whitespace-nowrap scroll-smooth gap-2 mb-8 pb-2 -mx-2 px-2 justify-center",children:N.map(S=>{const k=S.icon,C=s===S.id,v=S.enabled;return e.jsxs("button",{onClick:()=>b(S.id,v),disabled:!v,className:`
                flex items-center justify-center gap-2 
                px-4 py-3 min-h-[44px] min-w-max
                rounded-lg font-medium text-sm
                transition-all duration-200
                flex-shrink-0
                ${C&&v?`bg-gradient-to-r ${c.gradient} text-white shadow-md`:v?"bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white hover:shadow-sm":"bg-white/5 text-gray-500 cursor-not-allowed opacity-50"}
                ${v?"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent":""}
              `,children:[e.jsx(k,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:S.label}),!v&&e.jsx(rt,{size:12,className:"ml-1 flex-shrink-0"})]},S.id)})}),e.jsx("div",{className:"min-h-[400px]",children:y()})]})};export{Et as C,De as H,ma as P,$a as T};
