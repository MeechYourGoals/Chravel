import{j as t}from"./chunk-DE8J_P3a.js";import{r as a}from"./chunk-CHPtWMTz.js";const e=({src:e,alt:s,width:r=800,height:n,className:i="",quality:c=80,loading:o="lazy",onLoad:l})=>{const[m,u]=a.useState(!1),[h,d]=a.useState(!1),[g,f]=a.useState(!1),p=e.startsWith("/")||e.startsWith("data:")||!e.includes("http"),[x,y]=a.useState(()=>p?e:((t,a,e=80)=>{if(t.includes("unsplash.com"))try{const s=new URL(t);return s.searchParams.set("w",String(a)),s.searchParams.set("q",String(e)),s.searchParams.set("fm","webp"),s.searchParams.set("auto","format"),s.toString()}catch{const s=t.includes("?")?"&":"?";return`${t}${s}w=${a}&q=${e}&fm=webp&auto=format`}return t})(e,r,c)),b=((t=10,a=10)=>{const e=document.createElement("canvas");e.width=t,e.height=a;const s=e.getContext("2d");return s&&(s.fillStyle="rgba(255, 255, 255, 0.1)",s.fillRect(0,0,t,a)),e.toDataURL()})();return h?t.jsx("div",{className:`${i} bg-white/10 flex items-center justify-center`,children:t.jsx("span",{className:"text-gray-500 text-sm",children:"Failed to load image"})}):t.jsxs("div",{className:`relative ${i}`,children:[!m&&t.jsx("div",{className:"absolute inset-0 bg-cover bg-center blur-xl",style:{backgroundImage:`url(${b})`}}),t.jsx("img",{src:x,alt:s,width:r,height:n,loading:o,onLoad:()=>{u(!0),null==l||l()},onError:()=>{g?d(!0):(f(!0),y(e))},className:`\n          ${i}\n          transition-opacity duration-300\n          ${m?"opacity-100":"opacity-0"}\n        `})]})};export{e as O};
