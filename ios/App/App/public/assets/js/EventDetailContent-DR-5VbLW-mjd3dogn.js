import{j as e}from"./ui-vendor-BO3EQrMK-mjd3dogn.js";import{F as s,C as a,H as t,j as i,J as r,k as l}from"./TripDetailModals-BpnQZ47b-mjd3dogn.js";import{GroupCalendar as d}from"./GroupCalendar-C7tHoqVY-mjd3dogn.js";import{UnifiedMediaHub as n}from"./UnifiedMediaHub-CeKqWQUM-mjd3dogn.js";import{r as o}from"./react-vendor-D1R0t5S0-mjd3dogn.js";import{d as m,j as c,B as j,X as p,l as x,m as g}from"./index-Ta7FH5xW-mjd3dogn.js";import{I as h}from"./input-DsI2n-oJ-mjd3dogn.js";import{L as u}from"./label-D_iG0y88-mjd3dogn.js";import{T as f,I as v}from"./textarea-BudkfAn8-mjd3dogn.js";import{C as b,a as N}from"./card-jeNxgMYk-mjd3dogn.js";import{e as w}from"./eventsMockData-BWXZ-nj7-mjd3dogn.js";import{C as k}from"./calendar-C9K0fVga-mjd3dogn.js";import{C as y}from"./clock-CbBGjTQx-mjd3dogn.js";import{P as C}from"./plus-Dhwa7sZY-mjd3dogn.js";import{a as S,U as z}from"./user-DFuJ2ZP3-mjd3dogn.js";import{S as _}from"./save-DwQheero-mjd3dogn.js";import{M as A}from"./map-pin-BtCU-LeS-mjd3dogn.js";import{d as P}from"./calendar-ylgcJK3b-mjd3dogn.js";import{F as U,n as F}from"./tripConverter-C1IUbOIF-mjd3dogn.js";import{M}from"./SettingsMenu-DFNATHGY-mjd3dogn.js";import{C as D}from"./camera-AJLsIMdA-mjd3dogn.js";import{U as I}from"./users-B07yK8Y7-mjd3dogn.js";import{C as T}from"./chart-column-DOJCLy2J-mjd3dogn.js";import"./tripsData-DKwZ96V_-mjd3dogn.js";import"./dropdown-menu-BXaKb4pk-mjd3dogn.js";import"./chevron-right-DKRZr0Ps-mjd3dogn.js";import"./select-CMjqEsxb-mjd3dogn.js";import"./badge-DyE_ZUPM-mjd3dogn.js";import"./dialog-BcLamxvL-mjd3dogn.js";import"./switch-GKuTbu---mjd3dogn.js";import"./supabase-DyX-XggK-mjd3dogn.js";import"./progress-D31nnzej-mjd3dogn.js";import"./loader-circle-C0Dqayt8-mjd3dogn.js";import"./utils-DD44zzh--mjd3dogn.js";import"./googlePlacesNew-Dl7cAwDK-mjd3dogn.js";import"./external-link-CqAT5ABV-mjd3dogn.js";import"./circle-check-big-Bvor9_sf-mjd3dogn.js";import"./chevron-left-C1xtDQ_l-mjd3dogn.js";import"./avatar-HCmfb6Ad-mjd3dogn.js";import"./circle-alert-CX60mGhN-mjd3dogn.js";import"./BillingSection-CjHrdMm3-mjd3dogn.js";import"./building-QMpp1aWF-mjd3dogn.js";import"./pro-CZgaTEEg-mjd3dogn.js";import"./circle-check-CNnkiDfZ-mjd3dogn.js";import"./charts-CLK9EMgA-mjd3dogn.js";import"./share-2-DwO-SOoB-mjd3dogn.js";import"./AuthModal-BKw70HSh-mjd3dogn.js";import"./arrow-left-Biq1qnK6-mjd3dogn.js";import"./mail-BdBVrsyz-mjd3dogn.js";import"./eye-BNDPAvT6-mjd3dogn.js";import"./zap-LZcBFzwj-mjd3dogn.js";import"./SavedRecommendations-D-6cIfyL-mjd3dogn.js";import"./useSavedRecommendations-DTox9Xl2-mjd3dogn.js";import"./shield-DGBvlKQi-mjd3dogn.js";import"./trending-up-B0a-0y1l-mjd3dogn.js";import"./userPreferencesService-DregIO64-mjd3dogn.js";import"./archive-zX2FvEif-mjd3dogn.js";import"./tabs-Dxuz3Y6S-mjd3dogn.js";import"./AddLinkModal-BcpZ7zHk-mjd3dogn.js";const L=({eventId:s,isAdmin:a,initialSessions:t=[],initialPdfUrl:i,onClose:r})=>{const{isDemoMode:l}=m(),{toast:d}=c(),n=l||a,g=l?w[s]:null,M=(null==g?void 0:g.agenda)||[],[D,I]=o.useState(l?M:t),[T,L]=o.useState(l?"https://www.w3.org/WAI/WCAG21/Techniques/pdf/img/table-word.jpg":i),[R,E]=o.useState(!1),[G,W]=o.useState(!1),[q,B]=o.useState(null),[J,O]=o.useState({title:"",start_time:"",end_time:"",location:"",description:"",speakers:[],track:""}),[$,H]=o.useState(""),V=async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(!a)return;if(["application/pdf","image/jpeg","image/png","image/jpg"].includes(a.type)){E(!0);try{if(l){const e=URL.createObjectURL(a);L(e),d({title:"File uploaded successfully",description:"Agenda file is now visible to attendees"})}else{const e=URL.createObjectURL(a);L(e),d({title:"File uploaded successfully",description:"Agenda file is now visible to attendees"})}}catch(t){d({title:"Upload failed",description:"Please try again",variant:"destructive"})}finally{E(!1)}}else d({title:"Invalid file type",description:"Please upload a PDF, JPG, or PNG file",variant:"destructive"})},Y=()=>{$.trim()&&(O(e=>({...e,speakers:[...e.speakers||[],$.trim()]})),H(""))},K=()=>{O({title:"",start_time:"",end_time:"",location:"",description:"",speakers:[],track:""}),H(""),W(!1),B(null)},Q=(null==T?void 0:T.toLowerCase().endsWith(".pdf"))||(null==T?void 0:T.includes("application/pdf"));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{size:24,className:"text-orange-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Event Agenda"}),e.jsx("p",{className:"text-gray-400 text-sm",children:n?"Manage your event schedule":"View the event schedule"})]})]}),r&&e.jsx(j,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(p,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 border-r border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-white flex items-center gap-2",children:[e.jsx(y,{size:18}),"Schedule"]}),n&&!G&&e.jsxs(j,{onClick:()=>W(!0),size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[e.jsx(C,{size:16,className:"mr-1"}),"Add Session"]})]}),G&&n&&e.jsx(b,{className:"bg-white/5 border-white/10 mb-4",children:e.jsxs(N,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-white",children:q?"Edit Session":"Add Session"}),e.jsx(j,{variant:"ghost",size:"sm",onClick:K,children:"Cancel"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"md:col-span-2 space-y-1.5",children:[e.jsx(u,{htmlFor:"title",className:"text-sm",children:"Title *"}),e.jsx(h,{id:"title",value:J.title,onChange:e=>O(s=>({...s,title:e.target.value})),placeholder:"Session title",className:"bg-white/5 border-white/10"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(u,{htmlFor:"start_time",className:"text-sm",children:"Start Time *"}),e.jsx(h,{id:"start_time",type:"time",value:J.start_time,onChange:e=>O(s=>({...s,start_time:e.target.value})),className:"bg-white/5 border-white/10"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(u,{htmlFor:"end_time",className:"text-sm",children:"End Time"}),e.jsx(h,{id:"end_time",type:"time",value:J.end_time,onChange:e=>O(s=>({...s,end_time:e.target.value})),className:"bg-white/5 border-white/10"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(u,{htmlFor:"location",className:"text-sm",children:"Location"}),e.jsx(h,{id:"location",value:J.location,onChange:e=>O(s=>({...s,location:e.target.value})),placeholder:"Room or venue",className:"bg-white/5 border-white/10"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(u,{htmlFor:"track",className:"text-sm",children:"Track/Category"}),e.jsx(h,{id:"track",value:J.track,onChange:e=>O(s=>({...s,track:e.target.value})),placeholder:"e.g., Main Stage, Workshop",className:"bg-white/5 border-white/10"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-1.5",children:[e.jsx(u,{className:"text-sm",children:"Speakers/Performers"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{value:$,onChange:e=>H(e.target.value),placeholder:"Add speaker name",className:"bg-white/5 border-white/10",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),Y())}),e.jsx(j,{type:"button",onClick:Y,variant:"outline",size:"sm",children:"Add"})]}),J.speakers&&J.speakers.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:J.speakers.map((s,a)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-600/20 text-orange-300 rounded-full text-xs",children:[e.jsx(S,{size:12}),s,e.jsx("button",{type:"button",onClick:()=>(e=>{O(s=>{var a;return{...s,speakers:null==(a=s.speakers)?void 0:a.filter((s,a)=>a!==e)}})})(a),className:"hover:text-red-400",children:e.jsx(p,{size:12})})]},a))})]}),e.jsxs("div",{className:"md:col-span-2 space-y-1.5",children:[e.jsx(u,{htmlFor:"description",className:"text-sm",children:"Description"}),e.jsx(f,{id:"description",value:J.description,onChange:e=>O(s=>({...s,description:e.target.value})),placeholder:"Session description...",className:"bg-white/5 border-white/10",rows:2})]})]}),e.jsxs(j,{onClick:()=>{if(!J.title)return void d({title:"Missing required fields",description:"Please fill in the title",variant:"destructive"});const e={id:(null==q?void 0:q.id)||Date.now().toString(),title:J.title,start_time:J.start_time,end_time:J.end_time,location:J.location,description:J.description,speakers:J.speakers,track:J.track};q?(I(s=>s.map(s=>s.id===q.id?e:s)),d({title:"Session updated"})):(I(s=>[...s,e].sort((e,s)=>(e.start_time||"").localeCompare(s.start_time||""))),d({title:"Session added"})),K()},className:"w-full bg-orange-600 hover:bg-orange-700",disabled:!J.title||!J.start_time,children:[e.jsx(_,{size:16,className:"mr-2"}),q?"Update Session":"Add Session"]})]})}),D.length>0?e.jsx("div",{className:"space-y-3",children:D.map(s=>e.jsx(b,{className:"bg-white/5 border-white/10 hover:bg-white/10 transition-colors",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.track&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-600/20 text-orange-300 rounded text-xs",children:s.track})}),e.jsx("h4",{className:"text-white font-medium truncate",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(y,{size:14}),s.start_time,s.end_time&&` - ${s.end_time}`]}),s.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{size:14}),s.location]})]}),s.speakers&&s.speakers.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.speakers.map((s,a)=>e.jsxs("span",{className:"text-xs text-orange-300 flex items-center gap-1",children:[e.jsx(S,{size:12}),s]},a))}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-2 line-clamp-2",children:s.description})]}),n&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(j,{onClick:()=>(e=>{B(e),O({title:e.title,start_time:e.start_time,end_time:e.end_time,location:e.location,description:e.description,speakers:e.speakers||[],track:e.track}),W(!0)})(s),variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",children:e.jsx(P,{size:14})}),e.jsx(j,{onClick:()=>{return e=s.id,I(s=>s.filter(s=>s.id!==e)),void d({title:"Session removed"});var e},variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-red-400",children:e.jsx(x,{size:14})})]})]})})},s.id))}):e.jsx(b,{className:"bg-white/5 border-white/10",children:e.jsxs(N,{className:"p-8 text-center",children:[e.jsx(y,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("h4",{className:"text-white font-medium mb-1",children:"No Sessions Yet"}),e.jsx("p",{className:"text-gray-400 text-sm",children:n?"Add sessions to build your event schedule":"The organizer hasn't added sessions yet"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-black/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-white flex items-center gap-2",children:[e.jsx(U,{size:18}),"Agenda File"]}),n&&e.jsxs("label",{children:[e.jsx("input",{type:"file",accept:".pdf,image/jpeg,image/png,image/jpg",onChange:V,className:"hidden",disabled:R}),e.jsx(j,{variant:"outline",size:"sm",className:"cursor-pointer border-white/20",disabled:R,asChild:!0,children:e.jsxs("span",{children:[e.jsx(z,{size:16,className:"mr-1"}),R?"Uploading...":T?"Replace":"Upload"]})})]})]}),T?e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{className:"bg-white/5 border-white/10 overflow-hidden",children:e.jsx(N,{className:"p-0",children:Q?e.jsx("div",{className:"aspect-[8.5/11] bg-white",children:e.jsx("iframe",{src:T,className:"w-full h-full",title:"Agenda PDF"})}):e.jsx("div",{className:"relative",children:e.jsx("img",{src:T,alt:"Agenda",className:"w-full h-auto"})})})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:T,download:"Event_Agenda",target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:e.jsxs(j,{variant:"outline",className:"w-full border-white/20",children:[e.jsx(F,{size:16,className:"mr-2"}),"Download"]})}),n&&e.jsx(j,{onClick:()=>{L(void 0),d({title:"Agenda file removed"})},variant:"outline",className:"border-red-500/50 text-red-400 hover:bg-red-500/10",children:e.jsx(x,{size:16})})]})]}):e.jsx(b,{className:"bg-white/5 border-white/10",children:e.jsxs(N,{className:"p-8 text-center",children:[e.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[e.jsx(U,{size:40,className:"text-gray-600"}),e.jsx(v,{size:40,className:"text-gray-600"})]}),e.jsx("h4",{className:"text-white font-medium mb-1",children:"No Agenda File"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:n?"Upload a PDF or image of your event agenda":"No agenda file has been uploaded yet"}),n&&e.jsxs("label",{children:[e.jsx("input",{type:"file",accept:".pdf,image/jpeg,image/png,image/jpg",onChange:V,className:"hidden"}),e.jsx(j,{className:"bg-orange-600 hover:bg-orange-700 cursor-pointer",asChild:!0,children:e.jsxs("span",{children:[e.jsx(z,{size:16,className:"mr-2"}),"Upload Agenda"]})})]})]})}),l&&e.jsx("div",{className:"mt-4 p-3 bg-orange-600/10 border border-orange-500/20 rounded-lg",children:e.jsx("p",{className:"text-orange-300 text-xs text-center",children:"ðŸŽ­ Demo Mode: All admin controls are enabled for demonstration"})})]})]})]})},R=({activeTab:o,onTabChange:c,onShowTripsPlusModal:j,tripId:p,basecamp:x,eventData:h,tripContext:u})=>{const{accentColors:f}=g(),{isAdmin:v,isLoading:b}=s(p),{isDemoMode:N}=m(),w=N||v,y=[{id:"agenda",label:"Agenda",icon:k,enabled:!0},{id:"calendar",label:"Calendar",icon:k,enabled:!0},{id:"chat",label:"Chat",icon:M,enabled:!1!==h.chatEnabled},{id:"media",label:"Media",icon:D,enabled:!1!==h.mediaUploadEnabled},{id:"lineup",label:"Line-up",icon:I,enabled:!0},{id:"polls",label:"Polls",icon:T,enabled:!1!==h.pollsEnabled},{id:"tasks",label:"Tasks",icon:a,enabled:!0}].filter(e=>e.enabled);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex whitespace-nowrap gap-2 mb-2 justify-start",children:y.map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>c(s.id),className:"flex items-center justify-center gap-1.5 px-3.5 py-2.5 min-h-[42px] rounded-xl font-medium transition-all duration-200 text-sm flex-1 "+(o===s.id?`bg-gradient-to-r ${f.gradient} text-white shadow-md`:"bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white"),children:[a&&e.jsx(a,{size:16}),s.label]},s.id)})}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:(()=>{switch(o){case"agenda":default:return e.jsx(L,{eventId:p,isAdmin:w,initialSessions:h.agenda,initialPdfUrl:h.pdfScheduleUrl});case"calendar":return e.jsx(d,{tripId:p});case"chat":return e.jsx(l,{enableGroupChat:!0,showBroadcasts:!0,isEvent:!0,tripId:p});case"media":return e.jsx(n,{tripId:p});case"lineup":return e.jsx(r,{speakers:h.speakers||[],userRole:w?"organizer":h.userRole||"attendee"});case"polls":return e.jsx(i,{tripId:p});case"tasks":return e.jsx(t,{eventId:p,isAdmin:w})}})()})]})};export{R as EventDetailContent};
