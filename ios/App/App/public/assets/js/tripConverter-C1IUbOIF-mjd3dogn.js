const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-Ta7FH5xW-mjd3dogn.js","assets/js/ui-vendor-BO3EQrMK-mjd3dogn.js","assets/js/react-vendor-D1R0t5S0-mjd3dogn.js","assets/js/supabase-DyX-XggK-mjd3dogn.js","assets/js/utils-DD44zzh--mjd3dogn.js","assets/index-Bc63Wok3.css"])))=>i.map(i=>d[i]);
var e,t,s,i,r,a,n,o,l,d,c,h,u,p,m,f,v,y,b,g,x,w,_,j,k,C,M,R,N,S,O,E,I,T,q=e=>{throw TypeError(e)},D=(e,t,s)=>t.has(e)||q("Cannot "+s),P=(e,t,s)=>(D(e,t,"read from private field"),s?s.call(e):t.get(e)),A=(e,t,s)=>t.has(e)?q("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),U=(e,t,s,i)=>(D(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),L=(e,t,s)=>(D(e,t,"access private method"),s);import{c as F,S as $,O as W,P as z,Q,U as H,V as K,Y,Z as V,_ as B,$ as J,a0 as Z,a1 as G,a2 as X,a3 as ee,a4 as te,o as se,s as ie,k as re,u as ae,d as ne,t as oe,X as le,I as de,l as ce,a5 as he,a as ue,b as pe}from"./index-Ta7FH5xW-mjd3dogn.js";import{r as me}from"./react-vendor-D1R0t5S0-mjd3dogn.js";import{j as fe}from"./ui-vendor-BO3EQrMK-mjd3dogn.js";import{_ as ve}from"./supabase-DyX-XggK-mjd3dogn.js";import{t as ye}from"./tripsData-DKwZ96V_-mjd3dogn.js";import{a as be}from"./select-CMjqEsxb-mjd3dogn.js";import{i as ge,j as xe,k as we,l as _e,m as je,n as ke,o as Ce,p as Me}from"./SettingsMenu-DFNATHGY-mjd3dogn.js";import{L as Re}from"./loader-circle-C0Dqayt8-mjd3dogn.js";import{a as Ne}from"./utils-DD44zzh--mjd3dogn.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=F("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Oe=F("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ee=F("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Ie=F("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Te=F("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),qe=F("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),De=F("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Pe=F("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),Ae=F("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ue=(C=class extends ${constructor(v,y){super(),A(this,f),A(this,e),A(this,t),A(this,s),A(this,i),A(this,r),A(this,a),A(this,n),A(this,o),A(this,l),A(this,d),A(this,c),A(this,h),A(this,u),A(this,p),A(this,m,new Set),this.options=y,U(this,e,v),U(this,o,null),U(this,n,W()),this.options.experimental_prefetchInRender||P(this,n).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(y)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(P(this,t).addObserver(this),Le(P(this,t),this.options)?L(this,f,v).call(this):this.updateResult(),L(this,f,x).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fe(P(this,t),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fe(P(this,t),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,L(this,f,w).call(this),L(this,f,_).call(this),P(this,t).removeObserver(this)}setOptions(s,i){const r=this.options,a=P(this,t);if(this.options=P(this,e).defaultQueryOptions(s),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof z(this.options.enabled,P(this,t)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");L(this,f,j).call(this),P(this,t).setOptions(this.options),r._defaulted&&!Q(this.options,r)&&P(this,e).getQueryCache().notify({type:"observerOptionsUpdated",query:P(this,t),observer:this});const n=this.hasListeners();n&&$e(P(this,t),a,this.options,r)&&L(this,f,v).call(this),this.updateResult(i),!n||P(this,t)===a&&z(this.options.enabled,P(this,t))===z(r.enabled,P(this,t))&&H(this.options.staleTime,P(this,t))===H(r.staleTime,P(this,t))||L(this,f,y).call(this);const o=L(this,f,b).call(this);!n||P(this,t)===a&&z(this.options.enabled,P(this,t))===z(r.enabled,P(this,t))&&o===P(this,p)||L(this,f,g).call(this,o)}getOptimisticResult(s){const n=P(this,e).getQueryCache().build(P(this,e),s),o=this.createResult(n,s);return function(e,t){if(!Q(e.getCurrentResult(),t))return!0;return!1}(this,o)&&(U(this,i,o),U(this,a,this.options),U(this,r,P(this,t).state)),o}getCurrentResult(){return P(this,i)}trackResult(e,t){const s={};return Object.keys(e).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),null==t||t(i),e[i])})}),s}trackProp(e){P(this,m).add(e)}getCurrentQuery(){return P(this,t)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(t){const s=P(this,e).defaultQueryOptions(t),i=P(this,e).getQueryCache().build(P(this,e),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return L(this,f,v).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),P(this,i)))}createResult(e,h){var u;const p=P(this,t),m=this.options,f=P(this,i),v=P(this,r),y=P(this,a),b=e!==p?e.state:P(this,s),{state:g}=e;let x,w={...g},_=!1;if(h._optimisticResults){const t=this.hasListeners(),s=!t&&Le(e,h),i=t&&$e(e,p,h,m);(s||i)&&(w={...w,...Z(g.data,e.options)}),"isRestoring"===h._optimisticResults&&(w.fetchStatus="idle")}let{error:j,errorUpdatedAt:k,status:C}=w;if(h.select&&void 0!==w.data)if(f&&w.data===(null==v?void 0:v.data)&&h.select===P(this,l))x=P(this,d);else try{U(this,l,h.select),x=h.select(w.data),x=G(null==f?void 0:f.data,x,h),U(this,d,x),U(this,o,null)}catch(I){U(this,o,I)}else x=w.data;if(void 0!==h.placeholderData&&void 0===x&&"pending"===C){let e;if((null==f?void 0:f.isPlaceholderData)&&h.placeholderData===(null==y?void 0:y.placeholderData))e=f.data;else if(e="function"==typeof h.placeholderData?h.placeholderData(null==(u=P(this,c))?void 0:u.state.data,P(this,c)):h.placeholderData,h.select&&void 0!==e)try{e=h.select(e),U(this,o,null)}catch(I){U(this,o,I)}void 0!==e&&(C="success",x=G(null==f?void 0:f.data,e,h),_=!0)}P(this,o)&&(j=P(this,o),x=P(this,d),k=Date.now(),C="error");const M="fetching"===w.fetchStatus,R="pending"===C,N="error"===C,S=R&&M,O=void 0!==x,E={status:C,fetchStatus:w.fetchStatus,isPending:R,isSuccess:"success"===C,isError:N,isInitialLoading:S,isLoading:S,data:x,dataUpdatedAt:w.dataUpdatedAt,error:j,errorUpdatedAt:k,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>b.dataUpdateCount||w.errorUpdateCount>b.errorUpdateCount,isFetching:M,isRefetching:M&&!R,isLoadingError:N&&!O,isPaused:"paused"===w.fetchStatus,isPlaceholderData:_,isRefetchError:N&&O,isStale:We(e,h),refetch:this.refetch,promise:P(this,n)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===E.status?e.reject(E.error):void 0!==E.data&&e.resolve(E.data)},s=()=>{const e=U(this,n,E.promise=W());t(e)},i=P(this,n);switch(i.status){case"pending":e.queryHash===p.queryHash&&t(i);break;case"fulfilled":"error"!==E.status&&E.data===i.value||s();break;case"rejected":"error"===E.status&&E.error===i.reason||s()}}return E}updateResult(e){const s=P(this,i),n=this.createResult(P(this,t),this.options);if(U(this,r,P(this,t).state),U(this,a,this.options),void 0!==P(this,r).data&&U(this,c,P(this,t)),Q(n,s))return;U(this,i,n);const o={};!1!==(null==e?void 0:e.listeners)&&(()=>{if(!s)return!0;const{notifyOnChangeProps:e}=this.options,t="function"==typeof e?e():e;if("all"===t||!t&&!P(this,m).size)return!0;const r=new Set(t??P(this,m));return this.options.throwOnError&&r.add("error"),Object.keys(P(this,i)).some(e=>{const t=e;return P(this,i)[t]!==s[t]&&r.has(t)})})()&&(o.listeners=!0),L(this,f,k).call(this,{...o,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&L(this,f,x).call(this)}},e=new WeakMap,t=new WeakMap,s=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,d=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakSet,v=function(e){L(this,f,j).call(this);let s=P(this,t).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(s=s.catch(K)),s},y=function(){L(this,f,w).call(this);const e=H(this.options.staleTime,P(this,t));if(Y||P(this,i).isStale||!V(e))return;const s=B(P(this,i).dataUpdatedAt,e);U(this,h,setTimeout(()=>{P(this,i).isStale||this.updateResult()},s+1))},b=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(P(this,t)):this.options.refetchInterval)??!1},g=function(e){L(this,f,_).call(this),U(this,p,e),!Y&&!1!==z(this.options.enabled,P(this,t))&&V(P(this,p))&&0!==P(this,p)&&U(this,u,setInterval(()=>{(this.options.refetchIntervalInBackground||J.isFocused())&&L(this,f,v).call(this)},P(this,p)))},x=function(){L(this,f,y).call(this),L(this,f,g).call(this,L(this,f,b).call(this))},w=function(){P(this,h)&&(clearTimeout(P(this,h)),U(this,h,void 0))},_=function(){P(this,u)&&(clearInterval(P(this,u)),U(this,u,void 0))},j=function(){const i=P(this,e).getQueryCache().build(P(this,e),this.options);if(i===P(this,t))return;const r=P(this,t);U(this,t,i),U(this,s,i.state),this.hasListeners()&&(null==r||r.removeObserver(this),i.addObserver(this))},k=function(s){X.batch(()=>{s.listeners&&this.listeners.forEach(e=>{e(P(this,i))}),P(this,e).getQueryCache().notify({query:P(this,t),type:"observerResultsUpdated"})})},C);function Le(e,t){return function(e,t){return!1!==z(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Fe(e,t,t.refetchOnMount)}function Fe(e,t,s){if(!1!==z(t.enabled,e)){const i="function"==typeof s?s(e):s;return"always"===i||!1!==i&&We(e,t)}return!1}function $e(e,t,s,i){return(e!==t||!1===z(i.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&We(e,s)}function We(e,t){return!1!==z(t.enabled,e)&&e.isStaleByTime(H(t.staleTime,e))}var ze=(T=class extends ${constructor(e,t){super(),A(this,O),A(this,M),A(this,R),A(this,N),A(this,S),U(this,M,e),this.setOptions(t),this.bindMethods(),L(this,O,E).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=P(this,M).defaultMutationOptions(e),Q(this.options,s)||P(this,M).getMutationCache().notify({type:"observerOptionsUpdated",mutation:P(this,N),observer:this}),(null==s?void 0:s.mutationKey)&&this.options.mutationKey&&ee(s.mutationKey)!==ee(this.options.mutationKey)?this.reset():"pending"===(null==(t=P(this,N))?void 0:t.state.status)&&P(this,N).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=P(this,N))||e.removeObserver(this)}onMutationUpdate(e){L(this,O,E).call(this),L(this,O,I).call(this,e)}getCurrentResult(){return P(this,R)}reset(){var e;null==(e=P(this,N))||e.removeObserver(this),U(this,N,void 0),L(this,O,E).call(this),L(this,O,I).call(this)}mutate(e,t){var s;return U(this,S,t),null==(s=P(this,N))||s.removeObserver(this),U(this,N,P(this,M).getMutationCache().build(P(this,M),this.options)),P(this,N).addObserver(this),P(this,N).execute(e)}},M=new WeakMap,R=new WeakMap,N=new WeakMap,S=new WeakMap,O=new WeakSet,E=function(){var e;const t=(null==(e=P(this,N))?void 0:e.state)??te();U(this,R,{...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})},I=function(e){X.batch(()=>{var t,s,i,r,a,n,o,l;if(P(this,S)&&this.hasListeners()){const d=P(this,R).variables,c=P(this,R).context;"success"===(null==e?void 0:e.type)?(null==(s=(t=P(this,S)).onSuccess)||s.call(t,e.data,d,c),null==(r=(i=P(this,S)).onSettled)||r.call(i,e.data,null,d,c)):"error"===(null==e?void 0:e.type)&&(null==(n=(a=P(this,S)).onError)||n.call(a,e.error,d,c),null==(l=(o=P(this,S)).onSettled)||l.call(o,void 0,e.error,d,c))}this.listeners.forEach(e=>{e(P(this,R))})})},T),Qe=me.createContext(!1);Qe.Provider;var He=me.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}());function Ke(e,t){return"function"==typeof e?e(...t):!!e}function Ye(){}var Ve=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Be(e,t,s){var i,r,a,n,o;const l=se(),d=me.useContext(Qe),c=me.useContext(He),h=l.defaultQueryOptions(e);null==(r=null==(i=l.getDefaultOptions().queries)?void 0:i._experimental_beforeQuery)||r.call(i,h),h._optimisticResults=d?"isRestoring":"optimistic",(e=>{e.suspense&&(void 0===e.staleTime&&(e.staleTime=1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(h),((e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))})(h,c),(e=>{me.useEffect(()=>{e.clearReset()},[e])})(c);const u=!l.getQueryCache().get(h.queryHash),[p]=me.useState(()=>new t(l,h)),m=p.getOptimisticResult(h);if(me.useSyncExternalStore(me.useCallback(e=>{const t=d?()=>{}:p.subscribe(X.batchCalls(e));return p.updateResult(),t},[p,d]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),me.useEffect(()=>{p.setOptions(h,{listeners:!1})},[h,p]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(h,m))throw Ve(h,p,c);if((({result:e,errorResetBoundary:t,throwOnError:s,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&Ke(s,[e.error,i]))({result:m,errorResetBoundary:c,throwOnError:h.throwOnError,query:l.getQueryCache().get(h.queryHash)}))throw m.error;if(null==(n=null==(a=l.getDefaultOptions().queries)?void 0:a._experimental_afterQuery)||n.call(a,h,m),h.experimental_prefetchInRender&&!Y&&((e,t)=>e.isLoading&&e.isFetching&&!t)(m,d)){const e=u?Ve(h,p,c):null==(o=l.getQueryCache().get(h.queryHash))?void 0:o.promise;null==e||e.catch(Ye).finally(()=>{p.updateResult()})}return h.notifyOnChangeProps?m:p.trackResult(m)}function Je(e,t){return Be(e,Ue)}function Ze(e,t){const s=se(),[i]=me.useState(()=>new ze(s,e));me.useEffect(()=>{i.setOptions(e)},[i,e]);const r=me.useSyncExternalStore(me.useCallback(e=>i.subscribe(X.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=me.useCallback((e,t)=>{i.mutate(e,t).catch(Ye)},[i]);if(r.error&&Ke(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:a,mutateAsync:r.mutate}}const Ge=["chat","calendar","concierge","media","payments","places","polls","tasks"],Xe=e=>me.useMemo(()=>{if("consumer"===e.trip_type)return{showChat:!0,showCalendar:!0,showConcierge:!0,showMedia:!0,showPayments:!0,showPlaces:!0,showPolls:!0,showTasks:!0,isFeatureEnabled:()=>!0};const t=e.enabled_features||Ge;return{showChat:t.includes("chat"),showCalendar:t.includes("calendar"),showConcierge:t.includes("concierge"),showMedia:t.includes("media"),showPayments:t.includes("payments"),showPlaces:t.includes("places"),showPolls:t.includes("polls"),showTasks:t.includes("tasks"),isFeatureEnabled:e=>t.includes(e)}},[e.enabled_features,e.trip_type]);const et={async createTrip(e){var t;try{const{data:{user:s}}=await ie.auth.getUser();if(!s)throw new Error("No authenticated user");if(!s.id)throw new Error("Invalid user state - missing ID");const{data:i}=await ie.from("profiles").select("subscription_status, subscription_product_id, email").eq("user_id",s.id).single(),{SUPER_ADMIN_EMAILS:r}=await ve(async()=>{const{SUPER_ADMIN_EMAILS:e}=await import("./index-Ta7FH5xW-mjd3dogn.js").then(e=>e.ad);return{SUPER_ADMIN_EMAILS:e}},__vite__mapDeps([0,1,2,3,4,5]));if((null==i?void 0:i.email)&&r.includes(i.email.toLowerCase().trim()));else{const r="active"===(null==i?void 0:i.subscription_status)?(null==(t=i.subscription_product_id)?void 0:t.includes("explorer"))?"explorer":"frequent-chraveler":"free",a=e.trip_type||"consumer",{count:n,error:o}=await ie.from("trips").select("*",{count:"exact",head:!0}).eq("created_by",s.id).eq("is_archived",!1).eq("trip_type",a);if(o)throw o;const l="free"===r?3:-1;if(-1!==l&&(n||0)>=l)throw new Error("TRIP_LIMIT_REACHED")}const{data:a,error:n}=await ie.functions.invoke("create-trip",{body:{name:e.name,description:e.description,destination:e.destination,start_date:e.start_date,end_date:e.end_date,trip_type:e.trip_type||"consumer",cover_image_url:e.cover_image_url,enabled_features:e.enabled_features}});if(n)throw new Error(n.message||"Failed to create trip");if(!(null==a?void 0:a.success))throw new Error((null==a?void 0:a.error)||"Failed to create trip");return a.trip}catch(s){throw s}},async getUserTrips(e){var t,s;try{if(e??await re.isDemoModeEnabled()){return ye.map(e=>{let t,s;if(e.dateRange)try{const i=e.dateRange.split(" - ");if(2===i.length){const e=i[1].match(/\d{4}/),r=e?e[0]:(new Date).getFullYear().toString(),a=i[0].trim(),n=i[1].replace(/,?\s*\d{4}/,"").trim(),o={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},l=e=>{const t=e.match(/([A-Za-z]{3})\s+(\d{1,2})/);if(t){const e=o[t[1]]||"01",s=t[2].padStart(2,"0");return`${r}-${e}-${s}`}};t=l(a),s=l(n)}}catch(i){}return{id:String(e.id),name:e.title,description:e.description,start_date:t,end_date:s,destination:e.location,cover_image_url:"string"==typeof e.coverPhoto?e.coverPhoto:"",created_by:"demo-user",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),is_archived:e.archived||!1,trip_type:e.trip_type||"consumer",basecamp_name:void 0,basecamp_address:void 0}})}const{data:{user:i}}=await ie.auth.getUser();if(!i)return[];const{data:r,error:a}=await ie.from("trips").select("*").eq("created_by",i.id).eq("is_archived",!1).eq("is_hidden",!1).order("created_at",{ascending:!1});if(a)throw a;const{data:n,error:o}=await ie.from("trip_join_requests").select("trip_id, status").eq("user_id",i.id).eq("status","pending"),l=(null==n?void 0:n.map(e=>e.trip_id))||[];let d=[];if(l.length>0){const{data:e,error:t}=await ie.from("trips").select("*").in("id",l).eq("is_archived",!1).eq("is_hidden",!1);!t&&e&&(d=e.map(e=>({...e,membership_status:"pending"})))}const c=[...(r||[]).map(e=>({...e,membership_status:"owner"})),...d],{data:h,error:u}=await ie.from("trip_members").select("trip_id").eq("user_id",i.id);if(!u&&h&&h.length>0){const e=h.map(e=>e.trip_id).filter(e=>!c.some(t=>t.id===e));if(e.length>0){const{data:t,error:s}=await ie.from("trips").select("*").in("id",e).eq("is_archived",!1).eq("is_hidden",!1);!s&&t&&c.push(...t.map(e=>({...e,membership_status:"member"})))}}if(0===c.length)return[];const p=c.map(e=>e.id),[m,f]=await Promise.all([ie.from("trip_members").select("trip_id").in("trip_id",p),ie.from("trip_links").select("trip_id").in("trip_id",p)]),v=new Map,y=new Map;return null==(t=m.data)||t.forEach(e=>{v.set(e.trip_id,(v.get(e.trip_id)||0)+1)}),null==(s=f.data)||s.forEach(e=>{y.set(e.trip_id,(y.get(e.trip_id)||0)+1)}),c.map(e=>({...e,trip_members:[{count:v.get(e.id)||0}],trip_links:[{count:y.get(e.id)||0}]}))}catch(i){return[]}},async getTripById(e){try{const{data:t,error:s}=await ie.from("trips").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){return null}},async updateTrip(e,t){try{const{data:s,error:i}=await ie.from("trips").update(t).eq("id",e).select("id").maybeSingle();return!i&&!!s}catch(s){return!1}},async archiveTrip(e){try{const{error:t}=await ie.from("trips").update({is_archived:!0}).eq("id",e);return!t}catch(t){return!1}},async getTripMembers(e){try{const{data:t,error:s}=await ie.from("trip_members").select("\n          id,\n          user_id,\n          role,\n          created_at\n        ").eq("trip_id",e);if(s)throw s;if(!t||0===t.length)return[];const i=t.map(e=>e.user_id),{data:r,error:a}=await ie.from("profiles").select("user_id, display_name, avatar_url, email").in("user_id",i),n=new Map((null==r?void 0:r.map(e=>[e.user_id,e]))||[]);return t.map(e=>({...e,profiles:n.get(e.user_id)||null}))}catch(t){return[]}},async addTripMember(e,t,s="member"){try{const{error:i}=await ie.from("trip_members").insert({trip_id:e,user_id:t,role:s});return!i}catch(i){return!1}}},tt="trips",st=()=>{const{user:e}=ae(),{isDemoMode:t}=ne(),s=se(),{data:i=[],isLoading:r,refetch:a}=Je({queryKey:[tt,null==e?void 0:e.id,t],queryFn:async()=>t?await et.getUserTrips(!0):e?await et.getUserTrips(!1):[],enabled:t||!!e,staleTime:3e5});me.useEffect(()=>{if(t||!e)return;const i=ie.channel(`trip_join_requests:${e.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"trip_join_requests",filter:`user_id=eq.${e.id}`},e=>{var t;const i=e.new.status;"pending"!==(null==(t=e.old)?void 0:t.status)||"approved"!==i&&"rejected"!==i||s.invalidateQueries({queryKey:[tt]})}).subscribe();return()=>{ie.removeChannel(i)}},[e,t,s]),me.useEffect(()=>{if(t||!e)return;const i=ie.channel("trip-members-changes").on("postgres_changes",{event:"*",schema:"public",table:"trip_members"},e=>{e.new,e.old;s.invalidateQueries({queryKey:[tt]})}).subscribe();return()=>{ie.removeChannel(i)}},[e,t,s]);const n=Ze({mutationFn:s=>{if(!(t||e&&e.id))throw new Error("AUTHENTICATION_REQUIRED");return et.createTrip(s)},onSuccess:e=>{e&&s.invalidateQueries({queryKey:[tt]})}}),o=Ze({mutationFn:({id:e,updates:t})=>et.updateTrip(e,t),onSuccess:()=>{s.invalidateQueries({queryKey:[tt]})}}),l=Ze({mutationFn:e=>et.archiveTrip(e),onSuccess:()=>{s.invalidateQueries({queryKey:[tt]})}});return{trips:i,loading:r,initializing:r,createTrip:async e=>{try{return await n.mutateAsync(e)}catch(t){throw t}},updateTrip:async(e,t)=>{try{return await o.mutateAsync({id:e,updates:t}),!0}catch(s){return!1}},archiveTrip:async e=>{try{return await l.mutateAsync(e),!0}catch(t){return!1}},refreshTrips:a}},it=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,rt=()=>{const e="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let s=0;s<8;s++)t+=e.charAt(Math.floor(36*Math.random()));return`chravel${t}`},at=async e=>{const{data:t}=await ie.from("trip_invites").select("id").eq("code",e).single();return!!t},nt=({isOpen:e,tripName:t,requireApproval:s,expireIn7Days:i,tripId:r,proTripId:a})=>{const[n,o]=me.useState(!1),[l,d]=me.useState(""),[c,h]=me.useState(!1),{isDemoMode:u}=ne();me.useEffect(()=>{e&&p()},[e,s,i,r,a,u]);const p=async()=>{h(!0);const e=a||r;if(!e)return oe.error("No trip ID provided"),void h(!1);if(u){const t=`demo-${e}-${Date.now().toString(36)}`;return d(`https://p.chravel.app/j/${t}`),h(!1),void oe.success("Demo invite link created!")}if(!it.test(e))return oe.error("This appears to be a demo trip. Create a real trip to generate shareable invite links."),void h(!1);const{data:{user:t}}=await ie.auth.getUser();if(!t)return oe.error("Please log in to create invite links"),void h(!1);const n=await(async(e=5)=>{for(let t=0;t<e;t++){const e=rt();if(!(await at(e)))return e}return crypto.randomUUID()})(),o=await(async(e,t)=>{var r;try{const{data:{user:a}}=await ie.auth.getUser();if(!a)return oe.error("Please log in to create invite links"),!1;const{data:n,error:o}=await ie.from("trips").select("id, created_by").eq("id",e).single();if(o||!n)return oe.error("Trip not found in database. Make sure this is a real trip, not a demo trip."),!1;if(n.created_by!==a.id){const{data:t}=await ie.from("trip_admins").select("id").eq("trip_id",e).eq("user_id",a.id).single();if(!t)return oe.error("Only the trip creator or admins can create invite links"),!1}const l={trip_id:e,code:t,created_by:a.id,is_active:!0,current_uses:0,require_approval:s,expires_at:i?new Date(Date.now()+6048e5).toISOString():null},{error:d}=await ie.from("trip_invites").insert([l]);return!d||("42501"===d.code||(null==(r=d.message)?void 0:r.includes("RLS"))?oe.error("Permission denied. You may not have access to create invites for this trip."):oe.error("Failed to create invite link. Please try again."),!1)}catch(a){return oe.error("An unexpected error occurred. Please try again."),!1}})(e,n);o?(d(`https://p.chravel.app/j/${n}`),h(!1),oe.success("Invite link created!")):h(!1)},m=async()=>{if(l)try{await navigator.clipboard.writeText(l),o(!0),oe.success("Link copied to clipboard!"),setTimeout(()=>o(!1),2e3)}catch(e){oe.error("Failed to copy link")}};return{copied:n,inviteLink:l,loading:c,isDemoMode:u,regenerateInviteToken:async()=>{var e;if(l&&!u)try{const t=null==(e=l.split("/join/")[1])?void 0:e.split("?")[0];t&&!t.startsWith("demo-")&&await ie.from("trip_invites").update({is_active:!1}).eq("code",t)}catch(t){}await p()},resendInvite:async(e,s)=>{if(!l)return oe.error("No invite link available. Please generate one first."),!1;h(!0);try{if(e){const s=encodeURIComponent(`Join my trip: ${t}`),i=encodeURIComponent(`Hi there!\n\nYou're invited to join my trip "${t}"!\n\nClick here to join: ${l}\n\nIf you have the Chravel app installed, this link will open it directly. Otherwise, you can join through your browser!\n\nSee you there!`);return window.open(`mailto:${e}?subject=${s}&body=${i}`),oe.success(`Invite sent to ${e}`),!0}if(s){const e=encodeURIComponent(`You're invited to join my trip "${t}"! ${l} (Opens in Chravel app if installed)`);return window.open(`sms:${s}?body=${e}`),oe.success(`Invite sent to ${s}`),!0}return oe.error("Please provide an email or phone number"),!1}catch(i){return oe.error("Failed to resend invite. Please try again."),!1}finally{h(!1)}},handleCopyLink:m,handleShare:async()=>{if(l)if(navigator.share)try{await navigator.share({title:`Join my trip: ${t}`,text:`You're invited to join my trip "${t}"!`,url:l})}catch(e){}else m()},handleEmailInvite:()=>{if(!l)return;const e=encodeURIComponent(`Join my trip: ${t}`),s=encodeURIComponent(`Hi there!\n\nYou're invited to join my trip "${t}"!\n\nClick here to join: ${l}\n\nIf you have the Chravel app installed, this link will open it directly. Otherwise, you can join through your browser!\n\nSee you there!`);window.open(`mailto:?subject=${e}&body=${s}`)},handleSMSInvite:()=>{if(!l)return;const e=encodeURIComponent(`You're invited to join my trip "${t}"! ${l} (Opens in Chravel app if installed)`);window.open(`sms:?body=${e}`)}}},ot=({tripName:e,onClose:t})=>fe.jsxs(fe.Fragment,{children:[fe.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-10 hover:bg-white/20 text-white w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Close",children:fe.jsx(le,{size:20})}),fe.jsxs("div",{className:"mb-3 pr-10",children:[fe.jsx("h2",{className:"text-xl font-bold text-white",children:"Invite to Trip"}),fe.jsx("p",{className:"text-gray-400 text-sm",children:e})]})]}),lt=({inviteLink:e,loading:t,copied:s,isDemoMode:i=!1,onCopyLink:r,onRegenerate:a})=>{const n=null==e?void 0:e.includes("/join/demo-");return fe.jsxs("div",{className:"mb-3",children:[fe.jsxs("div",{className:"flex items-center justify-between mb-2",children:[fe.jsx("label",{className:"block text-gray-300 text-sm",children:"Share Link"}),fe.jsxs("button",{onClick:a,disabled:t,className:"flex items-center gap-1 text-xs text-gray-400 hover:text-gray-300 transition-colors disabled:opacity-50",children:[fe.jsx(Ae,{size:12}),"Regenerate"]})]}),fe.jsxs("div",{className:"flex gap-2",children:[fe.jsx("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-gray-300 text-sm font-mono truncate",children:t?"Generating invite link...":e||"Failed to generate link"}),fe.jsxs("button",{onClick:r,disabled:t||!e,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-xl transition-colors flex items-center gap-2 disabled:opacity-50",children:[s?fe.jsx(be,{size:16}):fe.jsx(Se,{size:16}),fe.jsx("span",{className:"hidden sm:inline",children:s?"Copied!":"Copy"})]})]}),(i||n)&&e&&fe.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-yellow-400 bg-yellow-400/10 border border-yellow-400/20 rounded-lg px-3 py-2",children:[fe.jsx(de,{size:14}),fe.jsx("span",{children:"Demo mode - This link is for demonstration only. Create a real trip to share working invite links."})]})]})},dt=({requireApproval:e,expireIn7Days:t,onRequireApprovalChange:s,onExpireIn7DaysChange:i})=>fe.jsxs("div",{className:"mb-3 space-y-2",children:[fe.jsxs("div",{className:"flex items-center justify-between",children:[fe.jsx("label",{className:"text-gray-300 text-sm",children:"Require approval to join"}),fe.jsx("input",{type:"checkbox",checked:e,onChange:e=>s(e.target.checked),className:"rounded"})]}),fe.jsxs("div",{className:"flex items-center justify-between",children:[fe.jsx("label",{className:"text-gray-300 text-sm",children:"Link expires in 7 days"}),fe.jsx("input",{type:"checkbox",checked:t,onChange:e=>i(e.target.checked),className:"rounded"})]})]}),ct=()=>fe.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3",children:[fe.jsx("h4",{className:"text-white font-medium mb-1",children:"How it works"}),fe.jsxs("ul",{className:"text-gray-300 text-xs space-y-0.5",children:[fe.jsx("li",{children:"â€¢ Share the link with friends you want to invite"}),fe.jsx("li",{children:"â€¢ They'll be able to join your trip instantly"}),fe.jsx("li",{children:"â€¢ Collaborators can chat, add places, and more"})]})]}),ht=({isOpen:e,onClose:t,tripName:s,tripId:i,proTripId:r})=>{const[a,n]=me.useState(!0),[o,l]=me.useState(!1),{copied:d,inviteLink:c,loading:h,isDemoMode:u,regenerateInviteToken:p,handleCopyLink:m}=nt({isOpen:e,tripName:s,requireApproval:a,expireIn7Days:o,tripId:i,proTripId:r});return e?fe.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:fe.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-4 max-w-md w-full max-h-[500px] overflow-y-auto animate-scale-in relative",children:[fe.jsx(ot,{tripName:s,onClose:t}),fe.jsx(lt,{inviteLink:c,loading:h,copied:d,isDemoMode:u,onCopyLink:m,onRegenerate:p}),fe.jsx(dt,{requireApproval:a,expireIn7Days:o,onRequireApprovalChange:n,onExpireIn7DaysChange:l}),fe.jsx(ct,{})]})}):null},ut=({isOpen:e,onClose:t,onConfirm:s,tripTitle:i,isLoading:r=!1})=>fe.jsx(ge,{open:e,onOpenChange:t,children:fe.jsxs(xe,{className:"bg-background border-border",children:[fe.jsxs(we,{children:[fe.jsxs("div",{className:"flex items-center gap-3",children:[fe.jsx(ce,{className:"h-5 w-5 text-destructive"}),fe.jsx(_e,{children:"Delete Trip For Me"})]}),fe.jsxs(je,{className:"text-muted-foreground",children:['Are you sure you want to delete "',fe.jsx("strong",{children:i}),'" from your account?',fe.jsx("br",{}),fe.jsx("br",{}),fe.jsx("span",{className:"text-destructive/80",children:"This action cannot be undone."})," You will lose access to this trip and all its content. The trip will still exist for other members.",fe.jsx("br",{}),fe.jsx("br",{}),"To regain access, someone in the trip will need to send you a new invite."]})]}),fe.jsxs(ke,{children:[fe.jsx(Ce,{onClick:t,disabled:r,children:"Cancel"}),fe.jsx(Me,{onClick:()=>{s()},disabled:r,className:"bg-destructive hover:bg-destructive/80 text-destructive-foreground",children:r?"Deleting...":"Delete For Me"})]})]})}),pt=e=>["1","2","3","4","5","6","7","8","9","10","11","12"].includes(e)?"consumer":"pro",mt=e=>"consumer"===pt(e),ft=({isOpen:e,onClose:t,onExport:s,tripName:i,tripId:r})=>{const a=mt(r),[n,o]=me.useState(["calendar","payments","polls","places","tasks"]),[l,d]=me.useState(!1),[c,h]=me.useState(null);return e?fe.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2",children:fe.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-2xl max-w-md w-full max-h-[85vh] border border-gray-700 flex flex-col",children:[fe.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-700 flex-shrink-0",children:[fe.jsxs("div",{className:"flex items-center gap-2",children:[fe.jsx("div",{className:"bg-blue-600 p-1.5 rounded-lg",children:fe.jsx(Ie,{size:16})}),fe.jsxs("div",{children:[fe.jsx("h2",{className:"text-base font-bold text-white",children:"Export Trip Summary"}),fe.jsx("p",{className:"text-[10px] text-gray-400",children:"Create a PDF summary"})]})]}),fe.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-1",disabled:l,children:fe.jsx(le,{size:18})})]}),fe.jsx("div",{className:"p-3 overflow-y-auto flex-1",children:fe.jsxs(fe.Fragment,{children:[fe.jsxs("div",{className:"mb-2",children:[fe.jsxs("h3",{className:"text-white font-semibold text-xs mb-0.5",children:["Trip: ",i]}),fe.jsx("p",{className:"text-gray-400 text-[10px]",children:"Select sections to include in your PDF"})]}),fe.jsx("div",{className:"grid grid-cols-2 gap-1.5 mb-2",children:[{id:"calendar",label:"Calendar",icon:"ðŸ“…"},{id:"payments",label:"Payments",icon:"ðŸ’°"},{id:"polls",label:"Polls",icon:"ðŸ“Š"},{id:"places",label:"Places",icon:"ðŸ“"},{id:"tasks",label:"Tasks",icon:"âœ…"},{id:"broadcasts",label:"Broadcast Log",icon:"ðŸ“¢",proOnly:!0},{id:"roster",label:"Roster & Contacts",icon:"ðŸ‘¥",proOnly:!0},{id:"attachments",label:"Attachments",icon:"ðŸ“Ž",proOnly:!0}].map(e=>{const t=e.proOnly&&a;return fe.jsxs("label",{className:"flex items-center gap-1.5 p-1.5 rounded-lg border transition-all "+(t?"bg-gray-800/50 border-gray-700/50 opacity-50 cursor-not-allowed":n.includes(e.id)?"bg-blue-900/30 border-blue-500 cursor-pointer hover:border-blue-400":"bg-gray-800 border-gray-700 cursor-pointer hover:border-gray-600"),children:[fe.jsx("input",{type:"checkbox",checked:n.includes(e.id)&&!t,onChange:()=>{return!t&&(s=e.id,void o(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]));var s},disabled:t,className:"w-3 h-3 rounded border-gray-600 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-900 disabled:cursor-not-allowed"}),fe.jsxs("div",{className:"flex-1 min-w-0",children:[fe.jsxs("div",{className:"text-white text-[11px] font-medium flex items-center gap-1",children:[fe.jsx("span",{children:e.icon}),fe.jsx("span",{className:"truncate",children:e.label})]}),t&&fe.jsx("div",{className:"text-[9px] text-gray-500",children:"Pro only"})]})]},e.id)})}),c&&fe.jsx("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-1.5 mb-2",children:fe.jsx("p",{className:"text-red-200 text-[10px]",children:c})}),fe.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-1.5",children:fe.jsxs("p",{className:"text-gray-300 text-[10px]",children:[fe.jsx("strong",{children:"ðŸ”’"})," Emails and phone numbers hidden. Chat and AI history never included."]})})]})}),fe.jsxs("div",{className:"flex items-center justify-end gap-2 p-3 border-t border-gray-700 flex-shrink-0",children:[fe.jsx("button",{onClick:t,disabled:l,className:"px-3 py-1.5 text-xs rounded-lg text-gray-300 hover:text-white transition-colors disabled:opacity-50",children:"Cancel"}),fe.jsx("button",{onClick:async()=>{if(0!==n.length){d(!0),h(null);try{await s(n),t()}catch(e){h(e instanceof Error?e.message:"Failed to export trip summary")}finally{d(!1)}}else h("Please select at least one section to export")},disabled:l||0===n.length,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 text-xs rounded-lg transition-all flex items-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed",children:l?fe.jsxs(fe.Fragment,{children:[fe.jsx(Re,{size:14,className:"animate-spin"}),"Generating..."]}):fe.jsxs(fe.Fragment,{children:[fe.jsx(Oe,{size:14}),"Download PDF"]})})]})]})}):null},vt=he((e,t)=>({addedMembers:{},addMember:(t,s)=>{e(e=>{const i=e.addedMembers[t]||[];return i.some(e=>e.id===s.id)?e:{addedMembers:{...e.addedMembers,[t]:[...i,s]}}})},removeMember:(t,s)=>{e(e=>{const i=e.addedMembers[t]||[];return{addedMembers:{...e.addedMembers,[t]:i.filter(e=>e.id!==s)}}})},getAddedMembers:e=>t().addedMembers[e]||[],clearAll:()=>{e({addedMembers:{}})}}));async function yt(e,t,s={}){const{preOpenedWindow:i,mimeType:r}=s,a=e.type||r||"application/octet-stream",n=function(){const e=navigator.userAgent||navigator.vendor||window.opera||"",t=/iPad|iPhone|iPod/.test(e),s="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;return t||s}(),o=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone;try{const s=navigator,i=new File([e],t,{type:a});if((null==s?void 0:s.canShare)&&(null==s?void 0:s.share)&&s.canShare({files:[i]})){const e=s.share({files:[i],title:t}),r=new Promise((e,t)=>setTimeout(()=>t(new Error("Share timeout")),15e3));return void(await Promise.race([e,r]))}}catch(h){}const l=URL.createObjectURL(e),d=()=>{setTimeout(()=>URL.revokeObjectURL(l),8e3)};if(n&&(function(){const e=navigator.userAgent||"",t=/^((?!chrome|android|crios|fxios|edgios).)*safari/i.test(e),s=/AppleWebKit/.test(e)&&!/Chrome|CriOS|Firefox|FxiOS|EdgA|EdgiOS/.test(e);return t||s}()||o)){if(i)try{return i.location.href=l,void d()}catch{}if(o){const e=document.createElement("a");return e.href=l,e.download=t,e.target="_self",e.style.display="none",document.body.appendChild(e),e.click(),setTimeout(()=>document.body.removeChild(e),100),void d()}if(window.open(l,"_blank"))return void d()}const c=document.createElement("a");c.href=l,c.download=t,c.target="_blank",document.body.appendChild(c),c.click(),document.body.removeChild(c),d()}function bt(){const{user:e}=ae(),[t,s]=me.useState(null),[i,r]=me.useState(!0);me.useEffect(()=>{if(!e)return s(null),void r(!1);(async()=>{try{const{data:t,error:i}=await ie.from("profiles").select("subscription_status, subscription_product_id").eq("user_id",e.id).single();if(i)return s({plan:"free",status:"inactive"}),void r(!1);let a="free";const n=null==t?void 0:t.subscription_product_id;"active"===(null==t?void 0:t.subscription_status)&&n&&(a=n.includes("explorer")?"explorer":n.includes("frequent")||n.includes("chraveler")?"frequent-chraveler":n.includes("enterprise")?"enterprise":n.includes("pro")?"pro":"explorer"),s({plan:a,status:"active"===(null==t?void 0:t.subscription_status)?"active":"inactive",productId:n})}catch(t){s({plan:"free",status:"inactive"})}finally{r(!1)}})()},[e]);return{subscription:t,loading:i,isPro:"free"!==(null==t?void 0:t.plan)&&"active"===(null==t?void 0:t.status),isExplorer:"explorer"===(null==t?void 0:t.plan)&&"active"===(null==t?void 0:t.status),isFrequentChraveler:"frequent-chraveler"===(null==t?void 0:t.plan)&&"active"===(null==t?void 0:t.status),isEnterprise:"enterprise"===(null==t?void 0:t.plan)&&"active"===(null==t?void 0:t.status),isActive:"active"===(null==t?void 0:t.status)||"trial"===(null==t?void 0:t.status),isFree:"free"===(null==t?void 0:t.plan)||!(null==t?void 0:t.status)||"inactive"===(null==t?void 0:t.status)}}const gt=pe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),xt=me.forwardRef(({className:e,variant:t,...s},i)=>fe.jsx("div",{ref:i,role:"alert",className:ue(gt({variant:t}),e),...s}));xt.displayName="Alert";const wt=me.forwardRef(({className:e,...t},s)=>fe.jsx("h5",{ref:s,className:ue("mb-1 font-medium leading-none tracking-tight",e),...t}));wt.displayName="AlertTitle";const _t=me.forwardRef(({className:e,...t},s)=>fe.jsx("div",{ref:s,className:ue("text-sm [&_p]:leading-relaxed",e),...t}));function jt(){const[e,t]=me.useState(!1);return me.useEffect(()=>{const e=()=>{const e=window.innerWidth,s=e<=768,i=window.innerHeight>e,r=navigator.userAgent||navigator.vendor||window.opera,a=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(r.toLowerCase());t(s&&i&&a)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e}function kt(e){var t,s,i,r;let a="";if(e.start_date&&e.end_date)try{const t=new Date(e.start_date),s=new Date(e.end_date);a=`${Ne(t,"MMM d")} - ${Ne(s,"MMM d, yyyy")}`}catch{a=`${e.start_date} - ${e.end_date}`}const n=(null==(s=null==(t=e.trip_members)?void 0:t[0])?void 0:s.count)??0,o=(null==(r=null==(i=e.trip_links)?void 0:i[0])?void 0:r.count)??0;return{id:e.id,title:e.name||"Untitled Trip",location:e.destination||"No destination",dateRange:a,description:e.description||"",participants:[],coverPhoto:e.cover_image_url,trip_type:e.trip_type||"consumer",archived:e.is_archived,peopleCount:n,placesCount:o,membership_status:e.membership_status,created_by:e.created_by}}function Ct(e){return e.map(kt)}function Mt(e){const t=kt(e);return{id:e.id,title:t.title,description:t.description||"",location:t.location,dateRange:t.dateRange,proTripCategory:"Other",tags:[],participants:[],budget:{total:0,spent:0,categories:[]},itinerary:[],roster:[],roomAssignments:[],schedule:[],perDiem:{dailyRate:0,currency:"USD",startDate:e.start_date||"",endDate:e.end_date||"",participants:[]},settlement:[],medical:[],compliance:[],media:[],sponsors:[],archived:e.is_archived,privacy_mode:"standard",ai_access_enabled:!0}}function Rt(e){const t=kt(e);return{id:e.id,title:t.title,location:t.location,dateRange:t.dateRange,category:"Conference",description:t.description||"",tags:[],capacity:100,registrationStatus:"open",attendanceExpected:0,groupChatEnabled:!0,archived:e.is_archived,tracks:[],speakers:[],sessions:[],sponsors:[],exhibitors:[],userRole:"organizer",checkedInCount:0,participants:[],budget:{total:0,spent:0,categories:[]},itinerary:[]}}_t.displayName="AlertDescription";export{xt as A,Se as C,Ge as D,Ie as F,Te as H,ht as I,De as L,Pe as M,Ae as R,ft as T,vt as a,Ee as b,ut as c,bt as d,qe as e,_t as f,jt as g,Ct as h,mt as i,Mt as j,Rt as k,kt as l,Je as m,Oe as n,yt as o,Ze as p,pt as q,Xe as r,wt as s,et as t,st as u};
