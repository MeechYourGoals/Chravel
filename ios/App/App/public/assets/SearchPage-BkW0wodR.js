import{r as o,j as e,h as C,X as R,u as L,e as z,m as y}from"./index-CAsyng-G.js";import{I as D}from"./input-CkF3ltBX.js";import{B as x}from"./button-_Pv0MPf0.js";import{B as c}from"./badge-J4HoHOpX.js";import{u as E}from"./useDemoMode-BjEsodyt.js";import{t as M,p as T,e as F}from"./eventsMockData-BosocEr8.js";import{E as B}from"./EmptyStateWithDemo-CFlhZxOf.js";import{F as $}from"./filter-CGCfNQCb.js";import{M as A}from"./map-pin-BpJQ3jXK.js";import{C as P}from"./calendar-B2WMmvpa.js";import{U as I}from"./users-DV9oPzUN.js";import{A as U}from"./archive-D_5MXjjN.js";const q=({isOpen:i,onClose:n,title:m,children:u,className:g})=>(o.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i]),o.useEffect(()=>{const d=l=>{l.key==="Escape"&&n()};return i&&document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[i,n]),i?e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:n}),e.jsxs("div",{className:C("absolute inset-x-0 top-0 bottom-0 bg-background","flex flex-col animate-slide-in-bottom","shadow-enterprise-lg",g),style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-background/95 backdrop-blur-md sticky top-0 z-10",children:[m&&e.jsx("h2",{className:"text-h2 font-semibold text-foreground",children:m}),e.jsx("button",{onClick:n,className:"flex items-center justify-center w-10 h-10 rounded-full hover:bg-muted transition-colors ml-auto",children:e.jsx(R,{size:20,className:"text-muted-foreground"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:u})]})]}):null),ee=()=>{const[i,n]=o.useState(""),[m,u]=o.useState([]);o.useState("all");const[g,d]=o.useState(!1),[l,f]=o.useState({status:"all",type:"all",dateRange:"all"}),j=L();z();const{isDemoMode:b}=E(),v=o.useCallback(a=>{if(!a.trim()){u([]);return}if(!b){u([]);return}const r=a.toLowerCase(),h=[];M.forEach(t=>{let s=0;t.title.toLowerCase().includes(r)&&(s+=3),t.location.toLowerCase().includes(r)&&(s+=2),t.dateRange.toLowerCase().includes(r)&&(s+=1),s>0&&h.push({id:t.id.toString(),type:"regular",title:t.title,location:t.location,dateRange:t.dateRange,status:new Date(t.dateRange.split(" - ")[1])<new Date?"archived":"upcoming",participants:t.participants.length,matchScore:s,deepLink:`/trip/${t.id}`})}),Object.values(T).forEach(t=>{var p;let s=0;t.title.toLowerCase().includes(r)&&(s+=3),t.location.toLowerCase().includes(r)&&(s+=2),t.dateRange.toLowerCase().includes(r)&&(s+=1),s>0&&h.push({id:t.id,type:"pro",title:t.title,location:t.location,dateRange:t.dateRange,status:new Date(t.dateRange.split(" - ")[1])<new Date?"archived":"upcoming",participants:((p=t.participants)==null?void 0:p.length)||0,matchScore:s,deepLink:`/tour/pro/${t.id}`})}),Object.values(F).forEach(t=>{var p;let s=0;t.title.toLowerCase().includes(r)&&(s+=3),t.location.toLowerCase().includes(r)&&(s+=2),t.dateRange.toLowerCase().includes(r)&&(s+=1),s>0&&h.push({id:t.id,type:"event",title:t.title,location:t.location,dateRange:t.dateRange,status:new Date(t.dateRange.split(" - ")[1])<new Date?"archived":"upcoming",participants:((p=t.participants)==null?void 0:p.length)||0,matchScore:s,deepLink:`/event/${t.id}`})});const S=h.filter(t=>!(l.status!=="all"&&t.status!==l.status||l.type!=="all"&&t.type!==l.type)).sort((t,s)=>s.matchScore-t.matchScore);u(S)},[l]),N=a=>{j(a.deepLink)},w=a=>{switch(a){case"active":return e.jsx(c,{className:"bg-green-500/20 text-green-400",children:"Active"});case"archived":return e.jsxs(c,{className:"bg-gray-500/20 text-gray-400",children:[e.jsx(U,{size:12,className:"mr-1"}),"Archived"]});case"upcoming":return e.jsx(c,{className:"bg-blue-500/20 text-blue-400",children:"Upcoming"});default:return null}},k=a=>{switch(a){case"pro":return e.jsx(c,{className:"bg-yellow-500/20 text-yellow-400",children:"Pro"});case"event":return e.jsx(c,{className:"bg-purple-500/20 text-purple-400",children:"Event"});default:return e.jsx(c,{className:"bg-blue-500/20 text-blue-400",children:"Trip"})}};return e.jsxs("div",{className:"min-h-screen bg-black text-white p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Search Trips"}),e.jsx("p",{className:"text-gray-400",children:"Find any trip, active or archived"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx(D,{type:"text",placeholder:"Search by name, location, date...",value:i,onChange:a=>{n(a.target.value),v(a.target.value)},className:"pl-10 pr-12 bg-gray-900/80 border-gray-700 text-white placeholder-gray-400 h-12"}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>d(!0),className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:e.jsx($,{size:18})})]}),(l.status!=="all"||l.type!=="all")&&e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[l.status!=="all"&&e.jsxs(c,{variant:"secondary",className:"bg-gray-800",children:["Status: ",l.status]}),l.type!=="all"&&e.jsxs(c,{variant:"secondary",className:"bg-gray-800",children:["Type: ",l.type]})]}),e.jsxs("div",{className:"space-y-3",children:[b?i&&m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:['No trips found for "',i,'"']}):i?null:e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Start typing to search your trips..."}):e.jsx(B,{icon:y,title:"Search unavailable",description:"Turn on Demo Mode to search through sample trips",showDemoPrompt:!0}),m.map(a=>e.jsxs("div",{onClick:()=>N(a),className:"bg-gray-900/50 border border-gray-800 rounded-lg p-4 cursor-pointer hover:bg-gray-800/50 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white mb-1",children:a.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{size:14}),a.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{size:14}),a.dateRange]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{size:14}),a.participants]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[k(a.type),w(a.status)]})]},`${a.type}-${a.id}`))]}),e.jsx(q,{isOpen:g,onClose:()=>d(!1),title:"Filter Results",children:e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300 mb-3 block",children:"Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["all","active","upcoming","archived"].map(a=>e.jsx(x,{variant:l.status===a?"default":"outline",size:"sm",onClick:()=>f(r=>({...r,status:a})),className:"capitalize",children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300 mb-3 block",children:"Trip Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["all","regular","pro","event"].map(a=>e.jsx(x,{variant:l.type===a?"default":"outline",size:"sm",onClick:()=>f(r=>({...r,type:a})),className:"capitalize",children:a==="regular"?"Trip":a},a))})]}),e.jsx(x,{onClick:()=>{f({status:"all",type:"all",dateRange:"all"}),d(!1)},variant:"outline",className:"w-full",children:"Clear Filters"})]})})]})};export{ee as default};
