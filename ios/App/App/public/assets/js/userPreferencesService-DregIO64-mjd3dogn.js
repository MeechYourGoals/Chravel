import{s as e}from"./index-Ta7FH5xW-mjd3dogn.js";import"./ui-vendor-BO3EQrMK-mjd3dogn.js";import"./react-vendor-D1R0t5S0-mjd3dogn.js";import"./supabase-DyX-XggK-mjd3dogn.js";import"./utils-DD44zzh--mjd3dogn.js";const r={hide_sample_content:!1,ai_concierge_preferences:{dietary:[],vibe:[],accessibility:[],business:[],entertainment:[],lifestyle:[],budgetMin:0,budgetMax:1e3,timePreference:"flexible"}},t={push_enabled:!0,email_enabled:!0,sms_enabled:!1,chat_messages:!1,mentions_only:!0,broadcasts:!0,tasks:!0,payments:!0,calendar_events:!0,calendar_reminders:!0,polls:!0,trip_invites:!0,join_requests:!0,basecamp_updates:!0,quiet_hours_enabled:!1,quiet_start:"22:00",quiet_end:"08:00",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},n={async get(t){try{const{data:n,error:s}=await e.from("user_preferences").select("preferences").eq("user_id",t).maybeSingle();return s?r:{...r,...(null==n?void 0:n.preferences)||{}}}catch(n){return r}},async set(r,t){try{const n={...await this.get(r),...t},{error:s}=await e.from("user_preferences").upsert({user_id:r,preferences:n},{onConflict:"user_id"});return!s}catch(n){return!1}},async getAIPreferences(e){return(await this.get(e)).ai_concierge_preferences||r.ai_concierge_preferences},async setAIPreferences(e,r){return this.set(e,{ai_concierge_preferences:r})},async getNotificationPreferences(r){try{const{data:n,error:s}=await e.from("notification_preferences").select("*").eq("user_id",r).maybeSingle();return s?t:n?{...t,...n}:t}catch(n){return t}},async updateNotificationPreferences(r,t){try{const{data:n,error:s}=await e.from("notification_preferences").upsert({user_id:r,...t,updated_at:(new Date).toISOString()},{onConflict:"user_id"}).select().single();if(s)throw s;return n}catch(n){throw n}}};export{n as userPreferencesService};
