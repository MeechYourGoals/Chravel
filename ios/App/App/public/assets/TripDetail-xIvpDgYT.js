const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CRcFwzxV.js","assets/index-CAsyng-G.js","assets/index-jbo_OdjT.css","assets/TripDetailModals-DY4m2USS.js","assets/avatarUtils-ZvhZyhoo.js","assets/demoModeService-C5DiNBaU.js","assets/select-XMWUKs4c.js","assets/dialog-Cx8-WJ72.js","assets/user-D5s9iwuG.js","assets/SettingsMenu-BOjv86PG.js","assets/pro-DyZQNKrs.js","assets/crown-DXGOoHaJ.js","assets/building-Br_mTkeH.js","assets/useSavedRecommendations-POBY9hWZ.js","assets/button-_Pv0MPf0.js","assets/input-CkF3ltBX.js","assets/SeatManagementSection-BFc4Xk5u.js","assets/camera-CpfyDuxc.js","assets/badge-J4HoHOpX.js","assets/users-DV9oPzUN.js","assets/clock-z7hIZNmF.js","assets/card-BWfXNMJp.js","assets/loader-circle-CkOmKk2l.js","assets/circle-check-big-DmirYwTN.js","assets/calendar-B2WMmvpa.js","assets/plus-CmGY8coD.js","assets/map-pin-BpJQ3jXK.js","assets/archive-D_5MXjjN.js","assets/eventsMockData-BosocEr8.js","assets/useDemoMode-BjEsodyt.js","assets/dropdown-menu-DesE2wBT.js","assets/chevron-right-ubVvME2N.js","assets/share-2-bKBjjyB8.js","assets/calendar-BbT1q-ev.js","assets/chevron-left-DBJ6HR3b.js","assets/avatar-BV3tYu8d.js","assets/filter-CGCfNQCb.js","assets/ellipsis-vertical-CzHInxXT.js","assets/sparkles-C9bYoM-0.js","assets/TripDetailHeader-BfsFRuqu.js","assets/arrow-left-DsyQ2ZDs.js","assets/TripTabs-B7ZlRlhB.js","assets/googleMapsService-BX6sUOcy.js","assets/tabs-Ba-WFkQA.js","assets/web-CwqLIoU7.js","assets/web-CzRNOWlx.js","assets/web-DOmIY6e4.js"])))=>i.map(i=>d[i]);
var we=Object.defineProperty;var ve=(t,s,a)=>s in t?we(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var V=(t,s,a)=>ve(t,typeof s!="symbol"?s+"":s,a);import{c as je,j as e,e as se,r as d,v as g,w as ae,W as Ne,C as $,x as M,_ as U,y as O,o as Te,z as Ee,A as ie,u as re,k as ne,R as oe}from"./index-CAsyng-G.js";import{u as Pe,M as Se,I as Ce,C as ke,a as Me,P as Le,T as ce,b as Re,c as Ie}from"./TripDetailModals-DY4m2USS.js";import{T as De}from"./TripDetailHeader-BfsFRuqu.js";import{T as Ae,P as Ue,C as ze}from"./TripTabs-B7ZlRlhB.js";import{u as le}from"./useDemoMode-BjEsodyt.js";import{g as de,a as ue}from"./eventsMockData-BosocEr8.js";import{P as me}from"./plus-CmGY8coD.js";import{C as _e}from"./clock-z7hIZNmF.js";import{M as he}from"./map-pin-BpJQ3jXK.js";import{U as pe}from"./users-DV9oPzUN.js";import{f as I}from"./calendar-BbT1q-ev.js";import{d as Fe,U as Ve}from"./SeatManagementSection-BFc4Xk5u.js";import{C as X}from"./user-D5s9iwuG.js";import{C as xe}from"./camera-CpfyDuxc.js";import{I as $e}from"./avatarUtils-ZvhZyhoo.js";import{M as Oe}from"./SettingsMenu-BOjv86PG.js";import{C as Be}from"./calendar-B2WMmvpa.js";import{C as He}from"./googleMapsService-BX6sUOcy.js";import{S as qe}from"./sparkles-C9bYoM-0.js";import{A as Ye}from"./arrow-left-DsyQ2ZDs.js";import{E as Xe}from"./ellipsis-vertical-CzHInxXT.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=je("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),Ge=({activeTab:t,onTabChange:s,onShowTripsPlusModal:a,tripId:i,tripName:r,basecamp:c})=>{const{isDemoMode:l}=le();return e.jsx(Ae,{activeTab:t,onTabChange:s,tripId:i,tripName:r,basecamp:c,showPlaces:!0,showConcierge:!0,isDemoMode:l})},fe=(t={})=>{const s=se(),a=d.useRef(),i=d.useRef(!1);return d.useEffect(()=>{var l;if(!s)return;a.current=((l=window.visualViewport)==null?void 0:l.height)||window.innerHeight;const r=()=>{var h,p;if(!window.visualViewport)return;const n=window.visualViewport.height,o=(a.current||0)-n,m=o>150;m!==i.current&&(i.current=m,m?(document.body.classList.add("keyboard-visible"),(h=t.onShow)==null||h.call(t),t.adjustViewport&&document.documentElement.style.setProperty("--keyboard-height",`${o}px`)):(document.body.classList.remove("keyboard-visible"),(p=t.onHide)==null||p.call(t),t.adjustViewport&&document.documentElement.style.removeProperty("--keyboard-height")))},c=n=>{const o=n.target;if(o&&(o.tagName==="INPUT"||o.tagName==="TEXTAREA")){if(t.preventZoom&&/iPad|iPhone|iPod/.test(navigator.userAgent)){const m=o.style.fontSize;o.style.fontSize="16px";const h=()=>{o.style.fontSize=m,o.removeEventListener("blur",h)};o.addEventListener("blur",h)}setTimeout(()=>{o.scrollIntoView({behavior:"smooth",block:"center"})},300)}};return window.visualViewport&&window.visualViewport.addEventListener("resize",r),document.addEventListener("focusin",c),()=>{window.visualViewport&&window.visualViewport.removeEventListener("resize",r),document.removeEventListener("focusin",c),document.body.classList.remove("keyboard-visible"),document.documentElement.style.removeProperty("--keyboard-height")}},[s,t.preventZoom,t.adjustViewport,t.onShow,t.onHide]),{isKeyboardVisible:i.current}},z=({onRefresh:t,threshold:s=80,maxPullDistance:a=120})=>{const[i,r]=d.useState(!1),[c,l]=d.useState(!1),[n,o]=d.useState(0),m=d.useRef(0),h=d.useRef(0);return d.useEffect(()=>{const p=v=>{(window.scrollY||document.documentElement.scrollTop)===0&&(m.current=v.touches[0].clientY,r(!0))},u=v=>{if(!i||c)return;h.current=v.touches[0].clientY;const j=h.current-m.current;if(j>0){v.preventDefault();const x=Math.min(j*.5,a);o(x),x>=s&&n<s&&g.medium()}},b=async()=>{if(i){if(n>=s){l(!0),await g.success();try{await t()}finally{l(!1)}}r(!1),o(0)}};return document.addEventListener("touchstart",p,{passive:!0}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",b),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",b)}},[i,c,n,s,a,t]),{isPulling:i,isRefreshing:c,pullDistance:n,shouldTrigger:n>=s}},_=({isRefreshing:t,pullDistance:s,threshold:a})=>{const i=Math.min(s/a*100,100),r=Math.min(s/a,1);return e.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-center items-center transition-opacity",style:{transform:`translateY(${s}px)`,opacity:r,pointerEvents:"none"},children:e.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-full p-3 shadow-lg border border-white/10",children:e.jsx(ae,{size:20,className:`text-white ${t?"animate-spin":""}`,style:{transform:`rotate(${i*3.6}deg)`}})})})},Ze=()=>e.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(t=>e.jsxs("div",{className:`flex gap-3 ${t%2===0?"flex-row-reverse":""}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-1/2"})]})]},t))}),Je=()=>e.jsx("div",{className:"space-y-3 animate-pulse",children:[1,2,3].map(t=>e.jsx("div",{className:"bg-white/10 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/20"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/20 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]})]})},t))}),We=()=>e.jsx("div",{className:"space-y-4 animate-pulse",children:e.jsxs("div",{className:"bg-white/10 rounded-xl p-6",children:[e.jsx("div",{className:"h-6 bg-white/20 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:Array(35).fill(0).map((t,s)=>e.jsx("div",{className:"aspect-square bg-white/10 rounded"},s))})]})}),Qe=()=>e.jsx("div",{className:"grid grid-cols-3 gap-2 animate-pulse",children:Array(9).fill(0).map((t,s)=>e.jsx("div",{className:"aspect-square bg-white/10 rounded-lg"},s))}),K=({tripId:t,isEvent:s=!1})=>{const a=d.useRef(null),i=d.useRef(null),[r,c]=d.useState([]),[l,n]=d.useState(!0),[o,m]=d.useState({}),{inputMessage:h,setInputMessage:p,replyingTo:u,clearReply:b,sendMessage:v}=Pe({tripId:t}),{isPulling:j,isRefreshing:x,pullDistance:w,shouldTrigger:P}=z({onRefresh:async()=>{n(!0),await new Promise(f=>setTimeout(f,1e3)),n(!1)},threshold:80}),{isKeyboardVisible:L}=fe({preventZoom:!0,adjustViewport:!0,onShow:()=>{setTimeout(()=>{var f;(f=a.current)==null||f.scrollIntoView({behavior:"smooth"})},300)}});d.useEffect(()=>{setTimeout(()=>n(!1),800)},[]),d.useEffect(()=>{var f;(f=a.current)==null||f.scrollIntoView({behavior:"smooth"})},[r]);const S=async(f=!1,N=!1,T)=>{await g.light();const E=await v({isBroadcast:f,isPayment:N,paymentData:T});E&&c(F=>[...F,E])},y=async(f,N)=>{await g.light();const T={...o};T[f]||(T[f]={});const E=T[f][N]||{count:0,userReacted:!1};E.userReacted=!E.userReacted,E.count+=E.userReacted?1:-1,T[f][N]=E,m(T)};return e.jsxs("div",{className:"flex flex-col h-full bg-black relative",children:[e.jsx(_,{isRefreshing:x,pullDistance:w,threshold:80}),e.jsx("div",{ref:i,className:"flex-1 overflow-y-auto px-4 py-4",style:{maxHeight:L?"calc(100vh - 300px)":"calc(100vh - 280px)"},children:l?e.jsx(Ze,{}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{messages:r,reactions:o,onReaction:y,emptyStateTitle:"Start the conversation",emptyStateDescription:"Send your first message to the group"}),e.jsx("div",{ref:a})]})}),u&&e.jsx("div",{className:"px-4 py-2 border-t border-white/10 bg-black/80",children:e.jsx(Ce,{replyTo:u,onCancel:b})}),e.jsx("div",{className:"sticky bottom-0 bg-black border-t border-white/10 px-4 py-3 safe-bottom",children:e.jsx(ke,{inputMessage:h,onInputChange:p,onSendMessage:S,onKeyPress:f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),S())},apiKey:"",isTyping:!1,tripMembers:[],hidePayments:s})})]})},et=({tripId:t})=>{const[s,a]=d.useState(new Date),[i,r]=d.useState(!0),[c]=d.useState([{id:"1",title:"Airport Pickup",date:new Date,time:"10:00 AM",location:"JFK Airport",participants:4,color:"from-blue-500 to-blue-600"},{id:"2",title:"Hotel Check-in",date:new Date,time:"2:00 PM",location:"Grand Hotel NYC",participants:4,color:"from-purple-500 to-purple-600"}]),{isPulling:l,isRefreshing:n,pullDistance:o}=z({onRefresh:async()=>{r(!0),await new Promise(h=>setTimeout(h,1e3)),r(!1)}});d.useEffect(()=>{setTimeout(()=>r(!1),700)},[]);const m=async()=>{await g.medium()};return e.jsxs("div",{className:"flex flex-col h-full bg-black relative",children:[e.jsx(_,{isRefreshing:n,pullDistance:o,threshold:80}),i?e.jsx("div",{className:"px-4 py-4",children:e.jsx(We,{})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-4 border-b border-white/10",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide gap-3",children:Array.from({length:7},(h,p)=>{const u=new Date;u.setDate(u.getDate()+p);const b=I(u,"yyyy-MM-dd")===I(s,"yyyy-MM-dd");return e.jsxs("button",{onClick:async()=>{await g.light(),a(u)},className:`
                  flex flex-col items-center justify-center
                  min-w-[60px] h-[70px] rounded-xl
                  transition-all duration-200
                  active:scale-95
                  ${b?"bg-gradient-to-b from-blue-500 to-blue-600 text-white shadow-lg":"bg-white/10 text-gray-300"}
                `,children:[e.jsx("span",{className:"text-xs font-medium uppercase",children:I(u,"EEE")}),e.jsx("span",{className:"text-2xl font-bold mt-1",children:I(u,"d")})]},p)})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:I(s,"MMMM d, yyyy")}),e.jsx("button",{onClick:m,className:"p-2 bg-blue-600 rounded-lg active:scale-95 transition-transform",children:e.jsx(me,{size:20,className:"text-white"})})]}),e.jsx("div",{className:"space-y-3",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No events scheduled"})]}):c.map(h=>e.jsxs("button",{onClick:async()=>{await g.light()},className:"w-full bg-white/10 rounded-xl p-4 active:scale-98 transition-transform",children:[e.jsx("div",{className:`w-1 h-full absolute left-0 top-0 rounded-l-xl bg-gradient-to-b ${h.color}`}),e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-white font-semibold text-left",children:h.title}),e.jsx("span",{className:"text-sm text-gray-400",children:h.time})]}),h.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300 mb-2",children:[e.jsx(he,{size:14}),e.jsx("span",{children:h.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(pe,{size:14}),e.jsxs("span",{children:[h.participants," attending"]})]})]},h.id))})]})]})]})},tt=({tripId:t})=>{const[s,a]=d.useState([{id:"1",title:"Book flights",completed:!0,assignee:"Sarah"},{id:"2",title:"Reserve hotel rooms",completed:!1,assignee:"Mike",dueDate:"Tomorrow"},{id:"3",title:"Plan day 1 itinerary",completed:!1,assignee:"Alex"}]),[i,r]=d.useState(!0),[c,l]=d.useState(!0),[n,o]=d.useState(null),{isPulling:m,isRefreshing:h,pullDistance:p}=z({onRefresh:async()=>{l(!0),await new Promise(x=>setTimeout(x,1e3)),l(!1)}});d.useEffect(()=>{setTimeout(()=>l(!1),600)},[]);const u=async x=>{await g.success(),a(s.map(w=>w.id===x?{...w,completed:!w.completed}:w))},b=async x=>{await g.heavy(),o(null),setTimeout(()=>{a(s.filter(w=>w.id!==x))},150)},v=s.filter(x=>!x.completed),j=s.filter(x=>x.completed);return e.jsxs("div",{className:"flex flex-col h-full bg-black px-4 py-4 relative",children:[e.jsx(_,{isRefreshing:h,pullDistance:p,threshold:80}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Trip Tasks"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[v.length," pending · ",j.length," completed"]})]}),e.jsx("button",{onClick:async()=>{await g.medium()},className:"p-3 bg-blue-600 rounded-lg active:scale-95 transition-transform",children:e.jsx(me,{size:20,className:"text-white"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c?e.jsx(Je,{}):e.jsx("div",{className:"space-y-3 mb-6",children:v.map(x=>{const w=n===x.id;return e.jsxs("div",{className:"relative overflow-hidden rounded-xl",onTouchStart:P=>{const L=P.touches[0].clientX,S=f=>{const N=f.touches[0].clientX;L-N>80&&(o(x.id),g.light())},y=()=>{document.removeEventListener("touchmove",S),document.removeEventListener("touchend",y)};document.addEventListener("touchmove",S),document.addEventListener("touchend",y)},onClick:()=>{w&&o(null)},children:[e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 bg-red-500/20",children:e.jsx("button",{onClick:P=>{P.stopPropagation(),b(x.id)},className:"p-3 bg-red-500 rounded-lg",children:e.jsx(Fe,{size:18,className:"text-white"})})}),e.jsx("div",{className:`bg-white/10 rounded-xl p-4 transition-transform ${w?"-translate-x-24":"translate-x-0"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:()=>u(x.id),className:"mt-0.5 flex-shrink-0 w-6 h-6 rounded-full border-2 border-gray-400 flex items-center justify-center active:scale-95 transition-transform",children:x.completed&&e.jsx(X,{size:14,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-medium",children:x.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[x.assignee&&e.jsxs("span",{className:"text-xs text-gray-400",children:["@",x.assignee]}),x.dueDate&&e.jsx("span",{className:"text-xs text-orange-400",children:x.dueDate})]})]})]})})]},x.id)})}),j.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:async()=>{await g.light(),r(!i)},className:"flex items-center justify-between w-full mb-3 py-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-400",children:["Completed (",j.length,")"]}),e.jsx("span",{className:"text-gray-400",children:i?"−":"+"})]}),i&&e.jsx("div",{className:"space-y-3",children:j.map(x=>e.jsx("div",{className:"bg-white/5 rounded-xl p-4 opacity-60",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:()=>u(x.id),className:"mt-0.5 flex-shrink-0 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center active:scale-95 transition-transform",children:e.jsx(X,{size:14,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-300 line-through",children:x.title}),x.assignee&&e.jsxs("span",{className:"text-xs text-gray-500",children:["@",x.assignee]})]})]})},x.id))})]})]})]})},st=({onLongPress:t,threshold:s=500})=>{const a=d.useRef(),i=d.useRef(),r=d.useCallback(n=>{const o="touches"in n?{x:n.touches[0].clientX,y:n.touches[0].clientY}:{x:n.clientX,y:n.clientY};i.current=o,a.current=window.setTimeout(async()=>{await g.medium(),t()},s)},[t,s]),c=d.useCallback(n=>{if(a.current&&i.current){const o="touches"in n?{x:n.touches[0].clientX,y:n.touches[0].clientY}:{x:n.clientX,y:n.clientY};Math.sqrt(Math.pow(o.x-i.current.x,2)+Math.pow(o.y-i.current.y,2))>10&&clearTimeout(a.current)}},[]),l=d.useCallback(()=>{a.current&&clearTimeout(a.current)},[]);return{onTouchStart:r,onTouchMove:c,onTouchEnd:l,onMouseDown:r,onMouseMove:c,onMouseUp:l,onMouseLeave:l}},at=(t,s,a=80)=>t.includes("unsplash.com")?`${t}?w=${s}&q=${a}&fm=webp&auto=format`:t,it=(t=10,s=10)=>{const a=document.createElement("canvas");a.width=t,a.height=s;const i=a.getContext("2d");return i&&(i.fillStyle="rgba(255, 255, 255, 0.1)",i.fillRect(0,0,t,s)),a.toDataURL()},rt=({src:t,alt:s,width:a=800,height:i,className:r="",quality:c=80,loading:l="lazy",onLoad:n})=>{const[o,m]=d.useState(!1),[h,p]=d.useState(!1),u=it(),b=()=>{m(!0),n==null||n()},v=()=>{p(!0)};return h?e.jsx("div",{className:`${r} bg-white/10 flex items-center justify-center`,children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Failed to load image"})}):e.jsxs("div",{className:`relative ${r}`,children:[!o&&e.jsx("div",{className:"absolute inset-0 bg-cover bg-center blur-xl",style:{backgroundImage:`url(${u})`}}),e.jsx("img",{src:at(t,a,c),alt:s,width:a,height:i,loading:l,onLoad:b,onError:v,className:`
          ${r}
          transition-opacity duration-300
          ${o?"opacity-100":"opacity-0"}
        `})]})};var C;(function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"})(C||(C={}));var D;(function(t){t.Rear="REAR",t.Front="FRONT"})(D||(D={}));var A;(function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"})(A||(A={}));class nt extends Ne{async getPhoto(s){return new Promise(async(a,i)=>{if(s.webUseInput||s.source===C.Photos)this.fileInputExperience(s,a,i);else if(s.source===C.Prompt){let r=document.querySelector("pwa-action-sheet");r||(r=document.createElement("pwa-action-sheet"),document.body.appendChild(r)),r.header=s.promptLabelHeader||"Photo",r.cancelable=!1,r.options=[{title:s.promptLabelPhoto||"From Photos"},{title:s.promptLabelPicture||"Take Picture"}],r.addEventListener("onSelection",async c=>{c.detail===0?this.fileInputExperience(s,a,i):this.cameraExperience(s,a,i)})}else this.cameraExperience(s,a,i)})}async pickImages(s){return new Promise(async(a,i)=>{this.multipleFileInputExperience(a,i)})}async cameraExperience(s,a,i){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=s.direction===D.Front?"user":"environment",document.body.appendChild(r);try{await r.componentOnReady(),r.addEventListener("onPhoto",async c=>{const l=c.detail;l===null?i(new $("User cancelled photos app")):l instanceof Error?i(l):a(await this._getCameraPhoto(l,s)),r.dismiss(),document.body.removeChild(r)}),r.present()}catch{this.fileInputExperience(s,a,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(s,a,i)}fileInputExperience(s,a,i){let r=document.querySelector("#_capacitor-camera-input");const c=()=>{var l;(l=r.parentNode)===null||l===void 0||l.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",l=>{const n=r.files[0];let o="jpeg";if(n.type==="image/png"?o="png":n.type==="image/gif"&&(o="gif"),s.resultType==="dataUrl"||s.resultType==="base64"){const m=new FileReader;m.addEventListener("load",()=>{if(s.resultType==="dataUrl")a({dataUrl:m.result,format:o});else if(s.resultType==="base64"){const h=m.result.split(",")[1];a({base64String:h,format:o})}c()}),m.readAsDataURL(n)}else a({webPath:URL.createObjectURL(n),format:o}),c()}),r.addEventListener("cancel",l=>{i(new $("User cancelled photos app")),c()})),r.accept="image/*",r.capture=!0,s.source===C.Photos||s.source===C.Prompt?r.removeAttribute("capture"):s.direction===D.Front?r.capture="user":s.direction===D.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(s,a){let i=document.querySelector("#_capacitor-camera-input-multiple");const r=()=>{var c;(c=i.parentNode)===null||c===void 0||c.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",c=>{const l=[];for(let n=0;n<i.files.length;n++){const o=i.files[n];let m="jpeg";o.type==="image/png"?m="png":o.type==="image/gif"&&(m="gif"),l.push({webPath:URL.createObjectURL(o),format:m})}s({photos:l}),r()}),i.addEventListener("cancel",c=>{a(new $("User cancelled photos app")),r()})),i.accept="image/*",i.click()}_getCameraPhoto(s,a){return new Promise((i,r)=>{const c=new FileReader,l=s.type.split("/")[1];a.resultType==="uri"?i({webPath:URL.createObjectURL(s),format:l,saved:!1}):(c.readAsDataURL(s),c.onloadend=()=>{const n=c.result;a.resultType==="dataUrl"?i({dataUrl:n,format:l,saved:!1}):i({base64String:n.split(",")[1],format:l,saved:!1})},c.onerror=n=>{r(n)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const G=M("Camera",{web:()=>new nt});function ot(t){t.CapacitorUtils.Synapse=new Proxy({},{get(s,a){return new Proxy({},{get(i,r){return(c,l,n)=>{const o=t.Capacitor.Plugins[a];if(o===void 0){n(new Error(`Capacitor plugin ${a} not found`));return}if(typeof o[r]!="function"){n(new Error(`Method ${r} not found in Capacitor plugin ${a}`));return}(async()=>{try{const m=await o[r](c);l(m)}catch(m){n(m)}})()}}})}})}function ct(t){t.CapacitorUtils.Synapse=new Proxy({},{get(s,a){return t.cordova.plugins[a]}})}function ge(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?ot(window):window.cordova!==void 0&&ct(window))}var B;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t.ExternalCache="EXTERNAL_CACHE",t.LibraryNoCloud="LIBRARY_NO_CLOUD",t.Temporary="TEMPORARY"})(B||(B={}));var Z;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(Z||(Z={}));const lt=M("Filesystem",{web:()=>U(()=>import("./web-CRcFwzxV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43])).then(t=>new t.FilesystemWeb)});ge();const dt=M("Geolocation",{web:()=>U(()=>import("./web-CwqLIoU7.js"),__vite__mapDeps([44,1,2])).then(t=>new t.GeolocationWeb)});ge();const R=M("PushNotifications",{}),ut=M("Share",{web:()=>U(()=>import("./web-CzRNOWlx.js"),__vite__mapDeps([45,1,2])).then(t=>new t.ShareWeb)});var H;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(H||(H={}));var J;(function(t){t.None="NONE",t.Slide="SLIDE",t.Fade="FADE"})(J||(J={}));const W=M("StatusBar");var Q;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(Q||(Q={}));const ee=M("LocalNotifications",{web:()=>U(()=>import("./web-DOmIY6e4.js"),__vite__mapDeps([46,1,2])).then(t=>new t.LocalNotificationsWeb)}),k=class k{constructor(){}static getInstance(){return k.instance||(k.instance=new k),k.instance}async initializeApp(){if(!O.isNativePlatform()){console.log("Running in web mode");return}await this.initializeStatusBar(),await this.initializePushNotifications(),await this.initializeLocalNotifications()}async initializeStatusBar(){try{await W.setStyle({style:H.Dark}),await W.setBackgroundColor({color:"#000000"})}catch(s){console.error("Error initializing status bar:",s)}}async initializePushNotifications(){try{await R.requestPermissions(),await R.register(),R.addListener("registration",s=>{console.log("Push registration success, token: "+s.value)}),R.addListener("registrationError",s=>{console.error("Error on registration: "+JSON.stringify(s))}),R.addListener("pushNotificationReceived",s=>{console.log("Push notification received: ",s)}),R.addListener("pushNotificationActionPerformed",s=>{console.log("Push notification action performed",s)})}catch(s){console.error("Error initializing push notifications:",s)}}async initializeLocalNotifications(){try{await ee.requestPermissions()}catch(s){console.error("Error initializing local notifications:",s)}}async takePicture(){try{return(await G.getPhoto({quality:90,allowEditing:!0,resultType:A.Uri,source:C.Camera})).webPath||null}catch(s){return console.error("Error taking picture:",s),null}}async selectImage(){try{return(await G.getPhoto({quality:90,allowEditing:!0,resultType:A.Uri,source:C.Photos})).webPath||null}catch(s){return console.error("Error selecting image:",s),null}}async getCurrentPosition(){try{return await dt.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4})}catch(s){return console.error("Error getting current position:",s),null}}async shareContent(s,a,i){try{return await ut.share({title:s,text:a,url:i,dialogTitle:"Share Trip"}),!0}catch(r){return console.error("Error sharing content:",r),!1}}async saveFile(s,a){try{return(await lt.writeFile({path:a,data:s,directory:B.Documents})).uri}catch(i){return console.error("Error saving file:",i),null}}async scheduleLocalNotification(s,a,i){try{await ee.schedule({notifications:[{title:s,body:a,id:Date.now(),schedule:{at:i},sound:void 0,attachments:void 0,actionTypeId:"",extra:null}]})}catch(r){console.error("Error scheduling local notification:",r)}}isNativePlatform(){return O.isNativePlatform()}getPlatform(){return O.getPlatform()}};V(k,"instance");let q=k;const te=q.getInstance(),mt=({tripId:t})=>{const[s]=d.useState([{id:"1",type:"image",url:"https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0",uploadedBy:"Sarah",uploadedAt:new Date},{id:"2",type:"image",url:"https://images.unsplash.com/photo-1469474968028-56623f02e42e",uploadedBy:"Mike",uploadedAt:new Date}]),[a,i]=d.useState("all"),[r,c]=d.useState(!0),{isPulling:l,isRefreshing:n,pullDistance:o}=z({onRefresh:async()=>{c(!0),await new Promise(u=>setTimeout(u,1e3)),c(!1)}});d.useEffect(()=>{setTimeout(()=>c(!1),500)},[]);const m=async()=>{await g.medium();try{const u=await te.takePicture();u&&console.log("Photo captured:",u)}catch(u){console.error("Error taking picture:",u)}},h=async()=>{await g.medium();try{const u=await te.selectImage();u&&console.log("Image selected:",u)}catch(u){console.error("Error selecting image:",u)}},p=s.filter(u=>a==="all"?!0:a==="photos"?u.type==="image":a==="videos"?u.type==="video":!0);return e.jsxs("div",{className:"flex flex-col h-full bg-black relative",children:[e.jsx(_,{isRefreshing:n,pullDistance:o,threshold:80}),e.jsx("div",{className:"px-4 py-4 border-b border-white/10",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:m,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 rounded-xl font-medium active:scale-95 transition-transform",children:[e.jsx(xe,{size:20}),e.jsx("span",{children:"Take Photo"})]}),e.jsxs("button",{onClick:h,className:"flex items-center justify-center gap-2 bg-white/10 text-white px-4 py-3 rounded-xl font-medium active:scale-95 transition-transform",children:[e.jsx(Ve,{size:20}),e.jsx("span",{children:"Upload"})]})]})}),e.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/10",children:["all","photos","videos"].map(u=>e.jsx("button",{onClick:async()=>{await g.light(),i(u)},className:`
              px-4 py-2 rounded-lg text-sm font-medium transition-all
              active:scale-95
              ${a===u?"bg-blue-600 text-white":"bg-white/10 text-gray-300"}
            `,children:u.charAt(0).toUpperCase()+u.slice(1)},u))}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:r?e.jsx(Qe,{}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($e,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 mb-2",children:"No media yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tap the camera button to add photos"})]}):e.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map(u=>{const b=st({onLongPress:()=>{console.log("Long press on media item:",u.id)}});return e.jsxs("button",{...b,onClick:async()=>{await g.light()},className:"aspect-square rounded-lg overflow-hidden bg-white/10 active:opacity-80 transition-opacity relative",children:[e.jsx(rt,{src:u.url,alt:"Trip media",className:"w-full h-full object-cover",width:300,loading:"lazy"}),u.type==="video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(Ke,{size:24,className:"text-white"})})]},u.id)})})})]})},ht=({activeTab:t,onTabChange:s,tripId:a,basecamp:i})=>{const{accentColors:r}=Te(),{isDemoMode:c}=le(),l=d.useRef(null),n=d.useRef(null),o=[{id:"chat",label:"Chat",icon:Oe},{id:"calendar",label:"Calendar",icon:Be},{id:"tasks",label:"Tasks",icon:Me},{id:"polls",label:"Polls",icon:He},{id:"media",label:"Media",icon:xe},{id:"places",label:"Places",icon:he},{id:"concierge",label:"Concierge",icon:qe}];d.useEffect(()=>{if(n.current){const p=n.current.querySelector(`[data-tab="${t}"]`);p&&p.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[t]);const m=async p=>{await g.light(),s(p)},h=()=>{switch(t){case"chat":return e.jsx(K,{tripId:a});case"calendar":return e.jsx(et,{tripId:a});case"tasks":return e.jsx(tt,{tripId:a});case"polls":return e.jsx(ze,{});case"media":return e.jsx(mt,{tripId:a});case"places":return e.jsx(Ue,{tripId:a});case"concierge":return e.jsx(Le,{tripId:a,basecamp:i,isDemoMode:c});default:return e.jsx(K,{tripId:a})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sticky top-[73px] z-40 bg-black/95 backdrop-blur-md border-b border-white/10",children:e.jsx("div",{ref:n,className:"flex overflow-x-auto scrollbar-hide gap-2 px-4 py-3",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:o.map(p=>{const u=p.icon,b=t===p.id;return e.jsxs("button",{"data-tab":p.id,onClick:()=>m(p.id),className:`
                  flex items-center justify-center gap-2 
                  px-4 py-2.5 min-w-max
                  rounded-lg font-medium text-sm
                  transition-all duration-200
                  flex-shrink-0
                  active:scale-95
                  ${b?`bg-gradient-to-r ${r.gradient} text-white shadow-lg`:"bg-white/10 text-gray-300"}
                `,children:[e.jsx(u,{size:18,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:p.label})]},p.id)})})}),e.jsx("div",{ref:l,className:"min-h-[calc(100vh-240px)] bg-black",children:h()})]})};class pt extends d.Component{constructor(a){super(a);V(this,"handleReset",async()=>{await g.light(),this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Mobile Error Boundary caught:",a,i),g.heavy()}render(){var a;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-black p-6",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-6 max-w-md",children:[e.jsx(Ee,{className:"text-red-400 mx-auto mb-4",size:48}),e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-400 text-center mb-6 text-sm",children:((a=this.state.error)==null?void 0:a.message)||"An unexpected error occurred"}),e.jsxs("button",{onClick:this.handleReset,className:"w-full bg-blue-600 text-white py-3 rounded-xl flex items-center justify-center gap-2 active:scale-95 transition-transform",children:[e.jsx(ae,{size:20}),e.jsx("span",{children:"Try Again"})]})]})}):this.props.children}}const xt=()=>{const{tripId:t}=ie(),s=re();ne();const[a,i]=d.useState("chat"),[r,c]=d.useState("");fe({preventZoom:!0,adjustViewport:!0});const l=t?parseInt(t,10):null,n=l?de(l):null;oe.useEffect(()=>{n&&!r&&c(n.description)},[n,r]);const o=n?{...n,description:r||n.description}:null;if(!o)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Trip Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The trip you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>{g.light(),s("/")},className:"bg-blue-600 text-white px-6 py-3 rounded-xl transition-colors active:scale-95",children:"Back to My Trips"})]})});const h=ue(n).basecamp,p=()=>{g.light(),s("/")},u=b=>{g.light(),i(b)};return e.jsx(pt,{children:e.jsxs("div",{className:"min-h-screen bg-black pb-mobile-nav-height",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-md border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("button",{onClick:p,className:"p-2 -ml-2 active:scale-95 transition-transform",children:e.jsx(Ye,{size:24,className:"text-white"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h1",{className:"text-lg font-semibold text-white truncate px-2",children:n.title}),e.jsx("p",{className:"text-xs text-gray-400 truncate px-2",children:n.location})]}),e.jsx("button",{onClick:()=>g.light(),className:"p-2 -mr-2 active:scale-95 transition-transform",children:e.jsx(Xe,{size:24,className:"text-white"})})]})}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(ce,{trip:o,onDescriptionUpdate:c})}),e.jsxs("div",{className:"px-4 py-3 flex items-center gap-2 border-b border-white/10",children:[e.jsx(pe,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[n.participants.length," travelers"]})]}),e.jsx(ht,{activeTab:a,onTabChange:u,tripId:t||"1",basecamp:h})]})})},ft=()=>{const t=se(),{tripId:s}=ie(),a=re(),{user:i}=ne(),[r,c]=d.useState("chat"),[l,n]=d.useState(!1),[o,m]=d.useState(!1),[h,p]=d.useState(!1),[u,b]=d.useState(!1),[v,j]=d.useState(!1),[x,w]=d.useState(!1),[P,L]=d.useState(""),S=s?parseInt(s,10):null,y=S?de(S):null;oe.useEffect(()=>{y&&!P&&L(y.description)},[y,P]);const f=y?{...y,description:P||y.description}:null;if(!f)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Trip Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The trip you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>a("/"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl transition-colors",children:"Back to My Trips"})]})});const N=ue(y),T=N.basecamp,E=[],F=N.broadcasts,be=N.links,Y=N.itinerary,ye={id:s||"1",title:y.title,location:y.location,dateRange:y.dateRange,basecamp:T,calendar:Y,broadcasts:F,links:be,messages:E,collaborators:y.participants,itinerary:Y,isPro:!1};return t?e.jsx(xt,{}):e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-7xl",children:[e.jsx(De,{tripContext:ye,showInbox:l,onToggleInbox:()=>n(!l),onShowInvite:()=>p(!0),onShowTripSettings:()=>j(!0),onShowAuth:()=>b(!0)}),l&&i&&e.jsx("div",{className:"mb-8",children:e.jsx(Re,{})}),e.jsx(ce,{trip:f,onDescriptionUpdate:L}),e.jsx(Ge,{activeTab:r,onTabChange:c,onShowTripsPlusModal:()=>w(!0),tripId:s||"1",tripName:f.title,basecamp:T})]}),e.jsx(Ie,{showSettings:o,onCloseSettings:()=>m(!1),showInvite:h,onCloseInvite:()=>p(!1),showAuth:u,onCloseAuth:()=>b(!1),showTripSettings:v,onCloseTripSettings:()=>j(!1),showTripsPlusModal:x,onCloseTripsPlusModal:()=>w(!1),tripName:f.title,tripId:s||"1",userId:i==null?void 0:i.id})]})},Ft=Object.freeze(Object.defineProperty({__proto__:null,default:ft},Symbol.toStringTag,{value:"Module"}));export{Z as E,Ft as T};
