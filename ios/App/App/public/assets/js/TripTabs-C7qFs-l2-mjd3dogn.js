const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/TripDetailModals-BpnQZ47b-mjd3dogn.js","assets/js/ui-vendor-BO3EQrMK-mjd3dogn.js","assets/js/react-vendor-D1R0t5S0-mjd3dogn.js","assets/js/index-Ta7FH5xW-mjd3dogn.js","assets/js/supabase-DyX-XggK-mjd3dogn.js","assets/js/utils-DD44zzh--mjd3dogn.js","assets/index-Bc63Wok3.css","assets/js/tripConverter-C1IUbOIF-mjd3dogn.js","assets/js/tripsData-DKwZ96V_-mjd3dogn.js","assets/js/select-CMjqEsxb-mjd3dogn.js","assets/js/SettingsMenu-DFNATHGY-mjd3dogn.js","assets/js/SavedRecommendations-D-6cIfyL-mjd3dogn.js","assets/js/card-jeNxgMYk-mjd3dogn.js","assets/js/badge-DyE_ZUPM-mjd3dogn.js","assets/js/useSavedRecommendations-DTox9Xl2-mjd3dogn.js","assets/js/map-pin-BtCU-LeS-mjd3dogn.js","assets/js/plus-Dhwa7sZY-mjd3dogn.js","assets/js/pro-CZgaTEEg-mjd3dogn.js","assets/js/BillingSection-CjHrdMm3-mjd3dogn.js","assets/js/building-QMpp1aWF-mjd3dogn.js","assets/js/camera-AJLsIMdA-mjd3dogn.js","assets/js/user-DFuJ2ZP3-mjd3dogn.js","assets/js/shield-DGBvlKQi-mjd3dogn.js","assets/js/zap-LZcBFzwj-mjd3dogn.js","assets/js/trending-up-B0a-0y1l-mjd3dogn.js","assets/js/input-DsI2n-oJ-mjd3dogn.js","assets/js/label-D_iG0y88-mjd3dogn.js","assets/js/switch-GKuTbu---mjd3dogn.js","assets/js/loader-circle-C0Dqayt8-mjd3dogn.js","assets/js/mail-BdBVrsyz-mjd3dogn.js","assets/js/userPreferencesService-DregIO64-mjd3dogn.js","assets/js/calendar-C9K0fVga-mjd3dogn.js","assets/js/archive-zX2FvEif-mjd3dogn.js","assets/js/AuthModal-BKw70HSh-mjd3dogn.js","assets/js/arrow-left-Biq1qnK6-mjd3dogn.js","assets/js/eye-BNDPAvT6-mjd3dogn.js","assets/js/users-B07yK8Y7-mjd3dogn.js","assets/js/dropdown-menu-BXaKb4pk-mjd3dogn.js","assets/js/chevron-right-DKRZr0Ps-mjd3dogn.js","assets/js/dialog-BcLamxvL-mjd3dogn.js","assets/js/eventsMockData-BWXZ-nj7-mjd3dogn.js","assets/js/calendar-ylgcJK3b-mjd3dogn.js","assets/js/chevron-left-C1xtDQ_l-mjd3dogn.js","assets/js/progress-D31nnzej-mjd3dogn.js","assets/js/textarea-BudkfAn8-mjd3dogn.js","assets/js/googlePlacesNew-Dl7cAwDK-mjd3dogn.js","assets/js/external-link-CqAT5ABV-mjd3dogn.js","assets/js/circle-check-big-Bvor9_sf-mjd3dogn.js","assets/js/avatar-HCmfb6Ad-mjd3dogn.js","assets/js/circle-alert-CX60mGhN-mjd3dogn.js","assets/js/clock-CbBGjTQx-mjd3dogn.js","assets/js/chart-column-DOJCLy2J-mjd3dogn.js","assets/js/circle-check-CNnkiDfZ-mjd3dogn.js","assets/js/charts-CLK9EMgA-mjd3dogn.js","assets/js/share-2-DwO-SOoB-mjd3dogn.js","assets/TripDetailModals-D8Md-CES.css","assets/js/GroupCalendar-C7tHoqVY-mjd3dogn.js","assets/js/TripTasksTab-Cb9C55d5-mjd3dogn.js","assets/js/sheet-L6YEzMS_-mjd3dogn.js","assets/js/UnifiedMediaHub-CeKqWQUM-mjd3dogn.js","assets/js/tabs-Dxuz3Y6S-mjd3dogn.js","assets/js/AddLinkModal-BcpZ7zHk-mjd3dogn.js","assets/js/PaymentsTab-CYY5YmCQ-mjd3dogn.js","assets/js/trending-down-MCtSAEQe-mjd3dogn.js","assets/js/checkbox-DB2Rf35T-mjd3dogn.js","assets/js/useSuperAdmin-CWSn9Z4T-mjd3dogn.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,a=(a,r,s)=>((a,r,s)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s)(a,"symbol"!=typeof r?r+"":r,s);import{_ as r}from"./supabase-DyX-XggK-mjd3dogn.js";import{j as s}from"./ui-vendor-BO3EQrMK-mjd3dogn.js";import{r as t}from"./react-vendor-D1R0t5S0-mjd3dogn.js";import{ab as n,B as i,R as o,m as l,T as d,g as c,h as m,i as h}from"./index-Ta7FH5xW-mjd3dogn.js";import{A as p,s as u,f as j,r as f,L as x}from"./tripConverter-C1IUbOIF-mjd3dogn.js";import{C as b}from"./circle-alert-CX60mGhN-mjd3dogn.js";import{u as g}from"./useSuperAdmin-CWSn9Z4T-mjd3dogn.js";import{M as _,S as T}from"./SettingsMenu-DFNATHGY-mjd3dogn.js";import{C as v}from"./calendar-C9K0fVga-mjd3dogn.js";import{C}from"./camera-AJLsIMdA-mjd3dogn.js";import{D as w}from"./switch-GKuTbu---mjd3dogn.js";import{M as y}from"./map-pin-BtCU-LeS-mjd3dogn.js";import{C as N}from"./chart-column-DOJCLy2J-mjd3dogn.js";import{C as E}from"./TripDetailModals-BpnQZ47b-mjd3dogn.js";class P extends t.Component{constructor(e){super(e),a(this,"handleReset",()=>{this.setState({hasError:!1,error:null}),n.addBreadcrumb({category:"user-action",message:`User reset error boundary for ${this.props.featureName}`,level:"info"})}),this.state={hasError:!1,error:null,errorCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){const{featureName:r,onError:s}=this.props;n.captureException(e,{context:`FeatureErrorBoundary:${r}`,additionalData:{componentStack:a.componentStack,errorCount:this.state.errorCount+1}}),s&&s(e,a),this.setState(e=>({errorCount:e.errorCount+1})),this.state.errorCount}render(){const{hasError:e,error:a,errorCount:r}=this.state,{children:t,featureName:n,fallback:l}=this.props;return e?l?s.jsx(s.Fragment,{children:l}):s.jsxs("div",{className:"p-4",children:[s.jsxs(p,{variant:"destructive",className:"mb-4",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsxs(u,{children:["Something went wrong in ",n]}),s.jsx(j,{children:(null==a?void 0:a.message)||"An unexpected error occurred"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(i,{onClick:this.handleReset,variant:"outline",size:"sm",disabled:r>3,children:[s.jsx(o,{className:"h-4 w-4 mr-2"}),r>3?"Too many errors":"Try Again"]})}),!1]}):t}}const D=t.lazy(()=>r(()=>import("./TripDetailModals-BpnQZ47b-mjd3dogn.js").then(e=>e.K),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55])).then(e=>({default:e.TripChat}))),k=t.lazy(()=>r(()=>import("./GroupCalendar-C7tHoqVY-mjd3dogn.js"),__vite__mapDeps([56,1,2,41,3,4,5,6,42,38,12,13,31,54,7,8,9,10,11,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,50,0,37,39,40,43,44,45,46,47,48,49,51,52,53,55])).then(e=>({default:e.GroupCalendar}))),I=t.lazy(()=>r(()=>import("./TripDetailModals-BpnQZ47b-mjd3dogn.js").then(e=>e.O),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55])).then(e=>({default:e.CommentsWall}))),A=t.lazy(()=>r(()=>import("./TripTasksTab-Cb9C55d5-mjd3dogn.js").then(e=>e.a),__vite__mapDeps([57,1,2,3,4,5,6,13,58,48,52,37,38,9,39,31,21,0,7,8,10,11,12,14,15,16,17,18,19,20,22,23,24,25,26,27,28,29,30,32,33,34,35,36,40,41,42,43,44,45,46,47,49,50,51,53,54,55])).then(e=>({default:e.TripTasksTab}))),M=t.lazy(()=>r(()=>import("./UnifiedMediaHub-CeKqWQUM-mjd3dogn.js"),__vite__mapDeps([59,1,2,60,3,4,5,6,0,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,61])).then(e=>({default:e.UnifiedMediaHub}))),S=t.lazy(()=>r(()=>import("./TripDetailModals-BpnQZ47b-mjd3dogn.js").then(e=>e.Q),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55])).then(e=>({default:e.PlacesSection}))),L=t.lazy(()=>r(()=>import("./TripDetailModals-BpnQZ47b-mjd3dogn.js").then(e=>e.R),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55])).then(e=>({default:e.AIConciergeChat}))),O=t.lazy(()=>r(()=>import("./PaymentsTab-CYY5YmCQ-mjd3dogn.js"),__vite__mapDeps([62,1,2,12,3,4,5,6,24,63,48,39,28,52,50,46,9,13,25,26,10,11,14,8,15,16,17,18,19,20,21,22,23,27,29,30,31,32,33,34,35,36,47,0,7,37,38,40,41,42,43,44,45,49,51,53,54,55,64,65])).then(e=>({default:e.PaymentsTab}))),R=t.lazy(()=>r(()=>import("./AddLinkModal-BcpZ7zHk-mjd3dogn.js"),__vite__mapDeps([61,1,2,3,4,5,6,0,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55])).then(e=>({default:e.AddLinkModal}))),z=({activeTab:e,onTabChange:a,tripId:n="1",tripName:i,basecamp:o,tripPreferences:p,showPlaces:u=!1,showConcierge:j=!1,isDemoMode:b=!1,tripData:z})=>{const[V,$]=t.useState("chat"),[F,U]=t.useState(!1),[B,H]=t.useState(void 0),{accentColors:G}=l(),Q=f(z||{}),{isSuperAdmin:J}=g(),K=e=>{H({url:e.url,title:e.title||e.domain,note:`Shared in chat on ${new Date(e.lastSeenAt).toLocaleDateString()}`}),U(!0)},W=[{id:"chat",label:"Chat",icon:_,enabled:J||Q.showChat},{id:"calendar",label:"Calendar",icon:v,enabled:J||Q.showCalendar},{id:"concierge",label:"Concierge",icon:T,enabled:J||j},{id:"media",label:"Media",icon:C,enabled:J||Q.showMedia},{id:"payments",label:"Payments",icon:w,enabled:!0},{id:"places",label:"Places",icon:y,enabled:J||u},{id:"polls",label:"Polls",icon:N,enabled:J||Q.showPolls},{id:"tasks",label:"Tasks",icon:E,enabled:J||Q.showTasks}],q=()=>s.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})});return s.jsxs(s.Fragment,{children:[s.jsx(t.Suspense,{fallback:null,children:s.jsx(R,{isOpen:F,onClose:()=>{U(!1),H(void 0)},prefill:B})}),s.jsx("div",{className:"w-full flex justify-center mb-2",children:s.jsx("div",{className:"w-full max-w-7xl overflow-x-auto scrollbar-hidden scroll-smooth px-2",children:s.jsx("div",{className:"flex whitespace-nowrap gap-2",children:W.map(e=>{const a=e.icon,t=V===e.id,n=e.enabled;return s.jsx(d,{children:s.jsxs(c,{children:[s.jsx(m,{asChild:!0,children:s.jsxs("button",{onClick:()=>(async(e,a)=>{if(!a){const{toast:e}=await r(async()=>{const{toast:e}=await import("./index-Ta7FH5xW-mjd3dogn.js").then(e=>e.ac);return{toast:e}},__vite__mapDeps([3,1,2,4,5,6]));return void e.info("This feature is disabled for this trip",{description:"Contact trip admin to enable this feature"})}$(e)})(e.id,n),className:`\n                      flex items-center justify-center gap-1.5 \n                      px-3.5 py-2.5 min-h-[42px]\n                      rounded-xl font-medium text-sm\n                      transition-all duration-200\n                      flex-1\n                      ${t&&n?`bg-gradient-to-r ${G.gradient} text-white shadow-md`:n?"bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white hover:shadow-sm":"bg-white/5 text-gray-500 cursor-not-allowed opacity-40 grayscale"}\n                      ${n?"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent":"pointer-events-none"}\n                    `,children:[s.jsx(a,{size:16,className:"flex-shrink-0"}),s.jsx("span",{className:"whitespace-nowrap",children:e.label}),!n&&s.jsx(x,{size:12,className:"ml-1 flex-shrink-0"})]},e.id)}),!n&&s.jsx(h,{children:s.jsx("p",{className:"text-xs",children:"This feature is disabled for this trip"})})]})})})})})}),s.jsx("div",{className:"overflow-y-auto native-scroll pb-24 sm:pb-4 h-auto min-h-0 max-h-none md:h-[calc(100vh-240px)] md:max-h-[1000px] md:min-h-[600px]",children:s.jsx(t.Suspense,{fallback:s.jsx(q,{}),children:(()=>{switch(V){case"chat":default:return s.jsx(P,{featureName:"Trip Chat",children:s.jsx(D,{tripId:n})});case"polls":return s.jsx(P,{featureName:"Polls & Comments",children:s.jsx(I,{tripId:n})});case"tasks":return s.jsx(P,{featureName:"Tasks & Todo",children:s.jsx(A,{tripId:n})});case"calendar":return s.jsx(P,{featureName:"Calendar & Events",children:s.jsx(k,{tripId:n})});case"media":return s.jsx(P,{featureName:"Media Hub",children:s.jsx(M,{tripId:n,onPromoteToTripLink:K})});case"payments":return s.jsx(P,{featureName:"Payments & Expenses",children:s.jsx(O,{tripId:n})});case"places":return s.jsx(P,{featureName:"Places & Map",children:s.jsx(S,{tripId:n,tripName:i})});case"concierge":return s.jsx(P,{featureName:"AI Concierge",children:s.jsx(L,{tripId:n,basecamp:o,preferences:p,isDemoMode:b})})}})()})})]})};export{P as F,z as T};
