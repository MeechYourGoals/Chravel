const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/exportPdfClient-BlEK9_X8-mjd3dogn.js","assets/js/pdf-G87Ow8VM-mjd3dogn.js","assets/js/supabase-DyX-XggK-mjd3dogn.js","assets/js/react-vendor-D1R0t5S0-mjd3dogn.js","assets/js/tripExportDataService-DiA2Alf2-mjd3dogn.js","assets/js/index-Ta7FH5xW-mjd3dogn.js","assets/js/ui-vendor-BO3EQrMK-mjd3dogn.js","assets/js/utils-DD44zzh--mjd3dogn.js","assets/index-Bc63Wok3.css","assets/js/eventsMockData-BWXZ-nj7-mjd3dogn.js","assets/js/tripsData-DKwZ96V_-mjd3dogn.js","assets/js/TripDetailModals-BpnQZ47b-mjd3dogn.js","assets/js/tripConverter-C1IUbOIF-mjd3dogn.js","assets/js/select-CMjqEsxb-mjd3dogn.js","assets/js/SettingsMenu-DFNATHGY-mjd3dogn.js","assets/js/SavedRecommendations-D-6cIfyL-mjd3dogn.js","assets/js/card-jeNxgMYk-mjd3dogn.js","assets/js/badge-DyE_ZUPM-mjd3dogn.js","assets/js/useSavedRecommendations-DTox9Xl2-mjd3dogn.js","assets/js/map-pin-BtCU-LeS-mjd3dogn.js","assets/js/plus-Dhwa7sZY-mjd3dogn.js","assets/js/pro-CZgaTEEg-mjd3dogn.js","assets/js/BillingSection-CjHrdMm3-mjd3dogn.js","assets/js/building-QMpp1aWF-mjd3dogn.js","assets/js/camera-AJLsIMdA-mjd3dogn.js","assets/js/user-DFuJ2ZP3-mjd3dogn.js","assets/js/shield-DGBvlKQi-mjd3dogn.js","assets/js/zap-LZcBFzwj-mjd3dogn.js","assets/js/trending-up-B0a-0y1l-mjd3dogn.js","assets/js/input-DsI2n-oJ-mjd3dogn.js","assets/js/label-D_iG0y88-mjd3dogn.js","assets/js/switch-GKuTbu---mjd3dogn.js","assets/js/loader-circle-C0Dqayt8-mjd3dogn.js","assets/js/mail-BdBVrsyz-mjd3dogn.js","assets/js/userPreferencesService-DregIO64-mjd3dogn.js","assets/js/calendar-C9K0fVga-mjd3dogn.js","assets/js/archive-zX2FvEif-mjd3dogn.js","assets/js/AuthModal-BKw70HSh-mjd3dogn.js","assets/js/arrow-left-Biq1qnK6-mjd3dogn.js","assets/js/eye-BNDPAvT6-mjd3dogn.js","assets/js/users-B07yK8Y7-mjd3dogn.js","assets/js/dropdown-menu-BXaKb4pk-mjd3dogn.js","assets/js/chevron-right-DKRZr0Ps-mjd3dogn.js","assets/js/dialog-BcLamxvL-mjd3dogn.js","assets/js/calendar-ylgcJK3b-mjd3dogn.js","assets/js/chevron-left-C1xtDQ_l-mjd3dogn.js","assets/js/progress-D31nnzej-mjd3dogn.js","assets/js/textarea-BudkfAn8-mjd3dogn.js","assets/js/googlePlacesNew-Dl7cAwDK-mjd3dogn.js","assets/js/external-link-CqAT5ABV-mjd3dogn.js","assets/js/circle-check-big-Bvor9_sf-mjd3dogn.js","assets/js/avatar-HCmfb6Ad-mjd3dogn.js","assets/js/circle-alert-CX60mGhN-mjd3dogn.js","assets/js/clock-CbBGjTQx-mjd3dogn.js","assets/js/chart-column-DOJCLy2J-mjd3dogn.js","assets/js/circle-check-CNnkiDfZ-mjd3dogn.js","assets/js/charts-CLK9EMgA-mjd3dogn.js","assets/js/share-2-DwO-SOoB-mjd3dogn.js","assets/TripDetailModals-D8Md-CES.css","assets/js/TripDetailContent-DgIhnKg2-mjd3dogn.js","assets/js/TripTabs-C7qFs-l2-mjd3dogn.js","assets/js/useSuperAdmin-CWSn9Z4T-mjd3dogn.js"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-vendor-BO3EQrMK-mjd3dogn.js";import{u as t,d as i,t as s,k as a,o as r,L as o,f as n}from"./index-Ta7FH5xW-mjd3dogn.js";import{_ as l}from"./supabase-DyX-XggK-mjd3dogn.js";import{u as d,i as c,r as m,R as p}from"./react-vendor-D1R0t5S0-mjd3dogn.js";import{u,a as g,h as j,M as h,b as x,c as v,d as f,e as b,T as y}from"./TripDetailModals-BpnQZ47b-mjd3dogn.js";import{u as w,h as T,o as k,e as P,T as S,I as D,c as _,t as N,l as C}from"./tripConverter-C1IUbOIF-mjd3dogn.js";import{d as E}from"./SettingsMenu-DFNATHGY-mjd3dogn.js";import{t as I,g as M,a as R}from"./tripsData-DKwZ96V_-mjd3dogn.js";import{A as F}from"./arrow-left-Biq1qnK6-mjd3dogn.js";import{E as $}from"./progress-D31nnzej-mjd3dogn.js";import{T as A}from"./TripDetailHeader-DuOGWBm_-mjd3dogn.js";import{u as L}from"./usePerformanceMonitor-Ded4avWC-mjd3dogn.js";import"./utils-DD44zzh--mjd3dogn.js";import"./dropdown-menu-BXaKb4pk-mjd3dogn.js";import"./chevron-right-DKRZr0Ps-mjd3dogn.js";import"./select-CMjqEsxb-mjd3dogn.js";import"./input-DsI2n-oJ-mjd3dogn.js";import"./label-D_iG0y88-mjd3dogn.js";import"./card-jeNxgMYk-mjd3dogn.js";import"./badge-DyE_ZUPM-mjd3dogn.js";import"./dialog-BcLamxvL-mjd3dogn.js";import"./eventsMockData-BWXZ-nj7-mjd3dogn.js";import"./calendar-ylgcJK3b-mjd3dogn.js";import"./chevron-left-C1xtDQ_l-mjd3dogn.js";import"./switch-GKuTbu---mjd3dogn.js";import"./users-B07yK8Y7-mjd3dogn.js";import"./calendar-C9K0fVga-mjd3dogn.js";import"./user-DFuJ2ZP3-mjd3dogn.js";import"./textarea-BudkfAn8-mjd3dogn.js";import"./plus-Dhwa7sZY-mjd3dogn.js";import"./camera-AJLsIMdA-mjd3dogn.js";import"./loader-circle-C0Dqayt8-mjd3dogn.js";import"./googlePlacesNew-Dl7cAwDK-mjd3dogn.js";import"./map-pin-BtCU-LeS-mjd3dogn.js";import"./external-link-CqAT5ABV-mjd3dogn.js";import"./circle-check-big-Bvor9_sf-mjd3dogn.js";import"./avatar-HCmfb6Ad-mjd3dogn.js";import"./circle-alert-CX60mGhN-mjd3dogn.js";import"./clock-CbBGjTQx-mjd3dogn.js";import"./chart-column-DOJCLy2J-mjd3dogn.js";import"./BillingSection-CjHrdMm3-mjd3dogn.js";import"./building-QMpp1aWF-mjd3dogn.js";import"./pro-CZgaTEEg-mjd3dogn.js";import"./circle-check-CNnkiDfZ-mjd3dogn.js";import"./charts-CLK9EMgA-mjd3dogn.js";import"./share-2-DwO-SOoB-mjd3dogn.js";import"./AuthModal-BKw70HSh-mjd3dogn.js";import"./mail-BdBVrsyz-mjd3dogn.js";import"./eye-BNDPAvT6-mjd3dogn.js";import"./zap-LZcBFzwj-mjd3dogn.js";import"./SavedRecommendations-D-6cIfyL-mjd3dogn.js";import"./useSavedRecommendations-DTox9Xl2-mjd3dogn.js";import"./shield-DGBvlKQi-mjd3dogn.js";import"./trending-up-B0a-0y1l-mjd3dogn.js";import"./userPreferencesService-DregIO64-mjd3dogn.js";import"./archive-zX2FvEif-mjd3dogn.js";const z=()=>{const{tripId:r}=d(),o=c(),{user:n}=t(),{isDemoMode:b,isLoading:y}=i(),{trips:N,loading:C}=w(),{tripMembers:R,loading:A}=u(r),[L,z]=m.useState(()=>{if("undefined"==typeof window)return"chat";return sessionStorage.getItem(`trip_${r}_activeTab`)||"chat"}),[O,V]=m.useState(""),[U,q]=m.useState(!1),[B,Q]=m.useState(!1),[K,G]=m.useState(!1),[H,W]=m.useState(!1),[Y,Z]=m.useState(!1),[J,X]=m.useState(!1),ee=p.useRef(null);p.useEffect(()=>{r&&sessionStorage.setItem(`trip_${r}_activeTab`,L)},[L,r]),g({preventZoom:!0,adjustViewport:!0});const te=(b?I:T(N)).find(e=>String(e.id)===r);p.useEffect(()=>{te&&!O&&V(te.description)},[te,O]),p.useEffect(()=>{const e=()=>{var e;const t=(null==(e=ee.current)?void 0:e.offsetHeight)||73;document.documentElement.style.setProperty("--mobile-header-h",`${t}px`)},t=((e,t=100)=>{let i;return()=>{clearTimeout(i),i=setTimeout(e,t)}})(e,100);return e(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]);const ie=p.useMemo(()=>te?{...te,description:O||te.description,participants:b?te.participants:R.map(e=>({id:e.id,name:e.name,avatar:e.avatar||"",role:"member"}))}:null,[te,O,b,R]),se=p.useMemo(()=>te?M(te):null,[te]),ae=null==se?void 0:se.basecamp,re=m.useCallback(async e=>{var t;const i=r||"1",o=!i.includes("-");s.info("Generating PDF",{description:`Creating summary for "${(null==ie?void 0:ie.title)||"Trip"}"...`});try{let r;if(b||o){const s=a.getMockPayments(i),o=a.getMockPolls(i),n=a.getMockTasks(i),d=a.getMockPlaces(i),{generateClientPDF:c}=await l(async()=>{const{generateClientPDF:e}=await import("./exportPdfClient-BlEK9_X8-mjd3dogn.js");return{generateClientPDF:e}},__vite__mapDeps([0,1,2,3]));r=await c({tripId:i,tripTitle:(null==ie?void 0:ie.title)||"Trip",destination:null==ie?void 0:ie.location,dateRange:null==ie?void 0:ie.dateRange,calendar:e.includes("calendar")?[]:void 0,payments:e.includes("payments")&&s.length>0?{items:s,total:s.reduce((e,t)=>e+t.amount,0),currency:(null==(t=s[0])?void 0:t.currency)||"USD"}:void 0,polls:e.includes("polls")?o:void 0,tasks:e.includes("tasks")?n.map(e=>({title:e.title,description:e.description,completed:e.completed})):void 0,places:e.includes("places")?d:void 0},e,{customization:{compress:!0,maxItemsPerSection:100}})}else{const{getExportData:t}=await l(async()=>{const{getExportData:e}=await import("./tripExportDataService-DiA2Alf2-mjd3dogn.js");return{getExportData:e}},__vite__mapDeps([4,5,6,3,2,7,8,9,10])),s=await t(i,e);if(!s)throw new Error("Could not fetch trip data for export");const{generateClientPDF:a}=await l(async()=>{const{generateClientPDF:e}=await import("./exportPdfClient-BlEK9_X8-mjd3dogn.js");return{generateClientPDF:e}},__vite__mapDeps([0,1,2,3]));r=await a({tripId:i,tripTitle:s.trip.title,destination:s.trip.destination,dateRange:s.trip.dateRange,description:s.trip.description,calendar:s.calendar,payments:s.payments,polls:s.polls,tasks:s.tasks,places:s.places,roster:s.roster},e,{customization:{compress:!0,maxItemsPerSection:100}})}const n=`Trip_${((null==ie?void 0:ie.title)||"Trip").replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.pdf`;await k(r,n,{mimeType:"application/pdf"}),s.success("Export complete",{description:`PDF ready: ${n}`})}catch(n){throw s.error("Export failed",{description:n instanceof Error?n.message:"Failed to generate PDF. Please try again."}),n}},[r,ie,b]),oe=m.useCallback(async()=>{if(!ie)return;const e=`https://p.chravel.app/t/${encodeURIComponent(String(r))}`,t=`Check out ${ie.title} - a trip to ${ie.location}! ${ie.participants.length} Chravelers are going.`;if(navigator.share)try{await navigator.share({title:ie.title,text:t,url:e}),s.success("Share sheet opened")}catch(i){if("AbortError"!==i.name)try{await navigator.clipboard.writeText(e),s.success("Share link copied to clipboard")}catch{s.error("Failed to share")}}else try{await navigator.clipboard.writeText(e),s.success("Share link copied to clipboard")}catch{s.error("Failed to copy share link")}},[r,ie]),ne=m.useCallback(async()=>{if((null==n?void 0:n.id)&&r){X(!0);try{await E(r,n.id),s.success("Trip deleted",{description:`"${null==ie?void 0:ie.title}" has been removed from your account.`}),Z(!1),o("/")}catch(e){"CREATOR_CANNOT_DELETE"===(e instanceof Error?e.message:"Unknown error")?s.error("Cannot delete trip",{description:"As the trip creator, you cannot delete this trip for yourself. Consider archiving it instead."}):s.error("Failed to delete trip",{description:"There was an error deleting your trip. Please try again."})}finally{X(!1)}}else s.error("You must be logged in to delete a trip")},[null==n?void 0:n.id,r,null==ie?void 0:ie.title,o]);if(y)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Initializing..."})]})});if(C&&!b)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading trip..."})]})});if(!ie)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Trip Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The trip you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>{j.light(),o("/")},className:"bg-blue-600 text-white px-6 py-3 rounded-xl transition-colors active:scale-95",children:"Back to My Trips"})]})});return e.jsx(h,{children:e.jsxs("div",{className:"flex flex-col min-h-screen bg-black",children:[e.jsx("div",{ref:ee,className:"sticky top-0 z-50 bg-black/95 backdrop-blur-md border-b border-white/10 mobile-safe-header",children:e.jsx("div",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("button",{onClick:()=>{j.light(),o("/")},className:"flex-shrink-0 min-w-[44px] min-h-[44px] p-2 -ml-2 active:scale-95 transition-transform touch-manipulation flex items-center justify-center",style:{touchAction:"manipulation"},children:e.jsx(F,{size:22,className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-center",children:[e.jsx("h1",{className:"text-base font-semibold text-white leading-tight truncate",children:ie.title}),e.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-xs text-gray-400",children:[e.jsxs("span",{className:"truncate",children:[ie.location," â€¢ ",ie.participants.length," Chravelers"]}),e.jsxs("button",{onClick:()=>{j.light(),q(!0)},className:"flex-shrink-0 flex items-center gap-0.5 active:scale-95 transition-transform text-blue-400 hover:text-blue-300","aria-label":"View trip details",children:[e.jsx(P,{size:14}),e.jsx("span",{className:"font-medium",children:"More"})]})]})]}),e.jsx("button",{onClick:()=>{j.light(),G(!0)},className:"flex-shrink-0 min-w-[44px] min-h-[44px] p-2 -mr-2 active:scale-95 transition-transform touch-manipulation flex items-center justify-center",style:{touchAction:"manipulation"},children:e.jsx($,{size:22,className:"text-white"})})]})})}),e.jsx(x,{activeTab:L,onTabChange:e=>{j.light(),z(e)},tripId:r||"1",basecamp:ae}),e.jsx(v,{trip:ie,isOpen:U,onClose:()=>{j.light(),q(!1)},onDescriptionUpdate:V,onShowExport:()=>{q(!1),setTimeout(()=>Q(!0),200)}}),e.jsx(f,{isOpen:K,onClose:()=>G(!1),tripTitle:null==ie?void 0:ie.title,onShare:oe,onExport:()=>Q(!0),onInvite:()=>W(!0),onDelete:()=>Z(!0)}),e.jsx(S,{isOpen:B,onClose:()=>Q(!1),onExport:re,tripName:(null==ie?void 0:ie.title)||"Trip",tripId:r||"1"}),e.jsx(D,{isOpen:H,onClose:()=>W(!1),tripName:(null==ie?void 0:ie.title)||"Trip",tripId:r}),e.jsx(_,{isOpen:Y,onClose:()=>Z(!1),onConfirm:ne,tripTitle:(null==ie?void 0:ie.title)||"Trip",isLoading:J})]})})},O=m.lazy(()=>l(()=>import("./TripDetailModals-BpnQZ47b-mjd3dogn.js").then(e=>e.U),__vite__mapDeps([11,6,3,5,2,7,8,12,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,9,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58])).then(e=>({default:e.TripHeader}))),V=m.lazy(()=>l(()=>import("./TripDetailContent-DgIhnKg2-mjd3dogn.js"),__vite__mapDeps([59,6,3,60,2,5,7,8,12,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,52,61,54,11,41,42,43,9,44,45,46,47,48,49,50,51,53,55,56,57,58])).then(e=>({default:e.TripDetailContent}))),U=()=>{L("TripDetailDesktop");const{tripId:n}=d(),g=c(),{user:j}=t(),{isDemoMode:h,isLoading:x}=i(),v=r(),{tripMembers:f,loading:w}=u(n),[T,P]=m.useState("chat"),[D,_]=m.useState(!1),[E,I]=m.useState(!1),[F,$]=m.useState(!1),[z,U]=m.useState(!1),[q,B]=m.useState(!1),[Q,K]=m.useState(!1),[G,H]=m.useState(!1),[W,Y]=m.useState(""),[Z,J]=m.useState({}),[X,ee]=m.useState(null),[te,ie]=m.useState(!0);p.useEffect(()=>{(async()=>{if(!n)return ee(null),void ie(!1);if(!x){if(ie(!0),h){const e=parseInt(n,10);if(Number.isNaN(e))return s.error("Invalid trip ID format for demo mode"),ee(null),void ie(!1);const t=R(e);t||s.error(`Demo trip ${n} not found. Available trips: 1-12`),ee(t||null)}else try{const e=await N.getTripById(n);ee(e?C(e):null)}catch(e){ee(null)}ie(!1)}})()},[n,h,x]),p.useEffect(()=>{X&&!W&&Y(X.description)},[X,W]),p.useEffect(()=>{if(!te&&X){(()=>{setTimeout(()=>{const e=document.querySelector("[data-chat-container]");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},300)})()}},[te,X]),p.useEffect(()=>()=>{n&&(v.removeQueries({queryKey:["trip",n]}),v.removeQueries({queryKey:["trip-messages",n]}),v.removeQueries({queryKey:["trip-tasks",n]}),v.removeQueries({queryKey:["trip-polls",n]}),v.removeQueries({queryKey:["trip-members",n]}))},[n,v]);const se=p.useMemo(()=>X?{...X,title:Z.title||X.title,location:Z.location||X.location,dateRange:Z.dateRange||X.dateRange,description:W||X.description,participants:h?X.participants:f.map(e=>({id:e.id,name:e.name,avatar:e.avatar||"",role:"member"}))}:null,[X,Z.title,Z.location,Z.dateRange,W,h,f]),ae=p.useMemo(()=>se?M(se):null,[se]),re=null==ae?void 0:ae.basecamp,oe=[],ne=(null==ae?void 0:ae.broadcasts)??[],le=(null==ae?void 0:ae.links)??[],de=(null==ae?void 0:ae.itinerary)??[],ce=p.useMemo(()=>({id:n||"1",title:(null==se?void 0:se.title)??"",location:(null==se?void 0:se.location)??"",dateRange:(null==se?void 0:se.dateRange)??"",basecamp:re,calendar:de,broadcasts:ne,links:le,messages:oe,collaborators:h?(null==se?void 0:se.participants)??[]:f.map(e=>({id:e.id,name:e.name,avatar:e.avatar})),itinerary:de,isPro:!1}),[n,se,re,de,ne,le,oe,h,f]);if(x||te)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(o,{})});if(!se)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Trip Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The trip you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>g("/"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl transition-colors",children:"Back to My Trips"})]})});return e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 pb-8 max-w-7xl",children:[e.jsx(A,{tripContext:ce,showInbox:D,onToggleInbox:()=>_(!D),onShowInvite:()=>$(!0),onShowTripSettings:()=>B(!0),onShowAuth:()=>U(!0)}),D&&j&&e.jsx("div",{className:"mb-8",children:e.jsx(b,{})}),e.jsx(m.Suspense,{fallback:e.jsxs("div",{className:"mb-8 animate-pulse",children:[e.jsx("div",{className:"h-64 bg-white/5 rounded-3xl mb-4"}),e.jsx("div",{className:"h-8 bg-white/5 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-white/5 rounded w-1/4"})]}),children:e.jsx(O,{trip:se,onDescriptionUpdate:Y,onTripUpdate:e=>{J(t=>({...t,...e})),e.title&&J(t=>({...t,title:e.title})),e.description&&Y(e.description)},onShowExport:()=>H(!0)})}),e.jsx(m.Suspense,{fallback:e.jsx(o,{className:"my-12"}),children:e.jsx(V,{activeTab:T,onTabChange:P,onShowTripsPlusModal:()=>K(!0),tripId:n||"1",tripName:se.title,basecamp:re})})]}),e.jsx(y,{showSettings:E,onCloseSettings:()=>I(!1),showInvite:F,onCloseInvite:()=>$(!1),showAuth:z,onCloseAuth:()=>U(!1),showTripSettings:q,onCloseTripSettings:()=>B(!1),showTripsPlusModal:Q,onCloseTripsPlusModal:()=>K(!1),tripName:se.title,tripId:n||"1",userId:null==j?void 0:j.id}),e.jsx(S,{isOpen:G,onClose:()=>H(!1),onExport:async e=>{var t;try{let i=null;try{const e=navigator.userAgent||"",t=/iPad|iPhone|iPod/.test(e)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,s=/^((?!chrome|android|crios|fxios|edgios).)*safari/i.test(e);t&&s&&(i=window.open("","_blank"),i&&i.document.write('<html><head><title>Generating PDFâ€¦</title><meta name="viewport" content="width=device-width, initial-scale=1"></head><body style="font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial; padding: 16px; color: #e5e7eb; background: #111827"><div>Generating PDFâ€¦</div></body></html>'))}catch{}s.info("Generating PDF...");let r;if(n&&/^\d+$/.test(n)){const i=a.getMockPayments(n||"1"),o=a.getMockPolls(n||"1"),d=a.getMockMembers(n||"1"),c=a.getMockTasks(n||"1"),m=a.getMockPlaces(n||"1"),p=a.getSessionTripBasecamp(n||"1")||re,{generateClientPDF:u}=await l(async()=>{const{generateClientPDF:e}=await import("./exportPdfClient-BlEK9_X8-mjd3dogn.js");return{generateClientPDF:e}},__vite__mapDeps([0,1,2,3]));r=await u({tripId:n||"1",tripTitle:se.title,destination:se.location,dateRange:se.dateRange,description:se.description,calendar:e.includes("calendar")?de:void 0,payments:e.includes("payments")&&i.length>0?{items:i,total:i.reduce((e,t)=>e+t.amount,0),currency:(null==(t=i[0])?void 0:t.currency)||"USD"}:void 0,polls:e.includes("polls")?o:void 0,tasks:e.includes("tasks")?c.map(e=>({title:e.title,description:e.description,completed:e.completed})):void 0,places:e.includes("places")?[...p?[{name:`ðŸ“ Trip Base Camp: ${p.name||"Main Location"}`,url:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p.address)}`,description:p.address,votes:0}]:[],...m]:void 0,roster:e.includes("roster")?d.map(e=>({name:e.display_name,email:void 0,role:e.role})):void 0},e,{customization:{compress:!0,maxItemsPerSection:100},onProgress:e=>{"rendering"===e.stage&&s.info(`${e.message} (${e.current}/${e.total})`)}})}else{const{getExportData:t}=await l(async()=>{const{getExportData:e}=await import("./tripExportDataService-DiA2Alf2-mjd3dogn.js");return{getExportData:e}},__vite__mapDeps([4,5,6,3,2,7,8,9,10])),i=await t(n||"",e),{generateClientPDF:a}=await l(async()=>{const{generateClientPDF:e}=await import("./exportPdfClient-BlEK9_X8-mjd3dogn.js");return{generateClientPDF:e}},__vite__mapDeps([0,1,2,3]));r=await a({tripId:n||"",tripTitle:i.trip.title,destination:i.trip.destination,dateRange:i.trip.dateRange,description:i.trip.description,calendar:i.calendar,payments:i.payments,polls:i.polls,tasks:i.tasks,places:i.places,roster:i.roster},e,{customization:{compress:!0,maxItemsPerSection:100},onProgress:e=>{"rendering"===e.stage&&s.info(`${e.message} (${e.current}/${e.total})`)}})}const o=`Trip_${se.title.replace(/[^a-z0-9]/gi,"_")}_${Date.now()}.pdf`;await k(r,o,{preOpenedWindow:i,mimeType:"application/pdf"}),s.success("PDF exported successfully!")}catch(i){throw s.error(i instanceof Error?`Export failed: ${i.message}`:"Failed to export PDF"),i}},tripName:se.title,tripId:n||"1"})]})},q=()=>n()?e.jsx(z,{}):e.jsx(U,{});export{q as default};
