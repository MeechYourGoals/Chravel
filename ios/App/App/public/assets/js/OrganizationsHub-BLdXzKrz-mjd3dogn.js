import{j as e}from"./ui-vendor-BO3EQrMK-mjd3dogn.js";import{r as s,i as a}from"./react-vendor-D1R0t5S0-mjd3dogn.js";import{u as i}from"./useOrganization-BjbSTYDJ-mjd3dogn.js";import{j as t,B as r,u as l}from"./index-Ta7FH5xW-mjd3dogn.js";import{C as n,a as o,b as d,c as m}from"./card-jeNxgMYk-mjd3dogn.js";import{D as c,a as g,b as x,c as h}from"./dialog-BcLamxvL-mjd3dogn.js";import{I as j}from"./input-DsI2n-oJ-mjd3dogn.js";import{L as p}from"./label-D_iG0y88-mjd3dogn.js";import{L as u}from"./loader-circle-C0Dqayt8-mjd3dogn.js";import{S as b}from"./pro-CZgaTEEg-mjd3dogn.js";import{P as N}from"./plus-Dhwa7sZY-mjd3dogn.js";import{B as v}from"./building-QMpp1aWF-mjd3dogn.js";import{C as f}from"./chevron-right-DKRZr0Ps-mjd3dogn.js";import{U as y}from"./users-B07yK8Y7-mjd3dogn.js";import"./supabase-DyX-XggK-mjd3dogn.js";import"./utils-DD44zzh--mjd3dogn.js";const w=({open:a,onClose:l})=>{const{createOrganization:n}=i(),{toast:o}=t(),[d,m]=s.useState(!1),[b,N]=s.useState({name:"",display_name:"",billing_email:""});return e.jsx(c,{open:a,onOpenChange:l,children:e.jsxs(g,{className:"sm:max-w-md bg-gray-900 border-white/10",children:[e.jsx(x,{children:e.jsx(h,{className:"text-white",children:"Create Organization"})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!b.name||!b.billing_email)return void o({title:"Missing fields",description:"Please fill in all required fields",variant:"destructive"});m(!0);const{error:s}=await n({...b,display_name:b.display_name||b.name});s?o({title:"Error",description:"Failed to create organization",variant:"destructive"}):(o({title:"Success",description:"Organization created successfully"}),l(),N({name:"",display_name:"",billing_email:""})),m(!1)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",className:"text-gray-300",children:"Organization Name *"}),e.jsx(j,{id:"name",value:b.name,onChange:e=>N({...b,name:e.target.value}),className:"bg-gray-800/50 border-gray-600 text-white",placeholder:"Acme Tours",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"display_name",className:"text-gray-300",children:"Display Name"}),e.jsx(j,{id:"display_name",value:b.display_name,onChange:e=>N({...b,display_name:e.target.value}),className:"bg-gray-800/50 border-gray-600 text-white",placeholder:"Acme Tours & Events"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"billing_email",className:"text-gray-300",children:"Billing Email *"}),e.jsx(j,{id:"billing_email",type:"email",value:b.billing_email,onChange:e=>N({...b,billing_email:e.target.value}),className:"bg-gray-800/50 border-gray-600 text-white",placeholder:"billing@acmetours.com",required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:l,className:"flex-1",disabled:d,children:"Cancel"}),e.jsx(r,{type:"submit",className:"flex-1 bg-glass-orange hover:bg-glass-orange/80",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Organization"})]})]})]})})},_=()=>{const t=a();l();const{organizations:c,loading:g,fetchUserOrganizations:x}=i(),[h,j]=s.useState(!1);return s.useEffect(()=>{x()},[]),g?e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-glass-orange border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading organizations..."})]})}):e.jsx("div",{className:"min-h-screen bg-black text-white",children:e.jsxs("div",{className:"container mx-auto p-4 md:p-6 max-w-7xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Organizations"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your teams and Pro subscriptions"})]}),e.jsxs(r,{onClick:()=>j(!0),className:"bg-glass-orange hover:bg-glass-orange/80",children:[e.jsx(N,{size:16,className:"mr-2"}),"Create Organization"]})]})}),0===c.length?e.jsx(n,{className:"bg-white/5 border-white/10",children:e.jsxs(o,{className:"p-12 text-center",children:[e.jsx(v,{size:64,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Organizations Yet"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Create your first organization to start collaborating with your team"}),e.jsxs(r,{onClick:()=>j(!0),className:"bg-glass-orange hover:bg-glass-orange/80",children:[e.jsx(N,{size:16,className:"mr-2"}),"Create Your First Organization"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>{const a=b[s.subscription_tier],i=s.seats_used/s.seat_limit*100;return e.jsxs(n,{className:"bg-white/5 border-white/10 hover:bg-white/10 transition-all cursor-pointer group",onClick:()=>t(`/organization/${s.id}`),children:[e.jsx(d,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-glass-orange to-glass-yellow rounded-xl flex items-center justify-center",children:e.jsx(v,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx(m,{className:"text-white group-hover:text-glass-orange transition-colors",children:s.display_name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.name})]})]}),e.jsx(f,{size:20,className:"text-gray-500 group-hover:text-glass-orange transition-colors"})]})}),e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-white/10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Subscription"}),e.jsxs("div",{className:"font-semibold text-white flex items-center gap-2",children:[a.name,"enterprise-plus"===s.subscription_tier&&e.jsx("span",{className:"sr-only",children:"Enterprise Plus"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Status"}),e.jsx("div",{className:"text-sm font-medium "+("active"===s.subscription_status?"text-green-400":"trial"===s.subscription_status?"text-blue-400":"text-yellow-400"),children:s.subscription_status.charAt(0).toUpperCase()+s.subscription_status.slice(1)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Seat Usage"}),e.jsxs("span",{className:"text-white font-medium",children:[s.seats_used,"/",s.seat_limit]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-glass-orange h-2 rounded-full transition-all",style:{width:`${i}%`}})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(y,{size:12}),e.jsxs("span",{children:[s.seat_limit-s.seats_used," seats available"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",className:"flex-1 border-white/20 text-white hover:bg-white/10",onClick:e=>{e.stopPropagation(),t(`/organization/${s.id}`)},children:[e.jsx(y,{size:14,className:"mr-1"}),"Team"]}),e.jsx(r,{size:"sm",variant:"outline",className:"flex-1 border-white/20 text-white hover:bg-white/10",onClick:e=>{e.stopPropagation(),t(`/organization/${s.id}?tab=settings`)},children:"Settings"})]})]})]},s.id)})}),e.jsx(w,{open:h,onClose:()=>j(!1)})]})})};export{_ as OrganizationsHub};
