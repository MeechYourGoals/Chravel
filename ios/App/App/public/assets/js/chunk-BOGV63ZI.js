import{j as e}from"./chunk-DE8J_P3a.js";import{r as s}from"./chunk-CHPtWMTz.js";import{C as t}from"./chunk-30ZbY-F3.js";import{B as a}from"./chunk-CKgI9q5n.js";import{S as i,a as r,b as d,c,f as l,d as n}from"./chunk-LoZVIojA.js";import{B as o}from"./chunk-Bc1XvzR8.js";import{u as m}from"./chunk-88HG7dU1.js";import{t as x}from"./chunk-wPum6LLk.js";import{c as h,j as u}from"../index-C69Cv9fm.js";import{M as j}from"./chunk-ByyMTJWo.js";import{P as f}from"./chunk-DoIo-fWL.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=h("BookmarkMinus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]),g=()=>{const{items:h,loading:g,addToTrip:N,refresh:k}=m(),{toast:v}=u(),[y,b]=s.useState({}),w=s.useMemo(()=>x.map(e=>({id:String(e.id),label:`${e.title} • ${e.location}`})),[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Saved Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Items you saved while browsing recommendations. Add any of these to a specific trip."}),g?e.jsx("div",{className:"text-muted-foreground",children:"Loading…"}):0===h.length?e.jsx(t,{className:"p-6 text-center text-muted-foreground",children:"No saved recommendations yet."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:h.map(s=>e.jsxs(t,{className:"p-4 flex gap-4",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.title,className:"w-24 h-24 rounded-md object-cover"}):e.jsx("div",{className:"w-24 h-24 rounded-md bg-muted flex items-center justify-center",children:e.jsx(p,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-medium text-foreground truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[e.jsx(o,{variant:"outline",className:"text-xs capitalize",children:s.rec_type}),(s.location||s.city)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-3 h-3"}),s.location||s.city]})]})]})}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsxs(i,{onValueChange:e=>b(t=>({...t,[s.id]:e})),value:y[s.id],children:[e.jsx(r,{className:"w-full",children:e.jsx(d,{placeholder:"Select a trip"})}),e.jsx(c,{className:"bg-background border border-border z-50",children:e.jsx(l,{children:w.map(s=>e.jsx(n,{value:s.id,children:s.label},s.id))})})]}),e.jsxs(a,{disabled:!y[s.id],onClick:()=>(async(e,s)=>{const t=h.find(s=>s.id===e);if(!t)return;"ok"===(await N(t,s)).status?v({title:"Added to trip",description:`${t.title} added successfully.`}):v({title:"Sign in required",description:"Please sign in to add items to trips."})})(s.id,y[s.id]),children:[e.jsx(f,{className:"w-4 h-4 mr-1"})," Add to Trip"]})]})]})]},s.id))})]})};export{g as S};
